<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: CompressedMatrix Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1CompressedMatrix.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classkaldi_1_1CompressedMatrix-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CompressedMatrix Class Reference<div class="ingroups"><a class="el" href="group__matrix__group.html">%Matrix and vector classes</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This class does lossy compression of a matrix.  
 <a href="classkaldi_1_1CompressedMatrix.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for CompressedMatrix:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1CompressedMatrix__coll__graph.png" border="0" usemap="#CompressedMatrix_coll__map" alt="Collaboration graph"/></div>
<map name="CompressedMatrix_coll__map" id="CompressedMatrix_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1CompressedMatrix_1_1GlobalHeader.html">GlobalHeader</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1CompressedMatrix_1_1PerColHeader.html">PerColHeader</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af0cf968a3c10c73d1f5fde4e80284a22"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#af0cf968a3c10c73d1f5fde4e80284a22">CompressedMatrix</a> ()</td></tr>
<tr class="separator:af0cf968a3c10c73d1f5fde4e80284a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab34f7642ecd1c29784f1d50b25f79365"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#ab34f7642ecd1c29784f1d50b25f79365">~CompressedMatrix</a> ()</td></tr>
<tr class="separator:ab34f7642ecd1c29784f1d50b25f79365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11b25084ad2d33dbdb45d108402e5365"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:a11b25084ad2d33dbdb45d108402e5365"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a11b25084ad2d33dbdb45d108402e5365">CompressedMatrix</a> (const <a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; Real &gt; &amp;mat)</td></tr>
<tr class="separator:a11b25084ad2d33dbdb45d108402e5365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41e077759e9e33f6736a5d9521d7b9f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a41e077759e9e33f6736a5d9521d7b9f1">CompressedMatrix</a> (const <a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> &amp;mat, const <a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> row_offset, const <a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> num_rows, const <a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> col_offset, const <a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> num_cols)</td></tr>
<tr class="memdesc:a41e077759e9e33f6736a5d9521d7b9f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializer that can be used to select part of an existing <a class="el" href="classkaldi_1_1CompressedMatrix.html" title="This class does lossy compression of a matrix. ">CompressedMatrix</a> without un-compressing and re-compressing (note: unlike similar initializers for class <a class="el" href="classkaldi_1_1Matrix.html" title="A class for storing matrices. ">Matrix</a>, it doesn't point to the same memory location).  <a href="#a41e077759e9e33f6736a5d9521d7b9f1">More...</a><br/></td></tr>
<tr class="separator:a41e077759e9e33f6736a5d9521d7b9f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aaead40f30363407c7e9c35a72638db"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a6aaead40f30363407c7e9c35a72638db">Data</a> () const </td></tr>
<tr class="separator:a6aaead40f30363407c7e9c35a72638db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1fc93f471e0df869aff311f23fa71d0"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:ae1fc93f471e0df869aff311f23fa71d0"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#ae1fc93f471e0df869aff311f23fa71d0">CopyFromMat</a> (const <a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; Real &gt; &amp;mat)</td></tr>
<tr class="memdesc:ae1fc93f471e0df869aff311f23fa71d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This will resize *this and copy the contents of mat to *this.  <a href="#ae1fc93f471e0df869aff311f23fa71d0">More...</a><br/></td></tr>
<tr class="separator:ae1fc93f471e0df869aff311f23fa71d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac059aa1639196ac9af7a35d0c0745d94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#ac059aa1639196ac9af7a35d0c0745d94">CompressedMatrix</a> (const <a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> &amp;mat)</td></tr>
<tr class="separator:ac059aa1639196ac9af7a35d0c0745d94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6904c6a808cc10523b35550ee4f1f78"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#ab6904c6a808cc10523b35550ee4f1f78">operator=</a> (const <a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> &amp;mat)</td></tr>
<tr class="separator:ab6904c6a808cc10523b35550ee4f1f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a522378f78034e4ba489e3e4a39994a84"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:a522378f78034e4ba489e3e4a39994a84"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a522378f78034e4ba489e3e4a39994a84">operator=</a> (const <a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; Real &gt; &amp;mat)</td></tr>
<tr class="separator:a522378f78034e4ba489e3e4a39994a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad80519cf50d1474c43dada4499a522fe"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:ad80519cf50d1474c43dada4499a522fe"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#ad80519cf50d1474c43dada4499a522fe">CopyToMat</a> (<a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; Real &gt; *mat, <a class="el" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724f">MatrixTransposeType</a> trans=<a class="el" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kNoTrans</a>) const </td></tr>
<tr class="memdesc:ad80519cf50d1474c43dada4499a522fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies contents to matrix.  <a href="#ad80519cf50d1474c43dada4499a522fe">More...</a><br/></td></tr>
<tr class="separator:ad80519cf50d1474c43dada4499a522fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5da0494b3a3f4bc33ff83c9b5ff5b40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#ad5da0494b3a3f4bc33ff83c9b5ff5b40">Write</a> (std::ostream &amp;os, bool binary) const </td></tr>
<tr class="separator:ad5da0494b3a3f4bc33ff83c9b5ff5b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7d2790fc7e94fe9780ccc937de1270"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a8e7d2790fc7e94fe9780ccc937de1270">Read</a> (std::istream &amp;is, bool binary)</td></tr>
<tr class="separator:a8e7d2790fc7e94fe9780ccc937de1270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab204078beff8151c95d1828544acf92c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">NumRows</a> () const </td></tr>
<tr class="memdesc:ab204078beff8151c95d1828544acf92c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns number of rows (or zero for emtpy matrix).  <a href="#ab204078beff8151c95d1828544acf92c">More...</a><br/></td></tr>
<tr class="separator:ab204078beff8151c95d1828544acf92c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe58124fbfb387ddc20513bf3075b16e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a> () const </td></tr>
<tr class="memdesc:afe58124fbfb387ddc20513bf3075b16e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns number of columns (or zero for emtpy matrix).  <a href="#afe58124fbfb387ddc20513bf3075b16e">More...</a><br/></td></tr>
<tr class="separator:afe58124fbfb387ddc20513bf3075b16e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15cfa9f2ba2594610f20229db910b548"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:a15cfa9f2ba2594610f20229db910b548"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a15cfa9f2ba2594610f20229db910b548">CopyRowToVec</a> (<a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> row, <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; Real &gt; *v) const </td></tr>
<tr class="memdesc:a15cfa9f2ba2594610f20229db910b548"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies row #row of the matrix into vector v.  <a href="#a15cfa9f2ba2594610f20229db910b548">More...</a><br/></td></tr>
<tr class="separator:a15cfa9f2ba2594610f20229db910b548"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eb64d8b146f0408e9f8a8f3dbe46203"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:a9eb64d8b146f0408e9f8a8f3dbe46203"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a9eb64d8b146f0408e9f8a8f3dbe46203">CopyColToVec</a> (<a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> col, <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; Real &gt; *v) const </td></tr>
<tr class="memdesc:a9eb64d8b146f0408e9f8a8f3dbe46203"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies column #col of the matrix into vector v.  <a href="#a9eb64d8b146f0408e9f8a8f3dbe46203">More...</a><br/></td></tr>
<tr class="separator:a9eb64d8b146f0408e9f8a8f3dbe46203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1936db6d64bd360b2235f588b4ea7ad4"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:a1936db6d64bd360b2235f588b4ea7ad4"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a1936db6d64bd360b2235f588b4ea7ad4">CopyToMat</a> (<a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> row_offset, <a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> column_offset, <a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; Real &gt; *dest) const </td></tr>
<tr class="memdesc:a1936db6d64bd360b2235f588b4ea7ad4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies submatrix of compressed matrix into matrix dest.  <a href="#a1936db6d64bd360b2235f588b4ea7ad4">More...</a><br/></td></tr>
<tr class="separator:a1936db6d64bd360b2235f588b4ea7ad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5f25bb18d46fb28a943834cf224d3d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#ab5f25bb18d46fb28a943834cf224d3d3">Swap</a> (<a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> *other)</td></tr>
<tr class="separator:ab5f25bb18d46fb28a943834cf224d3d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa71d36872f416feaa853788a7a7a7ef8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a> ()</td></tr>
<tr class="separator:aa71d36872f416feaa853788a7a7a7ef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:aa62207e93ac956b9e0ab66eaa78fa6ce"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#aa62207e93ac956b9e0ab66eaa78fa6ce">AllocateData</a> (<a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_bytes)</td></tr>
<tr class="separator:aa62207e93ac956b9e0ab66eaa78fa6ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeee7ef8494e770dc642d596b2891168f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#aeee7ef8494e770dc642d596b2891168f">DataSize</a> (const <a class="el" href="structkaldi_1_1CompressedMatrix_1_1GlobalHeader.html">GlobalHeader</a> &amp;header)</td></tr>
<tr class="separator:aeee7ef8494e770dc642d596b2891168f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac054ddc0afc489c9f9b0793c5baf6dd1"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:ac054ddc0afc489c9f9b0793c5baf6dd1"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#ac054ddc0afc489c9f9b0793c5baf6dd1">CompressColumn</a> (const <a class="el" href="structkaldi_1_1CompressedMatrix_1_1GlobalHeader.html">GlobalHeader</a> &amp;global_header, const Real *data, <a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> stride, <a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_rows, <a class="el" href="structkaldi_1_1CompressedMatrix_1_1PerColHeader.html">PerColHeader</a> *header, unsigned char *byte_data)</td></tr>
<tr class="separator:ac054ddc0afc489c9f9b0793c5baf6dd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af666e887d4b0d544b8a253a7a7a1c30e"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:af666e887d4b0d544b8a253a7a7a1c30e"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#af666e887d4b0d544b8a253a7a7a1c30e">ComputeColHeader</a> (const <a class="el" href="structkaldi_1_1CompressedMatrix_1_1GlobalHeader.html">GlobalHeader</a> &amp;global_header, const Real *data, <a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> stride, <a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_rows, <a class="el" href="structkaldi_1_1CompressedMatrix_1_1PerColHeader.html">PerColHeader</a> *header)</td></tr>
<tr class="separator:af666e887d4b0d544b8a253a7a7a1c30e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af69d9a6b462e265e28a3308e4c0e16d1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">FloatToUint16</a> (const <a class="el" href="structkaldi_1_1CompressedMatrix_1_1GlobalHeader.html">GlobalHeader</a> &amp;global_header, float value)</td></tr>
<tr class="separator:af69d9a6b462e265e28a3308e4c0e16d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aa391921754860e49177fff35542425"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a> (const <a class="el" href="structkaldi_1_1CompressedMatrix_1_1GlobalHeader.html">GlobalHeader</a> &amp;global_header, <a class="el" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a> value)</td></tr>
<tr class="separator:a7aa391921754860e49177fff35542425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38557b65b4628f5f7dfc9fe66a510581"><td class="memItemLeft" align="right" valign="top">static unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a38557b65b4628f5f7dfc9fe66a510581">FloatToChar</a> (float p0, float p25, float p75, float p100, float value)</td></tr>
<tr class="separator:a38557b65b4628f5f7dfc9fe66a510581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687ce304c576caaad7b0d377ab217a25"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a687ce304c576caaad7b0d377ab217a25">CharToFloat</a> (float p0, float p25, float p75, float p100, unsigned char value)</td></tr>
<tr class="separator:a687ce304c576caaad7b0d377ab217a25"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7b24176d394890c1567b43bf7d82f2d4"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a></td></tr>
<tr class="separator:a7b24176d394890c1567b43bf7d82f2d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a57695e2f6b66eb1cc31f0b11d28647c1"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#a57695e2f6b66eb1cc31f0b11d28647c1">Matrix&lt; float &gt;</a></td></tr>
<tr class="separator:a57695e2f6b66eb1cc31f0b11d28647c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae92f8fdeba38accca58a3a6feff54d02"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html#ae92f8fdeba38accca58a3a6feff54d02">Matrix&lt; double &gt;</a></td></tr>
<tr class="separator:ae92f8fdeba38accca58a3a6feff54d02"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class does lossy compression of a matrix. </p>
<p>It only supports copying to-from a KaldiMatrix. For large matrices, each element is compressed into about one byte, but there is a little overhead on top of that (globally, and also per column). The basic idea is for each column (in the normal configuration) we work out the values at the 0th, 25th, 50th and 100th percentiles and store them as 16-bit integers; we then encode each value in the column as a single byte, in 3 separate ranges with different linear encodings (0-25th, 25-50th, 50th-100th). If the matrix has 8 rows or fewer, we simply store all values as uint16. </p>

<p>Definition at line <a class="el" href="compressed-matrix_8h_source.html#l00045">45</a> of file <a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af0cf968a3c10c73d1f5fde4e80284a22"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8h_source.html#l00047">47</a> of file <a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;: <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>(NULL) { }</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab34f7642ecd1c29784f1d50b25f79365"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8h_source.html#l00049">49</a> of file <a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00677">CompressedMatrix::Clear()</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{ <a class="code" href="classkaldi_1_1CompressedMatrix.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>(); }</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_aa71d36872f416feaa853788a7a7a7ef8"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#aa71d36872f416feaa853788a7a7a7ef8">kaldi::CompressedMatrix::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00677">compressed-matrix.cc:677</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a11b25084ad2d33dbdb45d108402e5365"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>mat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8h_source.html#l00052">52</a> of file <a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00042">CompressedMatrix::CopyFromMat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;: <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>(NULL) { <a class="code" href="classkaldi_1_1CompressedMatrix.html#ae1fc93f471e0df869aff311f23fa71d0">CopyFromMat</a>(mat); }</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ae1fc93f471e0df869aff311f23fa71d0"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ae1fc93f471e0df869aff311f23fa71d0">kaldi::CompressedMatrix::CopyFromMat</a></div><div class="ttdeci">void CopyFromMat(const MatrixBase&lt; Real &gt; &amp;mat)</div><div class="ttdoc">This will resize *this and copy the contents of mat to *this. </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00042">compressed-matrix.cc:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a41e077759e9e33f6736a5d9521d7b9f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>mat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>row_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>num_rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>col_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>num_cols</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializer that can be used to select part of an existing <a class="el" href="classkaldi_1_1CompressedMatrix.html" title="This class does lossy compression of a matrix. ">CompressedMatrix</a> without un-compressing and re-compressing (note: unlike similar initializers for class <a class="el" href="classkaldi_1_1Matrix.html" title="A class for storing matrices. ">Matrix</a>, it doesn't point to the same memory location). </p>

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00133">133</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00398">CompressedMatrix::AllocateData()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00486">CompressedMatrix::CopyToMat()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00064">CompressedMatrix::Data()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00028">CompressedMatrix::DataSize()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00129">CompressedMatrix::GlobalHeader::format</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-utils_8h_source.html#l00136">KALDI_COMPILE_TIME_ASSERT</a>, <a class="el" href="matrix-common_8h_source.html#l00037">kaldi::kUndefined</a>, <a class="el" href="compressed-matrix_8h_source.html#l00133">CompressedMatrix::GlobalHeader::num_cols</a>, <a class="el" href="compressed-matrix_8h_source.html#l00132">CompressedMatrix::GlobalHeader::num_rows</a>, <a class="el" href="compressed-matrix_8h_source.html#l00092">CompressedMatrix::NumCols()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00088">CompressedMatrix::NumRows()</a>, and <a class="el" href="compressed-matrix_8h_source.html#l00113">CompressedMatrix::Swap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                : <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>(NULL) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> old_num_rows = cmat.NumRows(), old_num_cols = cmat.NumCols();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(row_offset &lt; old_num_rows);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(col_offset &lt; old_num_cols);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(row_offset &gt;= 0);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(col_offset &gt;= 0);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(row_offset + num_rows &lt;= old_num_rows);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(col_offset + num_cols &lt;= old_num_cols);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">if</span> (old_num_rows == 0) { <span class="keywordflow">return</span>; }  <span class="comment">// Zero-size matrix stored as zero pointer.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> (num_rows == 0 || num_cols == 0) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  GlobalHeader new_global_header;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="kaldi-utils_8h.html#ac9092fffa42237131fee6df4fa5c09a0">KALDI_COMPILE_TIME_ASSERT</a>(<span class="keyword">sizeof</span>(new_global_header) == 20);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  GlobalHeader *old_global_header = <span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(cmat.Data());</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  new_global_header = *old_global_header;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  new_global_header.num_cols = num_cols;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  new_global_header.num_rows = num_rows;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">// We don&#39;t switch format from 1 -&gt; 2 (in case of size reduction) yet; if this</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// is needed, we will do this below by creating a temporary Matrix.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  new_global_header.format = old_global_header-&gt;format;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> = <a class="code" href="classkaldi_1_1CompressedMatrix.html#aa62207e93ac956b9e0ab66eaa78fa6ce">AllocateData</a>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#aeee7ef8494e770dc642d596b2891168f">DataSize</a>(new_global_header));  <span class="comment">// allocate memory</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  *(<span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>)) = new_global_header;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">if</span> (old_global_header-&gt;format == 1) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// Both have the format where we have a PerColHeader and then compress as</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// chars...</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    PerColHeader *old_per_col_header =</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span>PerColHeader*<span class="keyword">&gt;</span>(old_global_header + 1);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *old_byte_data =</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(old_per_col_header +</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                         old_global_header-&gt;num_cols);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    PerColHeader *new_per_col_header =</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span>PerColHeader*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>) + 1);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    memcpy(new_per_col_header, old_per_col_header + col_offset,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;           <span class="keyword">sizeof</span>(PerColHeader) * num_cols);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *new_byte_data =</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(new_per_col_header + num_cols);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *old_start_of_subcol =</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        old_byte_data + row_offset + (col_offset * old_num_rows),</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        *new_start_of_col = new_byte_data;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_cols; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      memcpy(new_start_of_col, old_start_of_subcol, num_rows);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      new_start_of_col += num_rows;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      old_start_of_subcol += old_num_rows;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// both have the new format (2).</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(old_global_header-&gt;format == 2);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a> *old_data =</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>*<span class="keyword">&gt;</span>(old_global_header + 1);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a> *new_data =</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>*<span class="keyword">&gt;</span>(<span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>) + 1);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    old_data += col_offset + (old_num_cols * row_offset);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> row = 0; row &lt; num_rows; row++) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      memcpy(new_data, old_data, <span class="keyword">sizeof</span>(<a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>) * num_cols);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      new_data += num_cols;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      old_data += old_num_cols;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">if</span> (num_rows &lt; 8 &amp;&amp; new_global_header.format == 1) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// format was 1 but we want it to be 2 -&gt; create a temporary</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// Matrix (uncompress), re-compress, and swap.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="classkaldi_1_1CompressedMatrix.html#a57695e2f6b66eb1cc31f0b11d28647c1">Matrix&lt;float&gt;</a> temp(this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">NumRows</a>(), this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>(),</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                       <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ad80519cf50d1474c43dada4499a522fe">CopyToMat</a>(&amp;temp);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="classkaldi_1_1CompressedMatrix.html#af0cf968a3c10c73d1f5fde4e80284a22">CompressedMatrix</a> temp_cmat(temp);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ab5f25bb18d46fb28a943834cf224d3d3">Swap</a>(&amp;temp_cmat);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ab5f25bb18d46fb28a943834cf224d3d3"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ab5f25bb18d46fb28a943834cf224d3d3">kaldi::CompressedMatrix::Swap</a></div><div class="ttdeci">void Swap(CompressedMatrix *other)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00113">compressed-matrix.h:113</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_afe58124fbfb387ddc20513bf3075b16e"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">kaldi::CompressedMatrix::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const </div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00092">compressed-matrix.h:92</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">kaldi::CompressedMatrix::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00088">compressed-matrix.h:88</a></div></div>
<div class="ttc" id="namespacekaldi_html_ac2a9e79eb120216f855626495b7bd18a"><div class="ttname"><a href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">kaldi::uint16</a></div><div class="ttdeci">uint16_t uint16</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00043">kaldi-types.h:43</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a57695e2f6b66eb1cc31f0b11d28647c1"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a57695e2f6b66eb1cc31f0b11d28647c1">kaldi::CompressedMatrix::Matrix&lt; float &gt;</a></div><div class="ttdeci">friend class Matrix&lt; float &gt;</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00117">compressed-matrix.h:117</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ad80519cf50d1474c43dada4499a522fe"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ad80519cf50d1474c43dada4499a522fe">kaldi::CompressedMatrix::CopyToMat</a></div><div class="ttdeci">void CopyToMat(MatrixBase&lt; Real &gt; *mat, MatrixTransposeType trans=kNoTrans) const </div><div class="ttdoc">Copies contents to matrix. </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00486">compressed-matrix.cc:486</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_aa62207e93ac956b9e0ab66eaa78fa6ce"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#aa62207e93ac956b9e0ab66eaa78fa6ce">kaldi::CompressedMatrix::AllocateData</a></div><div class="ttdeci">static void * AllocateData(int32 num_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00398">compressed-matrix.cc:398</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_af0cf968a3c10c73d1f5fde4e80284a22"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#af0cf968a3c10c73d1f5fde4e80284a22">kaldi::CompressedMatrix::CompressedMatrix</a></div><div class="ttdeci">CompressedMatrix()</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00047">compressed-matrix.h:47</a></div></div>
<div class="ttc" id="kaldi-utils_8h_html_ac9092fffa42237131fee6df4fa5c09a0"><div class="ttname"><a href="kaldi-utils_8h.html#ac9092fffa42237131fee6df4fa5c09a0">KALDI_COMPILE_TIME_ASSERT</a></div><div class="ttdeci">#define KALDI_COMPILE_TIME_ASSERT(b)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-utils_8h_source.html#l00136">kaldi-utils.h:136</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_aeee7ef8494e770dc642d596b2891168f"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#aeee7ef8494e770dc642d596b2891168f">kaldi::CompressedMatrix::DataSize</a></div><div class="ttdeci">static MatrixIndexT DataSize(const GlobalHeader &amp;header)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00028">compressed-matrix.cc:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac059aa1639196ac9af7a35d0c0745d94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>mat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00684">684</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                                                             : <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>(NULL) {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  *<span class="keyword">this</span> = mat; <span class="comment">// use assignment operator.</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa62207e93ac956b9e0ab66eaa78fa6ce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * AllocateData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a>&#160;</td>
          <td class="paramname"><em>num_bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00398">398</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, and <a class="el" href="kaldi-utils_8h_source.html#l00136">KALDI_COMPILE_TIME_ASSERT</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00133">CompressedMatrix::CompressedMatrix()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00042">CompressedMatrix::CopyFromMat()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00688">CompressedMatrix::operator=()</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00438">CompressedMatrix::Read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                                    {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(num_bytes &gt; 0);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <a class="code" href="kaldi-utils_8h.html#ac9092fffa42237131fee6df4fa5c09a0">KALDI_COMPILE_TIME_ASSERT</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) == 4);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// round size up to nearest number of floats.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<span class="keyword">new</span> <span class="keywordtype">float</span>[(num_bytes/3) + 4]);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="kaldi-utils_8h_html_ac9092fffa42237131fee6df4fa5c09a0"><div class="ttname"><a href="kaldi-utils_8h.html#ac9092fffa42237131fee6df4fa5c09a0">KALDI_COMPILE_TIME_ASSERT</a></div><div class="ttdeci">#define KALDI_COMPILE_TIME_ASSERT(b)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-utils_8h_source.html#l00136">kaldi-utils.h:136</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a687ce304c576caaad7b0d377ab217a25"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float CharToFloat </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>p0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>p25</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>p75</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>p100</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00364">364</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00572">CompressedMatrix::CopyColToVec()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00540">CompressedMatrix::CopyRowToVec()</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00486">CompressedMatrix::CopyToMat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                         {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">if</span> (value &lt;= 64) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">return</span> p0 + (p25 - p0) * value * (1/64.0);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value &lt;= 192) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">return</span> p25 + (p75 - p25) * (value - 64) * (1/128.0);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">return</span> p75 + (p100 - p75) * (value - 192) * (1/63.0);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa71d36872f416feaa853788a7a7a7ef8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00677">677</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>.</p>

<p>Referenced by <a class="el" href="sparse-matrix_8cc_source.html#l00646">GeneralMatrix::Clear()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00688">CompressedMatrix::operator=()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00715">GeneralMatrix::Uncompress()</a>, and <a class="el" href="compressed-matrix_8h_source.html#l00049">CompressedMatrix::~CompressedMatrix()</a>.</p>
<div class="fragment"><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                             {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> != NULL) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keyword">delete</span> [] <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> = NULL;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac054ddc0afc489c9f9b0793c5baf6dd1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CompressColumn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1CompressedMatrix_1_1GlobalHeader.html">GlobalHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>global_header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>stride</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a>&#160;</td>
          <td class="paramname"><em>num_rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structkaldi_1_1CompressedMatrix_1_1PerColHeader.html">CompressedMatrix::PerColHeader</a> *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>byte_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00378">378</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00254">CompressedMatrix::ComputeColHeader()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00331">CompressedMatrix::FloatToChar()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="compressed-matrix_8h_source.html#l00139">CompressedMatrix::PerColHeader::percentile_0</a>, <a class="el" href="compressed-matrix_8h_source.html#l00142">CompressedMatrix::PerColHeader::percentile_100</a>, <a class="el" href="compressed-matrix_8h_source.html#l00140">CompressedMatrix::PerColHeader::percentile_25</a>, <a class="el" href="compressed-matrix_8h_source.html#l00141">CompressedMatrix::PerColHeader::percentile_75</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00245">CompressedMatrix::Uint16ToFloat()</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00042">CompressedMatrix::CopyFromMat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                              {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <a class="code" href="classkaldi_1_1CompressedMatrix.html#af666e887d4b0d544b8a253a7a7a1c30e">ComputeColHeader</a>(global_header, data, stride,</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                   num_rows, header);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordtype">float</span> p0 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(global_header, header-&gt;percentile_0),</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      p25 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(global_header, header-&gt;percentile_25),</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      p75 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(global_header, header-&gt;percentile_75),</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      p100 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(global_header, header-&gt;percentile_100);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_rows; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    Real this_data = data[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> * stride];</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    byte_data[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a38557b65b4628f5f7dfc9fe66a510581">FloatToChar</a>(p0, p25, p75, p100, this_data);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7aa391921754860e49177fff35542425"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">kaldi::CompressedMatrix::Uint16ToFloat</a></div><div class="ttdeci">static float Uint16ToFloat(const GlobalHeader &amp;global_header, uint16 value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00245">compressed-matrix.cc:245</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a38557b65b4628f5f7dfc9fe66a510581"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a38557b65b4628f5f7dfc9fe66a510581">kaldi::CompressedMatrix::FloatToChar</a></div><div class="ttdeci">static unsigned char FloatToChar(float p0, float p25, float p75, float p100, float value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00331">compressed-matrix.cc:331</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_af666e887d4b0d544b8a253a7a7a1c30e"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#af666e887d4b0d544b8a253a7a7a1c30e">kaldi::CompressedMatrix::ComputeColHeader</a></div><div class="ttdeci">static void ComputeColHeader(const GlobalHeader &amp;global_header, const Real *data, MatrixIndexT stride, int32 num_rows, PerColHeader *header)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00254">compressed-matrix.cc:254</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af666e887d4b0d544b8a253a7a7a1c30e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ComputeColHeader </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1CompressedMatrix_1_1GlobalHeader.html">GlobalHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>global_header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>stride</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a>&#160;</td>
          <td class="paramname"><em>num_rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structkaldi_1_1CompressedMatrix_1_1PerColHeader.html">CompressedMatrix::PerColHeader</a> *&#160;</td>
          <td class="paramname"><em>header</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00254">254</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00234">CompressedMatrix::FloatToUint16()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="compressed-matrix_8h_source.html#l00139">CompressedMatrix::PerColHeader::percentile_0</a>, <a class="el" href="compressed-matrix_8h_source.html#l00142">CompressedMatrix::PerColHeader::percentile_100</a>, <a class="el" href="compressed-matrix_8h_source.html#l00140">CompressedMatrix::PerColHeader::percentile_25</a>, and <a class="el" href="compressed-matrix_8h_source.html#l00141">CompressedMatrix::PerColHeader::percentile_75</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00378">CompressedMatrix::CompressColumn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                                          {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(num_rows &gt; 0);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  std::vector&lt;Real&gt; sdata(num_rows); <span class="comment">// the sorted data.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, size = sdata.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; size; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    sdata[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = data[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>*stride];</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">if</span> (num_rows &gt;= 5) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordtype">int</span> quarter_nr = num_rows/4;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// std::sort(sdata.begin(), sdata.end());</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// The elements at positions 0, quarter_nr,</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// 3*quarter_nr, and num_rows-1 need to be in sorted order.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    std::nth_element(sdata.begin(), sdata.begin() + quarter_nr, sdata.end());</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// Now, sdata.begin() + quarter_nr contains the element that would appear</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// in sorted order, in that position.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    std::nth_element(sdata.begin(), sdata.begin(), sdata.begin() + quarter_nr);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// Now, sdata.begin() and sdata.begin() + quarter_nr contain the elements</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// that would appear at those positions in sorted order.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    std::nth_element(sdata.begin() + quarter_nr + 1,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                     sdata.begin() + (3*quarter_nr), sdata.end());</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// Now, sdata.begin(), sdata.begin() + quarter_nr, and sdata.begin() +</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// 3*quarter_nr, contain the elements that would appear at those positions</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// in sorted order.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    std::nth_element(sdata.begin() + (3*quarter_nr) + 1, sdata.end() - 1,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                     sdata.end());</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// Now, sdata.begin(), sdata.begin() + quarter_nr, and sdata.begin() +</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// 3*quarter_nr, and sdata.end() - 1, contain the elements that would appear</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// at those positions in sorted order.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    header-&gt;percentile_0 =</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        std::min&lt;uint16&gt;(<a class="code" href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">FloatToUint16</a>(global_header, sdata[0]), 65532);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    header-&gt;percentile_25 =</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        std::min&lt;uint16&gt;(</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            std::max&lt;uint16&gt;(</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <a class="code" href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">FloatToUint16</a>(global_header, sdata[quarter_nr]),</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                header-&gt;percentile_0 + <span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a><span class="keyword">&gt;</span>(1)), 65533);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    header-&gt;percentile_75 =</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        std::min&lt;uint16&gt;(</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            std::max&lt;uint16&gt;(</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <a class="code" href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">FloatToUint16</a>(global_header, sdata[3*quarter_nr]),</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                header-&gt;percentile_25 + <span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a><span class="keyword">&gt;</span>(1)), 65534);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    header-&gt;percentile_100 = std::max&lt;uint16&gt;(</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <a class="code" href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">FloatToUint16</a>(global_header, sdata[num_rows-1]),</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        header-&gt;percentile_75 + <span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a><span class="keyword">&gt;</span>(1));</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  } <span class="keywordflow">else</span> {  <span class="comment">// handle this pathological case.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    std::sort(sdata.begin(), sdata.end());</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">// Note: we know num_rows is at least 1.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    header-&gt;percentile_0 =</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        std::min&lt;uint16&gt;(<a class="code" href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">FloatToUint16</a>(global_header, sdata[0]),</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                         65532);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span> (num_rows &gt; 1)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      header-&gt;percentile_25 =</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;          std::min&lt;uint16&gt;(</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;              std::max&lt;uint16&gt;(<a class="code" href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">FloatToUint16</a>(global_header, sdata[1]),</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                               header-&gt;percentile_0 + 1), 65533);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      header-&gt;percentile_25 = header-&gt;percentile_0 + 1;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> (num_rows &gt; 2)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      header-&gt;percentile_75 =</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;          std::min&lt;uint16&gt;(</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;              std::max&lt;uint16&gt;(<a class="code" href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">FloatToUint16</a>(global_header, sdata[2]),</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                               header-&gt;percentile_25 + 1), 65534);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      header-&gt;percentile_75 = header-&gt;percentile_25 + 1;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (num_rows &gt; 3)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      header-&gt;percentile_100 =</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          std::max&lt;uint16&gt;(<a class="code" href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">FloatToUint16</a>(global_header, sdata[3]),</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                           header-&gt;percentile_75 + 1);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      header-&gt;percentile_100 = header-&gt;percentile_75 + 1;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ac2a9e79eb120216f855626495b7bd18a"><div class="ttname"><a href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">kaldi::uint16</a></div><div class="ttdeci">uint16_t uint16</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00043">kaldi-types.h:43</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_af69d9a6b462e265e28a3308e4c0e16d1"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">kaldi::CompressedMatrix::FloatToUint16</a></div><div class="ttdeci">static uint16 FloatToUint16(const GlobalHeader &amp;global_header, float value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00234">compressed-matrix.cc:234</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9eb64d8b146f0408e9f8a8f3dbe46203"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template void CopyColToVec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; Real &gt; *&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies column #col of the matrix into vector v. </p>
<p>Note: v must have same size as #rows. </p>

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00572">572</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00364">CompressedMatrix::CharToFloat()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00065">VectorBase&lt; Real &gt;::Data()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>, <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="compressed-matrix_8h_source.html#l00092">CompressedMatrix::NumCols()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00088">CompressedMatrix::NumRows()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00139">CompressedMatrix::PerColHeader::percentile_0</a>, <a class="el" href="compressed-matrix_8h_source.html#l00142">CompressedMatrix::PerColHeader::percentile_100</a>, <a class="el" href="compressed-matrix_8h_source.html#l00140">CompressedMatrix::PerColHeader::percentile_25</a>, <a class="el" href="compressed-matrix_8h_source.html#l00141">CompressedMatrix::PerColHeader::percentile_75</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00245">CompressedMatrix::Uint16ToFloat()</a>.</p>

<p>Referenced by <a class="el" href="matrix-lib-test_8cc_source.html#l04123">kaldi::UnitTestCompressedMatrix()</a>.</p>
<div class="fragment"><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                                                               {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(col &lt; this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>());</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(col &gt;= 0);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(v-&gt;Dim() == this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">NumRows</a>());</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  GlobalHeader *h = <span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">if</span> (h-&gt;format == 1) {  <span class="comment">// format with per-col header.</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    PerColHeader *per_col_header = <span class="keyword">reinterpret_cast&lt;</span>PerColHeader*<span class="keyword">&gt;</span>(h+1);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *byte_data = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(per_col_header +</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                                                                h-&gt;num_cols);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    byte_data += col*h-&gt;num_rows;  <span class="comment">// point to first value in the column we want</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    per_col_header += col;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordtype">float</span> p0 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_0),</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        p25 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_25),</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        p75 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_75),</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        p100 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_100);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; h-&gt;num_rows; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++, byte_data++) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <span class="keywordtype">float</span> f = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a687ce304c576caaad7b0d377ab217a25">CharToFloat</a>(p0, p25, p75, p100, *byte_data);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      (*v)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = f;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(h-&gt;format == 2);  <span class="comment">// uint16 format</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_rows = h-&gt;num_rows, num_cols = h-&gt;num_cols;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a> *col_data = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>*<span class="keyword">&gt;</span>(h + 1) + col;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    Real *v_data = v-&gt;Data();</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> r = 0; r &lt; num_rows; r++)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      v_data[r] = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, col_data[r * num_cols]);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_afe58124fbfb387ddc20513bf3075b16e"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">kaldi::CompressedMatrix::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const </div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00092">compressed-matrix.h:92</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">kaldi::CompressedMatrix::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00088">compressed-matrix.h:88</a></div></div>
<div class="ttc" id="namespacekaldi_html_ac2a9e79eb120216f855626495b7bd18a"><div class="ttname"><a href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">kaldi::uint16</a></div><div class="ttdeci">uint16_t uint16</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00043">kaldi-types.h:43</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a687ce304c576caaad7b0d377ab217a25"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a687ce304c576caaad7b0d377ab217a25">kaldi::CompressedMatrix::CharToFloat</a></div><div class="ttdeci">static float CharToFloat(float p0, float p25, float p75, float p100, unsigned char value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00364">compressed-matrix.cc:364</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7aa391921754860e49177fff35542425"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">kaldi::CompressedMatrix::Uint16ToFloat</a></div><div class="ttdeci">static float Uint16ToFloat(const GlobalHeader &amp;global_header, uint16 value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00245">compressed-matrix.cc:245</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae1fc93f471e0df869aff311f23fa71d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template void CopyFromMat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>mat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This will resize *this and copy the contents of mat to *this. </p>

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00042">42</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00398">CompressedMatrix::AllocateData()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00378">CompressedMatrix::CompressColumn()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00073">MatrixBase&lt; Real &gt;::Data()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00028">CompressedMatrix::DataSize()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00234">CompressedMatrix::FloatToUint16()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00129">CompressedMatrix::GlobalHeader::format</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-utils_8h_source.html#l00136">KALDI_COMPILE_TIME_ASSERT</a>, <a class="el" href="kaldi-math_8h_source.html#l00074">KALDI_ISFINITE</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01555">MatrixBase&lt; Real &gt;::Max()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01566">MatrixBase&lt; Real &gt;::Min()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00130">CompressedMatrix::GlobalHeader::min_value</a>, <a class="el" href="compressed-matrix_8h_source.html#l00133">CompressedMatrix::GlobalHeader::num_cols</a>, <a class="el" href="compressed-matrix_8h_source.html#l00132">CompressedMatrix::GlobalHeader::num_rows</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00131">CompressedMatrix::GlobalHeader::range</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00081">MatrixBase&lt; Real &gt;::RowData()</a>, and <a class="el" href="kaldi-matrix_8h_source.html#l00064">MatrixBase&lt; Real &gt;::Stride()</a>.</p>

<p>Referenced by <a class="el" href="sparse-matrix_8cc_source.html#l00708">GeneralMatrix::Compress()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00052">CompressedMatrix::CompressedMatrix()</a>, <a class="el" href="compressed-transform-stats_8cc_source.html#l00028">CompressedAffineXformStats::CopyFromAffineXformStats()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00222">CompressedMatrix::operator=()</a>, <a class="el" href="nnet-perturb-egs_8cc_source.html#l00028">kaldi::nnet2::PerturbTrainingExample()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00438">CompressedMatrix::Read()</a>, and <a class="el" href="nnet-perturb-egs-fmllr_8cc_source.html#l00029">kaldi::nnet2::TransformTrainingExample()</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                                 {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> != NULL) {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keyword">delete</span> [] <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>);  <span class="comment">// call delete [] because was allocated with new float[]</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> = NULL;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  }</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">if</span> (mat.NumRows() == 0) { <span class="keywordflow">return</span>; }  <span class="comment">// Zero-size matrix stored as zero pointer.</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  GlobalHeader global_header;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="kaldi-utils_8h.html#ac9092fffa42237131fee6df4fa5c09a0">KALDI_COMPILE_TIME_ASSERT</a>(<span class="keyword">sizeof</span>(global_header) == 20);  <span class="comment">// otherwise</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="comment">// something weird is happening and our code probably won&#39;t work or</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// won&#39;t be robust across platforms.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// Below, the point of the &quot;safety_margin&quot; is that the minimum</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// and maximum values in the matrix shouldn&#39;t coincide with</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// the minimum and maximum ranges of the 16-bit range, because</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">// this could cause certain problems in ComputeColHeader, where</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// we need to ensure that the percentile_0 through percentile_100</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// are in strictly increasing order.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordtype">float</span> min_value = mat.Min(), max_value = mat.Max();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">if</span> (max_value == min_value)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    max_value = min_value + (1.0 + fabs(min_value)); <span class="comment">// ensure it&#39;s strictly</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                                     <span class="comment">// greater than min_value,</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                                     <span class="comment">// even if matrix is</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                                     <span class="comment">// constant.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  global_header.min_value = min_value;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  global_header.range = max_value - min_value;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// We can&#39;t compress the matrix if there are inf&#39;s or nan&#39;s.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// The caller should check for this first.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="kaldi-math_8h.html#adc517837dda73913a0e667b3ae8b776d">KALDI_ISFINITE</a>(global_header.min_value) &amp;&amp;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;               <a class="code" href="kaldi-math_8h.html#adc517837dda73913a0e667b3ae8b776d">KALDI_ISFINITE</a>(global_header.range));</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// Avoid division by zero if the matrix is just a constant:</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// make sure max_value &gt; min_value.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">if</span> (global_header.range &lt;= 0.0)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    global_header.range = 1.0e-05;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  global_header.num_rows = mat.NumRows();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  global_header.num_cols = mat.NumCols();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">if</span> (mat.NumRows() &gt; 8) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    global_header.format = 1;  <span class="comment">// format where each row has a PerColHeader.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    global_header.format = 2;  <span class="comment">// format where all data is uint16.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> data_size = <a class="code" href="classkaldi_1_1CompressedMatrix.html#aeee7ef8494e770dc642d596b2891168f">DataSize</a>(global_header);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> = <a class="code" href="classkaldi_1_1CompressedMatrix.html#aa62207e93ac956b9e0ab66eaa78fa6ce">AllocateData</a>(data_size);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  *(<span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>)) = global_header;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span> (global_header.format == 1) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    PerColHeader *header_data =</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span>PerColHeader*<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>) +</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                        <span class="keyword">sizeof</span>(GlobalHeader));</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *byte_data =</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(header_data + global_header.num_cols);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keyword">const</span> Real *matrix_data = mat.Data();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> col = 0; col &lt; global_header.num_cols; col++) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <a class="code" href="classkaldi_1_1CompressedMatrix.html#ac054ddc0afc489c9f9b0793c5baf6dd1">CompressColumn</a>(global_header,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                     matrix_data + col, mat.Stride(),</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                     global_header.num_rows,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                     header_data, byte_data);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      header_data++;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      byte_data += global_header.num_rows;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a> *data = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>*<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>) +</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                             <span class="keyword">sizeof</span>(GlobalHeader));</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_rows = mat.NumRows(), num_cols = mat.NumCols();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> r = 0; r &lt; num_rows; r++) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keyword">const</span> Real *row_data = mat.RowData(r);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> c = 0; c &lt; num_cols; c++)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        data[c] = <a class="code" href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">FloatToUint16</a>(global_header, row_data[c]);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      data += num_cols;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ac054ddc0afc489c9f9b0793c5baf6dd1"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ac054ddc0afc489c9f9b0793c5baf6dd1">kaldi::CompressedMatrix::CompressColumn</a></div><div class="ttdeci">static void CompressColumn(const GlobalHeader &amp;global_header, const Real *data, MatrixIndexT stride, int32 num_rows, PerColHeader *header, unsigned char *byte_data)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00378">compressed-matrix.cc:378</a></div></div>
<div class="ttc" id="kaldi-math_8h_html_adc517837dda73913a0e667b3ae8b776d"><div class="ttname"><a href="kaldi-math_8h.html#adc517837dda73913a0e667b3ae8b776d">KALDI_ISFINITE</a></div><div class="ttdeci">#define KALDI_ISFINITE(x)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00074">kaldi-math.h:74</a></div></div>
<div class="ttc" id="namespacekaldi_html_ac2a9e79eb120216f855626495b7bd18a"><div class="ttname"><a href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">kaldi::uint16</a></div><div class="ttdeci">uint16_t uint16</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00043">kaldi-types.h:43</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_af69d9a6b462e265e28a3308e4c0e16d1"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#af69d9a6b462e265e28a3308e4c0e16d1">kaldi::CompressedMatrix::FloatToUint16</a></div><div class="ttdeci">static uint16 FloatToUint16(const GlobalHeader &amp;global_header, float value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00234">compressed-matrix.cc:234</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_aa62207e93ac956b9e0ab66eaa78fa6ce"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#aa62207e93ac956b9e0ab66eaa78fa6ce">kaldi::CompressedMatrix::AllocateData</a></div><div class="ttdeci">static void * AllocateData(int32 num_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00398">compressed-matrix.cc:398</a></div></div>
<div class="ttc" id="kaldi-utils_8h_html_ac9092fffa42237131fee6df4fa5c09a0"><div class="ttname"><a href="kaldi-utils_8h.html#ac9092fffa42237131fee6df4fa5c09a0">KALDI_COMPILE_TIME_ASSERT</a></div><div class="ttdeci">#define KALDI_COMPILE_TIME_ASSERT(b)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-utils_8h_source.html#l00136">kaldi-utils.h:136</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_aeee7ef8494e770dc642d596b2891168f"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#aeee7ef8494e770dc642d596b2891168f">kaldi::CompressedMatrix::DataSize</a></div><div class="ttdeci">static MatrixIndexT DataSize(const GlobalHeader &amp;header)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00028">compressed-matrix.cc:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a15cfa9f2ba2594610f20229db910b548"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template void CopyRowToVec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; Real &gt; *&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies row #row of the matrix into vector v. </p>
<p>Note: v must have same size as #cols. </p>

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00540">540</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00364">CompressedMatrix::CharToFloat()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00065">VectorBase&lt; Real &gt;::Data()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>, <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="compressed-matrix_8h_source.html#l00092">CompressedMatrix::NumCols()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00088">CompressedMatrix::NumRows()</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00245">CompressedMatrix::Uint16ToFloat()</a>.</p>

<p>Referenced by <a class="el" href="sparse-matrix_8cc_source.html#l00868">kaldi::FilterCompressedMatrixRows()</a>, and <a class="el" href="matrix-lib-test_8cc_source.html#l04123">kaldi::UnitTestCompressedMatrix()</a>.</p>
<div class="fragment"><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                                                               {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(row &lt; this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">NumRows</a>());</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(row &gt;= 0);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(v-&gt;Dim() == this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>());</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  GlobalHeader *h = <span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">if</span> (h-&gt;format == 1) {  <span class="comment">// format with per-col header.</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    PerColHeader *per_col_header = <span class="keyword">reinterpret_cast&lt;</span>PerColHeader*<span class="keyword">&gt;</span>(h+1);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *byte_data = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(per_col_header +</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                                                                h-&gt;num_cols);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    byte_data += row;  <span class="comment">// point to first value we are interested in</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; h-&gt;num_cols;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;         <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++, per_col_header++, byte_data += h-&gt;num_rows) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordtype">float</span> p0 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_0),</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;          p25 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_25),</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;          p75 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_75),</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;          p100 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_100);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordtype">float</span> f = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a687ce304c576caaad7b0d377ab217a25">CharToFloat</a>(p0, p25, p75, p100, *byte_data);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      (*v)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = f;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(h-&gt;format == 2);  <span class="comment">// uint16 format</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_cols = h-&gt;num_cols;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a> *row_data = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>*<span class="keyword">&gt;</span>(h + 1) + (num_cols * row);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    Real *v_data = v-&gt;Data();</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> c = 0; c &lt; num_cols; c++)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      v_data[c] = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, row_data[c]);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_afe58124fbfb387ddc20513bf3075b16e"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">kaldi::CompressedMatrix::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const </div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00092">compressed-matrix.h:92</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">kaldi::CompressedMatrix::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00088">compressed-matrix.h:88</a></div></div>
<div class="ttc" id="namespacekaldi_html_ac2a9e79eb120216f855626495b7bd18a"><div class="ttname"><a href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">kaldi::uint16</a></div><div class="ttdeci">uint16_t uint16</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00043">kaldi-types.h:43</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a687ce304c576caaad7b0d377ab217a25"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a687ce304c576caaad7b0d377ab217a25">kaldi::CompressedMatrix::CharToFloat</a></div><div class="ttdeci">static float CharToFloat(float p0, float p25, float p75, float p100, unsigned char value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00364">compressed-matrix.cc:364</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7aa391921754860e49177fff35542425"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">kaldi::CompressedMatrix::Uint16ToFloat</a></div><div class="ttdeci">static float Uint16ToFloat(const GlobalHeader &amp;global_header, uint16 value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00245">compressed-matrix.cc:245</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad80519cf50d1474c43dada4499a522fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CopyToMat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; Real &gt; *&#160;</td>
          <td class="paramname"><em>mat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724f">MatrixTransposeType</a>&#160;</td>
          <td class="paramname"><em>trans</em> = <code><a class="el" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kNoTrans</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies contents to matrix. </p>
<p>Note: mat must have the correct size. kNoTrans case uses a temporary. </p>

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00486">486</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00364">CompressedMatrix::CharToFloat()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l00733">MatrixBase&lt; Real &gt;::CopyFromMat()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>, <a class="el" href="compressed-matrix_8h_source.html#l00129">CompressedMatrix::GlobalHeader::format</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="matrix-common_8h_source.html#l00032">kaldi::kNoTrans</a>, <a class="el" href="matrix-common_8h_source.html#l00031">kaldi::kTrans</a>, <a class="el" href="compressed-matrix_8h_source.html#l00133">CompressedMatrix::GlobalHeader::num_cols</a>, <a class="el" href="compressed-matrix_8h_source.html#l00132">CompressedMatrix::GlobalHeader::num_rows</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00092">CompressedMatrix::NumCols()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00088">CompressedMatrix::NumRows()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00139">CompressedMatrix::PerColHeader::percentile_0</a>, <a class="el" href="compressed-matrix_8h_source.html#l00142">CompressedMatrix::PerColHeader::percentile_100</a>, <a class="el" href="compressed-matrix_8h_source.html#l00140">CompressedMatrix::PerColHeader::percentile_25</a>, <a class="el" href="compressed-matrix_8h_source.html#l00141">CompressedMatrix::PerColHeader::percentile_75</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00081">MatrixBase&lt; Real &gt;::RowData()</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00245">CompressedMatrix::Uint16ToFloat()</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00133">CompressedMatrix::CompressedMatrix()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01895">MatrixBase&lt; Real &gt;::CopyFromMat()</a>, <a class="el" href="compressed-transform-stats_8cc_source.html#l00089">CompressedAffineXformStats::CopyToAffineXformStats()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00736">GeneralMatrix::CopyToMat()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00868">kaldi::FilterCompressedMatrixRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00722">GeneralMatrix::GetMatrix()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01900">Matrix&lt; Real &gt;::Matrix()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01297">Matrix&lt; Real &gt;::Read()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00715">GeneralMatrix::Uncompress()</a>, <a class="el" href="matrix-lib-test_8cc_source.html#l04123">kaldi::UnitTestCompressedMatrix()</a>, <a class="el" href="matrix-lib-test_8cc_source.html#l04397">kaldi::UnitTestExtractCompressedMatrix()</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00405">CompressedMatrix::Write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                                                  {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">if</span> (trans == <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    Matrix&lt;Real&gt; temp(this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>(), this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">NumRows</a>());</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="classkaldi_1_1CompressedMatrix.html#ad80519cf50d1474c43dada4499a522fe">CopyToMat</a>(&amp;temp, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kNoTrans</a>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    mat-&gt;CopyFromMat(temp, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> == NULL) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(mat-&gt;NumRows() == 0);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(mat-&gt;NumCols() == 0);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  GlobalHeader *h = <span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_cols = h-&gt;num_cols, num_rows = h-&gt;num_rows;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(mat-&gt;NumRows() == num_rows);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(mat-&gt;NumCols() == num_cols);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keywordflow">if</span> (h-&gt;format == 1) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    PerColHeader *per_col_header = <span class="keyword">reinterpret_cast&lt;</span>PerColHeader*<span class="keyword">&gt;</span>(h+1);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *byte_data = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(per_col_header +</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                                                h-&gt;num_cols);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_cols; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++, per_col_header++) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordtype">float</span> p0 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_0),</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;          p25 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_25),</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;          p75 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_75),</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;          p100 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_100);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; num_rows; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++, byte_data++) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keywordtype">float</span> f = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a687ce304c576caaad7b0d377ab217a25">CharToFloat</a>(p0, p25, p75, p100, *byte_data);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        (*mat)(<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>, <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = f;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(h-&gt;format == 2);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a> *data = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>*<span class="keyword">&gt;</span>(h + 1);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_rows; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      Real *row_data = mat-&gt;RowData(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; num_cols; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++)</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        row_data[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>] = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, data[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>]);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      data += num_cols;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_afe58124fbfb387ddc20513bf3075b16e"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">kaldi::CompressedMatrix::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const </div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00092">compressed-matrix.h:92</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">kaldi::CompressedMatrix::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00088">compressed-matrix.h:88</a></div></div>
<div class="ttc" id="namespacekaldi_html_ac2a9e79eb120216f855626495b7bd18a"><div class="ttname"><a href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">kaldi::uint16</a></div><div class="ttdeci">uint16_t uint16</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00043">kaldi-types.h:43</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kaldi::kTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00031">matrix-common.h:31</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a687ce304c576caaad7b0d377ab217a25"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a687ce304c576caaad7b0d377ab217a25">kaldi::CompressedMatrix::CharToFloat</a></div><div class="ttdeci">static float CharToFloat(float p0, float p25, float p75, float p100, unsigned char value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00364">compressed-matrix.cc:364</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ad80519cf50d1474c43dada4499a522fe"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ad80519cf50d1474c43dada4499a522fe">kaldi::CompressedMatrix::CopyToMat</a></div><div class="ttdeci">void CopyToMat(MatrixBase&lt; Real &gt; *mat, MatrixTransposeType trans=kNoTrans) const </div><div class="ttdoc">Copies contents to matrix. </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00486">compressed-matrix.cc:486</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kaldi::kNoTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00032">matrix-common.h:32</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7aa391921754860e49177fff35542425"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">kaldi::CompressedMatrix::Uint16ToFloat</a></div><div class="ttdeci">static float Uint16ToFloat(const GlobalHeader &amp;global_header, uint16 value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00245">compressed-matrix.cc:245</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1936db6d64bd360b2235f588b4ea7ad4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CopyToMat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a>&#160;</td>
          <td class="paramname"><em>row_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a>&#160;</td>
          <td class="paramname"><em>column_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; Real &gt; *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies submatrix of compressed matrix into matrix dest. </p>
<p>Submatrix starts at row row_offset and column column_offset and its size is defined by size of provided matrix dest </p>

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00615">615</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00364">CompressedMatrix::CharToFloat()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00156">KALDI_PARANOID_ASSERT</a>, <a class="el" href="compressed-matrix_8h_source.html#l00132">CompressedMatrix::GlobalHeader::num_rows</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00092">CompressedMatrix::NumCols()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00088">CompressedMatrix::NumRows()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00081">MatrixBase&lt; Real &gt;::RowData()</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00245">CompressedMatrix::Uint16ToFloat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                                               {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <a class="code" href="group__error__group.html#ga2c852c1a15c7f195ec8021de2ab119a0">KALDI_PARANOID_ASSERT</a>(row_offset &lt; this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">NumRows</a>());</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <a class="code" href="group__error__group.html#ga2c852c1a15c7f195ec8021de2ab119a0">KALDI_PARANOID_ASSERT</a>(col_offset &lt; this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>());</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <a class="code" href="group__error__group.html#ga2c852c1a15c7f195ec8021de2ab119a0">KALDI_PARANOID_ASSERT</a>(row_offset &gt;= 0);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <a class="code" href="group__error__group.html#ga2c852c1a15c7f195ec8021de2ab119a0">KALDI_PARANOID_ASSERT</a>(col_offset &gt;= 0);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(row_offset+dest-&gt;NumRows() &lt; this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">NumRows</a>());</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(col_offset+dest-&gt;NumCols() &lt; this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>());</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// everything is OK</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  GlobalHeader *h = <span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_rows = h-&gt;num_rows, num_cols = h-&gt;num_cols,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      tgt_cols = dest-&gt;NumCols(), tgt_rows = dest-&gt;NumRows();</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">if</span> (h-&gt;format == 1) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">// format where we have a per-column header and use one byte per</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// element.</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    PerColHeader *per_col_header = <span class="keyword">reinterpret_cast&lt;</span>PerColHeader*<span class="keyword">&gt;</span>(h+1);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *byte_data = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(per_col_header +</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                                                                h-&gt;num_cols);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *start_of_subcol = byte_data+row_offset;  <span class="comment">// skip appropriate</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// number of columns</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    start_of_subcol += col_offset*num_rows;  <span class="comment">// skip appropriate number of rows</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    per_col_header += col_offset;  <span class="comment">// skip the appropriate number of headers</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;         <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; tgt_cols;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;         <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++, per_col_header++, start_of_subcol+=num_rows) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      byte_data = start_of_subcol;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="keywordtype">float</span> p0 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_0),</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;          p25 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_25),</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;          p75 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_75),</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;          p100 = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, per_col_header-&gt;percentile_100);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; tgt_rows; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++, byte_data++) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="keywordtype">float</span> f = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a687ce304c576caaad7b0d377ab217a25">CharToFloat</a>(p0, p25, p75, p100, *byte_data);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        (*dest)(<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>, <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = f;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(h-&gt;format == 2);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a> *data = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>*<span class="keyword">&gt;</span>(h+1) + col_offset +</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        (num_cols * row_offset);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> row = 0; row &lt; tgt_rows; row++) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      Real *dest_row = dest-&gt;RowData(row);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> col = 0; col &lt; tgt_cols; col++)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        dest_row[col] = <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">Uint16ToFloat</a>(*h, data[col]);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      data += num_cols;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_afe58124fbfb387ddc20513bf3075b16e"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">kaldi::CompressedMatrix::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const </div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00092">compressed-matrix.h:92</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">kaldi::CompressedMatrix::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00088">compressed-matrix.h:88</a></div></div>
<div class="ttc" id="namespacekaldi_html_ac2a9e79eb120216f855626495b7bd18a"><div class="ttname"><a href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">kaldi::uint16</a></div><div class="ttdeci">uint16_t uint16</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00043">kaldi-types.h:43</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a687ce304c576caaad7b0d377ab217a25"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a687ce304c576caaad7b0d377ab217a25">kaldi::CompressedMatrix::CharToFloat</a></div><div class="ttdeci">static float CharToFloat(float p0, float p25, float p75, float p100, unsigned char value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00364">compressed-matrix.cc:364</a></div></div>
<div class="ttc" id="group__error__group_html_ga2c852c1a15c7f195ec8021de2ab119a0"><div class="ttname"><a href="group__error__group.html#ga2c852c1a15c7f195ec8021de2ab119a0">KALDI_PARANOID_ASSERT</a></div><div class="ttdeci">#define KALDI_PARANOID_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00156">kaldi-error.h:156</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7aa391921754860e49177fff35542425"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7aa391921754860e49177fff35542425">kaldi::CompressedMatrix::Uint16ToFloat</a></div><div class="ttdeci">static float Uint16ToFloat(const GlobalHeader &amp;global_header, uint16 value)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00245">compressed-matrix.cc:245</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6aaead40f30363407c7e9c35a72638db"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* Data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8h_source.html#l00064">64</a> of file <a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>.</p>

<p>References <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00133">CompressedMatrix::CompressedMatrix()</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{ <span class="keywordflow">return</span> this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>; }</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aeee7ef8494e770dc642d596b2891168f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> DataSize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1CompressedMatrix_1_1GlobalHeader.html">GlobalHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>header</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00028">28</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8h_source.html#l00129">CompressedMatrix::GlobalHeader::format</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="compressed-matrix_8h_source.html#l00133">CompressedMatrix::GlobalHeader::num_cols</a>, and <a class="el" href="compressed-matrix_8h_source.html#l00132">CompressedMatrix::GlobalHeader::num_rows</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00133">CompressedMatrix::CompressedMatrix()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00042">CompressedMatrix::CopyFromMat()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00688">CompressedMatrix::operator=()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00438">CompressedMatrix::Read()</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00405">CompressedMatrix::Write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                                                                  {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="comment">// Returns size in bytes of the data.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">if</span> (header.format == 1) {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(GlobalHeader) +</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        header.num_cols * (<span class="keyword">sizeof</span>(PerColHeader) + header.num_rows);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(header.format == 2) ;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(GlobalHeader) +</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        2 * header.num_rows * header.num_cols;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  }</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a38557b65b4628f5f7dfc9fe66a510581"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char FloatToChar </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>p0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>p25</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>p75</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>p100</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00331">331</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00378">CompressedMatrix::CompressColumn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                 {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">int</span> ans;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">if</span> (value &lt; p25) {  <span class="comment">// range [ p0, p25 ) covered by</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// characters 0 .. 64.  We round to the closest int.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordtype">float</span> f = (value - p0) / (p25 - p0);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    ans = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(f * 64 + 0.5);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// Note: the checks on the next two lines</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// are necessary in pathological cases when all the elements in a row</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">// are the same and the percentile_* values are separated by one.</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> (ans &lt; 0) ans = 0;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (ans &gt; 64) ans = 64;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value &lt; p75) {  <span class="comment">// range [ p25, p75 )covered</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// by characters 64 .. 192.  We round to the closest int.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordtype">float</span> f = (value - p25) / (p75 - p25);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    ans = 64 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(f * 128 + 0.5);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (ans &lt; 64) ans = 64;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">if</span> (ans &gt; 192) ans = 192;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  } <span class="keywordflow">else</span> {  <span class="comment">// range [ p75, p100 ] covered by</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// characters 192 .. 255.  Note: this last range</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// has fewer characters than the left range, because</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// we go up to 255, not 256.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordtype">float</span> f = (value - p75) / (p100 - p75);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    ans = 192 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(f * 63 + 0.5);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (ans &lt; 192) ans = 192;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span> (ans &gt; 255) ans = 255;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(ans);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af69d9a6b462e265e28a3308e4c0e16d1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a> FloatToUint16 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1CompressedMatrix_1_1GlobalHeader.html">GlobalHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>global_header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00234">234</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8h_source.html#l00130">CompressedMatrix::GlobalHeader::min_value</a>, and <a class="el" href="compressed-matrix_8h_source.html#l00131">CompressedMatrix::GlobalHeader::range</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00254">CompressedMatrix::ComputeColHeader()</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00042">CompressedMatrix::CopyFromMat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                 {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordtype">float</span> f = (value - global_header.min_value) /</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      global_header.range;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  if (f &gt; 1.0) f = 1.0;  <span class="comment">// Note: this should not happen.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span> (f &lt; 0.0) f = 0.0;  <span class="comment">// Note: this should not happen.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(f * 65535 + 0.499);  <span class="comment">// + 0.499 is to</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// round to closest int; avoids bias.</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe58124fbfb387ddc20513bf3075b16e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> NumCols </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns number of columns (or zero for emtpy matrix). </p>

<p>Definition at line <a class="el" href="compressed-matrix_8h_source.html#l00092">92</a> of file <a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>.</p>

<p>References <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00133">CompressedMatrix::CompressedMatrix()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00572">CompressedMatrix::CopyColToVec()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00540">CompressedMatrix::CopyRowToVec()</a>, <a class="el" href="compressed-transform-stats_8cc_source.html#l00089">CompressedAffineXformStats::CopyToAffineXformStats()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00486">CompressedMatrix::CopyToMat()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00868">kaldi::FilterCompressedMatrixRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00722">GeneralMatrix::GetMatrix()</a>, <a class="el" href="nnet-compute-from-egs_8cc_source.html#l00027">main()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01900">Matrix&lt; Real &gt;::Matrix()</a>, <a class="el" href="nnet2_2nnet-example_8cc_source.html#l00159">NnetExample::NnetExample()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00697">GeneralMatrix::NumCols()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01297">Matrix&lt; Real &gt;::Read()</a>, <a class="el" href="matrix-lib-test_8cc_source.html#l04123">kaldi::UnitTestCompressedMatrix()</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00405">CompressedMatrix::Write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                                      { <span class="keywordflow">return</span> (<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> == NULL) ? 0 :</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      (*<span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>)).num_cols; }</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab204078beff8151c95d1828544acf92c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> NumRows </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns number of rows (or zero for emtpy matrix). </p>

<p>Definition at line <a class="el" href="compressed-matrix_8h_source.html#l00088">88</a> of file <a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>.</p>

<p>References <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00133">CompressedMatrix::CompressedMatrix()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00572">CompressedMatrix::CopyColToVec()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00540">CompressedMatrix::CopyRowToVec()</a>, <a class="el" href="compressed-transform-stats_8cc_source.html#l00089">CompressedAffineXformStats::CopyToAffineXformStats()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00486">CompressedMatrix::CopyToMat()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00736">GeneralMatrix::CopyToMat()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00868">kaldi::FilterCompressedMatrixRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00767">GeneralMatrix::GetFullMatrix()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00722">GeneralMatrix::GetMatrix()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00749">GeneralMatrix::GetSparseMatrix()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01900">Matrix&lt; Real &gt;::Matrix()</a>, <a class="el" href="nnet2_2nnet-example_8cc_source.html#l00159">NnetExample::NnetExample()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00687">GeneralMatrix::NumRows()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01297">Matrix&lt; Real &gt;::Read()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00774">GeneralMatrix::SwapFullMatrix()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00755">GeneralMatrix::SwapSparseMatrix()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00678">GeneralMatrix::Type()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00715">GeneralMatrix::Uncompress()</a>, <a class="el" href="matrix-lib-test_8cc_source.html#l04123">kaldi::UnitTestCompressedMatrix()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00405">CompressedMatrix::Write()</a>, and <a class="el" href="sparse-matrix_8cc_source.html#l00780">GeneralMatrix::Write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                      { <span class="keywordflow">return</span> (<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> == NULL) ? 0 :</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      (*<span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>)).num_rows; }</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab6904c6a808cc10523b35550ee4f1f78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> &amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>mat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00688">688</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00398">CompressedMatrix::AllocateData()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00677">CompressedMatrix::Clear()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00028">CompressedMatrix::DataSize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                                                                           {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <a class="code" href="classkaldi_1_1CompressedMatrix.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>(); <span class="comment">// now this-&gt;data_ == NULL.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">if</span> (mat.data_ != NULL) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> data_size = <a class="code" href="classkaldi_1_1CompressedMatrix.html#aeee7ef8494e770dc642d596b2891168f">DataSize</a>(*static_cast&lt;GlobalHeader*&gt;(mat.data_));</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> = <a class="code" href="classkaldi_1_1CompressedMatrix.html#aa62207e93ac956b9e0ab66eaa78fa6ce">AllocateData</a>(data_size);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    memcpy(static_cast&lt;void*&gt;(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>),</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;           static_cast&lt;void*&gt;(mat.data_),</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;           data_size);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_aa71d36872f416feaa853788a7a7a7ef8"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#aa71d36872f416feaa853788a7a7a7ef8">kaldi::CompressedMatrix::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00677">compressed-matrix.cc:677</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
<div class="ttc" id="namespacekaldi_html_aac2c220416519a2b0a7ad822ee2ef972"><div class="ttname"><a href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">kaldi::MatrixIndexT</a></div><div class="ttdeci">int32 MatrixIndexT</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00090">matrix-common.h:90</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_aa62207e93ac956b9e0ab66eaa78fa6ce"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#aa62207e93ac956b9e0ab66eaa78fa6ce">kaldi::CompressedMatrix::AllocateData</a></div><div class="ttdeci">static void * AllocateData(int32 num_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00398">compressed-matrix.cc:398</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_aeee7ef8494e770dc642d596b2891168f"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#aeee7ef8494e770dc642d596b2891168f">kaldi::CompressedMatrix::DataSize</a></div><div class="ttdeci">static MatrixIndexT DataSize(const GlobalHeader &amp;header)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00028">compressed-matrix.cc:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a522378f78034e4ba489e3e4a39994a84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> &amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>mat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00222">222</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00042">CompressedMatrix::CopyFromMat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                                                          {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ae1fc93f471e0df869aff311f23fa71d0">CopyFromMat</a>(mat);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ae1fc93f471e0df869aff311f23fa71d0"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ae1fc93f471e0df869aff311f23fa71d0">kaldi::CompressedMatrix::CopyFromMat</a></div><div class="ttdeci">void CopyFromMat(const MatrixBase&lt; Real &gt; &amp;mat)</div><div class="ttdoc">This will resize *this and copy the contents of mat to *this. </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00042">compressed-matrix.cc:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8e7d2790fc7e94fe9780ccc937de1270"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Read </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>binary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00438">438</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00398">CompressedMatrix::AllocateData()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00042">CompressedMatrix::CopyFromMat()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00028">CompressedMatrix::DataSize()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00129">CompressedMatrix::GlobalHeader::format</a>, <a class="el" href="kaldi-error_8h_source.html#l00160">KALDI_ERR</a>, <a class="el" href="compressed-matrix_8h_source.html#l00133">CompressedMatrix::GlobalHeader::num_cols</a>, <a class="el" href="io-funcs_8cc_source.html#l00145">kaldi::Peek()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01297">Matrix&lt; Real &gt;::Read()</a>, and <a class="el" href="io-funcs_8cc_source.html#l00154">kaldi::ReadToken()</a>.</p>

<p>Referenced by <a class="el" href="compressed-transform-stats_8cc_source.html#l00118">CompressedAffineXformStats::Read()</a>, <a class="el" href="nnet2_2nnet-example_8cc_source.html#l00080">NnetExample::Read()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00790">GeneralMatrix::Read()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01297">Matrix&lt; Real &gt;::Read()</a>, and <a class="el" href="matrix-lib-test_8cc_source.html#l04123">kaldi::UnitTestCompressedMatrix()</a>.</p>
<div class="fragment"><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                                                       {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> != NULL) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keyword">delete</span> [] (<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>));</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> = NULL;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordflow">if</span> (binary) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordtype">int</span> peekval = <a class="code" href="group__io__funcs__basic.html#gad31f67981a8f7b72645f65e57dcabc26">Peek</a>(is, binary);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> (peekval == <span class="charliteral">&#39;C&#39;</span>) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      std::string tok; <span class="comment">// Should be CM (format 1) or CM2 (format 2)</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <a class="code" href="group__io__funcs__basic.html#gacbf9367cd910befefa0bc98055979bea">ReadToken</a>(is, binary, &amp;tok);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      GlobalHeader h;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">if</span> (tok == <span class="stringliteral">&quot;CM&quot;</span>) { h.format = 1; }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tok == <span class="stringliteral">&quot;CM2&quot;</span>) { h.format = 2; }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Unexpected token &quot;</span> &lt;&lt; tok &lt;&lt; <span class="stringliteral">&quot;, expecting CM or CM2.&quot;</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="comment">// don&#39;t read the &quot;format&quot; -&gt; hence + 4, - 4.</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      is.read(reinterpret_cast&lt;char*&gt;(&amp;h) + 4, <span class="keyword">sizeof</span>(h) - 4);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">if</span> (is.fail())</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Failed to read header&quot;</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keywordflow">if</span> (h.num_cols == 0) <span class="comment">// empty matrix.</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> size = <a class="code" href="classkaldi_1_1CompressedMatrix.html#aeee7ef8494e770dc642d596b2891168f">DataSize</a>(h), remaining_size = size - <span class="keyword">sizeof</span>(GlobalHeader);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> = <a class="code" href="classkaldi_1_1CompressedMatrix.html#aa62207e93ac956b9e0ab66eaa78fa6ce">AllocateData</a>(size);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      *(<span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>)) = h;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      is.read(reinterpret_cast&lt;char*&gt;(data_) + <span class="keyword">sizeof</span>(GlobalHeader),</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;              remaining_size);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="comment">// Assume that what we&#39;re reading is a regular Matrix.  This might be the</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="comment">// case if you changed your code, making a Matrix into a CompressedMatrix,</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="comment">// and you want back-compatibility for reading.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      Matrix&lt;BaseFloat&gt; M;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      M.Read(is, binary); <span class="comment">// This will crash if it was not a Matrix.  This might happen,</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                          <span class="comment">// for instance, if the CompressedMatrix was written using the</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                          <span class="comment">// older code where we didn&#39;t write the token &quot;CM&quot;, we just</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                          <span class="comment">// wrote the binary data directly.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ae1fc93f471e0df869aff311f23fa71d0">CopyFromMat</a>(M);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  } <span class="keywordflow">else</span> {  <span class="comment">// Text-mode read.</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    Matrix&lt;BaseFloat&gt; temp;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    temp.Read(is, binary);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ae1fc93f471e0df869aff311f23fa71d0">CopyFromMat</a>(temp);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordflow">if</span> (is.fail())</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Failed to read data.&quot;</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div>
<div class="ttc" id="group__io__funcs__basic_html_gacbf9367cd910befefa0bc98055979bea"><div class="ttname"><a href="group__io__funcs__basic.html#gacbf9367cd910befefa0bc98055979bea">kaldi::ReadToken</a></div><div class="ttdeci">void ReadToken(std::istream &amp;is, bool binary, std::string *str)</div><div class="ttdoc">ReadToken gets the next token and puts it in str (exception on failure). </div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00154">io-funcs.cc:154</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_gad31f67981a8f7b72645f65e57dcabc26"><div class="ttname"><a href="group__io__funcs__basic.html#gad31f67981a8f7b72645f65e57dcabc26">kaldi::Peek</a></div><div class="ttdeci">int Peek(std::istream &amp;is, bool binary)</div><div class="ttdoc">Peek consumes whitespace (if binary == false) and then returns the peek() value of the stream...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00145">io-funcs.cc:145</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00160">kaldi-error.h:160</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_aa62207e93ac956b9e0ab66eaa78fa6ce"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#aa62207e93ac956b9e0ab66eaa78fa6ce">kaldi::CompressedMatrix::AllocateData</a></div><div class="ttdeci">static void * AllocateData(int32 num_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00398">compressed-matrix.cc:398</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ae1fc93f471e0df869aff311f23fa71d0"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ae1fc93f471e0df869aff311f23fa71d0">kaldi::CompressedMatrix::CopyFromMat</a></div><div class="ttdeci">void CopyFromMat(const MatrixBase&lt; Real &gt; &amp;mat)</div><div class="ttdoc">This will resize *this and copy the contents of mat to *this. </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00042">compressed-matrix.cc:42</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_aeee7ef8494e770dc642d596b2891168f"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#aeee7ef8494e770dc642d596b2891168f">kaldi::CompressedMatrix::DataSize</a></div><div class="ttdeci">static MatrixIndexT DataSize(const GlobalHeader &amp;header)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00028">compressed-matrix.cc:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab5f25bb18d46fb28a943834cf224d3d3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Swap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a> *&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8h_source.html#l00113">113</a> of file <a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>.</p>

<p>References <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>, and <a class="el" href="basic-filebuf_8h_source.html#l00275">kaldi::swap()</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00133">CompressedMatrix::CompressedMatrix()</a>, <a class="el" href="nnet2_2nnet-example_8cc_source.html#l00159">NnetExample::NnetExample()</a>, and <a class="el" href="sparse-matrix_8cc_source.html#l01101">GeneralMatrix::Swap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{ <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>, other-&gt;data_); }</div>
<div class="ttc" id="namespacekaldi_html_aa3e99328db564bc2bf6397fa1eaee4d7"><div class="ttname"><a href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">kaldi::swap</a></div><div class="ttdeci">void swap(basic_filebuf&lt; CharT, Traits &gt; &amp;x, basic_filebuf&lt; CharT, Traits &gt; &amp;y)</div><div class="ttdef"><b>Definition:</b> <a href="basic-filebuf_8h_source.html#l00275">basic-filebuf.h:275</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7aa391921754860e49177fff35542425"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float Uint16ToFloat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1CompressedMatrix_1_1GlobalHeader.html">GlobalHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>global_header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00245">245</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8h_source.html#l00130">CompressedMatrix::GlobalHeader::min_value</a>, and <a class="el" href="compressed-matrix_8h_source.html#l00131">CompressedMatrix::GlobalHeader::range</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00378">CompressedMatrix::CompressColumn()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00572">CompressedMatrix::CopyColToVec()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00540">CompressedMatrix::CopyRowToVec()</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00486">CompressedMatrix::CopyToMat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                      {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="comment">// the constant 1.52590218966964e-05 is 1/65535.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">return</span> global_header.min_value</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      + global_header.range * 1.52590218966964e-05F * value;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad5da0494b3a3f4bc33ff83c9b5ff5b40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Write </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>binary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8cc_source.html#l00405">405</a> of file <a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00486">CompressedMatrix::CopyToMat()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00167">CompressedMatrix::data_</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00028">CompressedMatrix::DataSize()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00129">CompressedMatrix::GlobalHeader::format</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00160">KALDI_ERR</a>, <a class="el" href="matrix-common_8h_source.html#l00037">kaldi::kUndefined</a>, <a class="el" href="compressed-matrix_8h_source.html#l00130">CompressedMatrix::GlobalHeader::min_value</a>, <a class="el" href="compressed-matrix_8h_source.html#l00133">CompressedMatrix::GlobalHeader::num_cols</a>, <a class="el" href="compressed-matrix_8h_source.html#l00132">CompressedMatrix::GlobalHeader::num_rows</a>, <a class="el" href="compressed-matrix_8h_source.html#l00092">CompressedMatrix::NumCols()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00088">CompressedMatrix::NumRows()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00131">CompressedMatrix::GlobalHeader::range</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l01226">MatrixBase&lt; Real &gt;::Write()</a>, and <a class="el" href="io-funcs_8cc_source.html#l00134">kaldi::WriteToken()</a>.</p>

<p>Referenced by <a class="el" href="matrix-lib-test_8cc_source.html#l04123">kaldi::UnitTestCompressedMatrix()</a>, <a class="el" href="compressed-transform-stats_8cc_source.html#l00110">CompressedAffineXformStats::Write()</a>, <a class="el" href="nnet2_2nnet-example_8cc_source.html#l00046">NnetExample::Write()</a>, <a class="el" href="nnet2_2nnet-example_8cc_source.html#l00242">DiscriminativeNnetExample::Write()</a>, and <a class="el" href="sparse-matrix_8cc_source.html#l00780">GeneralMatrix::Write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                                              {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">if</span> (binary) {  <span class="comment">// Binary-mode write:</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a> != NULL) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      GlobalHeader &amp;h = *<span class="keyword">reinterpret_cast&lt;</span>GlobalHeader*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">if</span> (h.format == 1) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;CM&quot;</span>);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(h.format == 2);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;CM2&quot;</span>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> size = <a class="code" href="classkaldi_1_1CompressedMatrix.html#aeee7ef8494e770dc642d596b2891168f">DataSize</a>(h);  <span class="comment">// total size of data in data_</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="comment">// We don&#39;t write out the &quot;int32 format&quot;, hence the + 4, - 4.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      os.write(reinterpret_cast&lt;const char*&gt;(<a class="code" href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">data_</a>) + 4, size - 4);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    } <span class="keywordflow">else</span> {  <span class="comment">// special case: where data_ == NULL, we treat it as an empty</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="comment">// matrix.</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;CM&quot;</span>);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      GlobalHeader h;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      h.range = h.min_value = 0.0;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      h.num_rows = h.num_cols = 0;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      os.write(reinterpret_cast&lt;const char*&gt;(&amp;h), <span class="keyword">sizeof</span>(h));</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// In text mode, just use the same format as a regular matrix.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// This is not compressed.</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    Matrix&lt;BaseFloat&gt; temp_mat(this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">NumRows</a>(), this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>(),</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                               <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    this-&gt;<a class="code" href="classkaldi_1_1CompressedMatrix.html#ad80519cf50d1474c43dada4499a522fe">CopyToMat</a>(&amp;temp_mat);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    temp_mat.Write(os, binary);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">if</span> (os.fail())</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Error writing compressed matrix to stream.&quot;</span>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_afe58124fbfb387ddc20513bf3075b16e"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#afe58124fbfb387ddc20513bf3075b16e">kaldi::CompressedMatrix::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const </div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00092">compressed-matrix.h:92</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ab204078beff8151c95d1828544acf92c">kaldi::CompressedMatrix::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00088">compressed-matrix.h:88</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_a7b24176d394890c1567b43bf7d82f2d4"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#a7b24176d394890c1567b43bf7d82f2d4">kaldi::CompressedMatrix::data_</a></div><div class="ttdeci">void * data_</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8h_source.html#l00167">compressed-matrix.h:167</a></div></div>
<div class="ttc" id="namespacekaldi_html_aac2c220416519a2b0a7ad822ee2ef972"><div class="ttname"><a href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">kaldi::MatrixIndexT</a></div><div class="ttdeci">int32 MatrixIndexT</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00090">matrix-common.h:90</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_ad80519cf50d1474c43dada4499a522fe"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#ad80519cf50d1474c43dada4499a522fe">kaldi::CompressedMatrix::CopyToMat</a></div><div class="ttdeci">void CopyToMat(MatrixBase&lt; Real &gt; *mat, MatrixTransposeType trans=kNoTrans) const </div><div class="ttdoc">Copies contents to matrix. </div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00486">compressed-matrix.cc:486</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00160">kaldi-error.h:160</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga87f1638ef3c0a3ee117178b202c2d02a"><div class="ttname"><a href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">kaldi::WriteToken</a></div><div class="ttdeci">void WriteToken(std::ostream &amp;os, bool binary, const char *token)</div><div class="ttdoc">The WriteToken functions are for writing nonempty sequences of non-space characters. </div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00134">io-funcs.cc:134</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="classkaldi_1_1CompressedMatrix_html_aeee7ef8494e770dc642d596b2891168f"><div class="ttname"><a href="classkaldi_1_1CompressedMatrix.html#aeee7ef8494e770dc642d596b2891168f">kaldi::CompressedMatrix::DataSize</a></div><div class="ttdeci">static MatrixIndexT DataSize(const GlobalHeader &amp;header)</div><div class="ttdef"><b>Definition:</b> <a href="compressed-matrix_8cc_source.html#l00028">compressed-matrix.cc:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="ae92f8fdeba38accca58a3a6feff54d02"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classkaldi_1_1Matrix.html">Matrix</a>&lt; double &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8h_source.html#l00118">118</a> of file <a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a57695e2f6b66eb1cc31f0b11d28647c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classkaldi_1_1Matrix.html">Matrix</a>&lt; float &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8h_source.html#l00117">117</a> of file <a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a7b24176d394890c1567b43bf7d82f2d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* data_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compressed-matrix_8h_source.html#l00167">167</a> of file <a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a>.</p>

<p>Referenced by <a class="el" href="compressed-matrix_8cc_source.html#l00677">CompressedMatrix::Clear()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00133">CompressedMatrix::CompressedMatrix()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00572">CompressedMatrix::CopyColToVec()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00042">CompressedMatrix::CopyFromMat()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00540">CompressedMatrix::CopyRowToVec()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00486">CompressedMatrix::CopyToMat()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00064">CompressedMatrix::Data()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00092">CompressedMatrix::NumCols()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00088">CompressedMatrix::NumRows()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00688">CompressedMatrix::operator=()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00438">CompressedMatrix::Read()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00113">CompressedMatrix::Swap()</a>, and <a class="el" href="compressed-matrix_8cc_source.html#l00405">CompressedMatrix::Write()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>matrix/<a class="el" href="compressed-matrix_8h_source.html">compressed-matrix.h</a></li>
<li>matrix/<a class="el" href="compressed-matrix_8cc_source.html">compressed-matrix.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a></li>
    <li class="footer">Generated on Tue Apr 26 2016 14:54:48 for Kaldi by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
