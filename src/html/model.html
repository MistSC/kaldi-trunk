<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: Acoustic modeling code</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('model.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Acoustic modeling code </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="model_intro"></a>
Introduction</h1>
<p>We will start with a few words about the general philosophy of our modeling code, and why we chose this path. Our aim is for Kaldi to support conventional models (i.e. diagonal GMMs) and Subspace Gaussian Mixture Models (SGMMs), but also to be easily extensible to new kinds of model. In a previous iteration of designing this software, we used a virtual base class that both the GMM and SGMM classes inherited from, and wrote command-line tools that handled both types of model. Our experience was that a base class is not as useful as one might think, because there are too many differences in the models (e.g. they support different types of adaptation), and we were forced to constantly expand the base-class so that our supposedly "generic" code could access functionality specific to one model or the other. Eventually our command-line tools reached a state where they were almost impossible to modify.</p>
<p>When redesigning the code, we decided on a more "modern" software engineering approach that focused less on using class hierarchies to capture commonalities, and more on creating simple, reusable components. For example, our decoder code (see <a class="el" href="decoders.html">Decoders used in the Kaldi toolkit</a>) is generic because its requirements are very limited; it only requires that we create an object inheriting from the simple base-class <a class="el" href="classkaldi_1_1DecodableInterface.html" title="DecodableInterface provides a link between the (acoustic-modeling and feature-processing) code and th...">DecodableInterface</a>, that behaves a lot like a matrix of acoustic likelihoods for an utterance. Individual command-line tools generally have simple and limited functionalities (e.g. gmm-align produces state-level alignments of utterances given a diagonal GMM). The idea is that implementing a new technique will generally involve creating a new command-line program, rather than increasing the complexity of any of the existing command-line programs.</p>
<h1><a class="anchor" id="model_diag"></a>
Diagonal GMMs</h1>
<p>The class <a class="el" href="classkaldi_1_1DiagGmm.html" title="Gaussian Mixture Model with diagonal covariances. ">DiagGmm</a> represents a single diagonal-covariance Gaussian Mixture Model. An acoustic model based on a collection of objects of type <a class="el" href="classkaldi_1_1DiagGmm.html" title="Gaussian Mixture Model with diagonal covariances. ">DiagGmm</a>, indexed by zero-based "pdf-ids", is implemented as class <a class="el" href="classkaldi_1_1AmDiagGmm.html">AmDiagGmm</a>. You can think of <a class="el" href="classkaldi_1_1AmDiagGmm.html">AmDiagGmm</a> as a vector of type <a class="el" href="classkaldi_1_1DiagGmm.html" title="Gaussian Mixture Model with diagonal covariances. ">DiagGmm</a>, although it has a slightly richer interface than that. Representing an acoustic model as a collection of individual models, one for each p.d.f., is not the way we imagine all models would be represented; for example, SGMMs cannot be represented that way, and if we implemented GMMs with tying of Gaussians among states we would not be able to represent the pdfs separately.</p>
<h2><a class="anchor" id="model_diag_gmm"></a>
Individual GMMs</h2>
<p>Class <a class="el" href="classkaldi_1_1DiagGmm.html" title="Gaussian Mixture Model with diagonal covariances. ">DiagGmm</a> is, conceptually, a fairly simple and passive object that stores the parameters of a Gaussian Mixture Model and has member functions that compute likelihoods. It does not "know anything" about how it will be used; it just provides access to its members. It does not handle accumulation or update; for that, see below, or class MlEstimateDiagGmm. The class <a class="el" href="classkaldi_1_1DiagGmm.html" title="Gaussian Mixture Model with diagonal covariances. ">DiagGmm</a> stores its parameters as: inverse variances, and (means times inverse variances). This means that likelihoods can be computed with simple dot products. The "gconsts" (i.e. the precomputed constant terms in the likelihood) are different from, say, HTK's gconsts because they depend on the mean also.</p>
<p>Since it is quite complicated to modify the Gaussian parameters in this form, we also provide a class <a class="el" href="classkaldi_1_1DiagGmmNormal.html" title="Definition for Gaussian Mixture Model with diagonal covariances in normal mode: where the parameters ...">DiagGmmNormal</a>, which contains the parameters in a more simple and obvious form, and we provide functions to convert back and forth between <a class="el" href="classkaldi_1_1DiagGmm.html" title="Gaussian Mixture Model with diagonal covariances. ">DiagGmm</a> and <a class="el" href="classkaldi_1_1DiagGmmNormal.html" title="Definition for Gaussian Mixture Model with diagonal covariances in normal mode: where the parameters ...">DiagGmmNormal</a> representations. Most of the update code works with the <a class="el" href="classkaldi_1_1DiagGmmNormal.html" title="Definition for Gaussian Mixture Model with diagonal covariances in normal mode: where the parameters ...">DiagGmmNormal</a> representation.</p>
<h2><a class="anchor" id="model_diag_am"></a>
GMM-based acoustic model</h2>
<p>Class <a class="el" href="classkaldi_1_1AmDiagGmm.html">AmDiagGmm</a> represents a collection of <a class="el" href="classkaldi_1_1DiagGmm.html" title="Gaussian Mixture Model with diagonal covariances. ">DiagGmm</a> objects, indexed by <a class="el" href="tree_externals.html#pdf_id">pdf-id</a>. This class does not represent a HMM-GMM, just a collection of GMMs. Putting it together with the HMM structure is the responsibility of other code, principally the topology and transition-modeling code and the code responsible for compiling decoding graphs (see <a class="el" href="hmm.html">HMM topology and transition modeling</a>). We mention at this point that we never write an object of <a class="el" href="classkaldi_1_1AmDiagGmm.html">AmDiagGmm</a> to disk on its own; instead we write an object of type <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> and then an object of type <a class="el" href="classkaldi_1_1AmDiagGmm.html">AmDiagGmm</a>. This is simply a convenience to avoid having to write too many separate files to disk, since normally we update the Gaussians and the transitions at the same time. The idea is that with other model types we would create a file with a <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> and then [an object some other model type]. This way, programs that need to read only the transition model (e.g. for graph creation) can read the file without needing to know the type of the model.</p>
<p>Class <a class="el" href="classkaldi_1_1AmDiagGmm.html">AmDiagGmm</a> is a fairly simple object and does not take the responsibility for such things as model estimation (e.g. see <a class="el" href="classkaldi_1_1AccumAmDiagGmm.html">AccumAmDiagGmm</a>), or transform estimation (there are various pieces of code that do this; see <a class="el" href="transform.html">Feature and model-space transforms in Kaldi</a>.</p>
<h2><a class="anchor" id="model_full_gmm"></a>
Full-covariance GMMs</h2>
<p>We have a class <a class="el" href="classkaldi_1_1FullGmm.html">FullGmm</a> for full-covariance GMMs, which has similar functionality to the <a class="el" href="group__DiagGmm.html">DiagGmm</a> class but with full covariances. This is mainly of use for training full-covariance Universal Background Models (UBMs) in the SGMM recipe (see below). The only command-line tools available for full GMMs are used to train global mixture models (i.e. UBMs); we have not implemented a full covariance version of the <a class="el" href="classkaldi_1_1AmDiagGmm.html">AmDiagGmm</a> class or the corresponding command line tools, although doing so would be fairly easy.</p>
<h1><a class="anchor" id="model_sgmm"></a>
Subspace Gaussian Mixture Models (SGMMs)</h1>
<p>Subspace Gaussian Mixture Models (SGMMs) are implemented by class <a class="el" href="classkaldi_1_1AmSgmm.html" title="Class for definition of the subspace Gmm acoustic model. ">AmSgmm</a>. This class essentially implements the approach described in ``The Subspace Gaussian Mixture Model &ndash; a Structured Model for Speech Recognition'', by D. Povey, Lukas Burget et. al, Computer Speech and Language, 2011. The class <a class="el" href="classkaldi_1_1AmSgmm.html" title="Class for definition of the subspace Gmm acoustic model. ">AmSgmm</a> represents a whole collection of pdf's; there is no class that represents a single pdf of the SGMM (as there is for GMMs). Estimation of SGMMs is handled (at the C++ level) by the classes <a class="el" href="classkaldi_1_1MleAmSgmmAccs.html">MleAmSgmmAccs</a> and <a class="el" href="classkaldi_1_1MleAmSgmmUpdater.html" title="Contains the functions needed to update the SGMM parameters. ">MleAmSgmmUpdater</a>.</p>
<p>For example scripts that demonstrate how to build an SGMM based system, see egs/rm/s1/steps/train_ubma.sh, egs/rm/s1/steps/train_sgmma.sh, and egs/rm/s1/steps/decode_sgmma.sh. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Kaldi</a></li>
    <li class="footer">Generated on Tue Apr 26 2016 14:54:46 for Kaldi by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
