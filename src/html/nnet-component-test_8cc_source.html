<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: nnet/nnet-component-test.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nnet-component-test_8cc_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">nnet-component-test.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="nnet-component-test_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// nnet/nnet-component-test.cc</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Copyright 2014-2015  Brno University of Technology (author: Karel Vesely),</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                      The Johns Hopkins University (author: Sri Harish Mallidi)</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// See ../../COPYING for clarification regarding multiple authors</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//  http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// THIS CODE IS PROVIDED *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// MERCHANTABLITY OR NON-INFRINGEMENT.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// See the Apache 2 License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// limitations under the License.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nnet-component_8h.html">nnet/nnet-component.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nnet-nnet_8h.html">nnet/nnet-nnet.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nnet-convolutional-component_8h.html">nnet/nnet-convolutional-component.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nnet-convolutional-2d-component_8h.html">nnet/nnet-convolutional-2d-component.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nnet-max-pooling-component_8h.html">nnet/nnet-max-pooling-component.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nnet-max-pooling-2d-component_8h.html">nnet/nnet-max-pooling-2d-component.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nnet-average-pooling-2d-component_8h.html">nnet/nnet-average-pooling-2d-component.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common-utils_8h.html">util/common-utils.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">namespace </span>kaldi {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">namespace </span>nnet1 {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">   * Helper functions</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">   */</span>  </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Real&gt;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">   41</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="keyword">const</span> std::string&amp; s, <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;Real&gt;</a>* m) {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    std::istringstream is(s + <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    m-&gt;<a class="code" href="classkaldi_1_1CuMatrix.html#a8e7d2790fc7e94fe9780ccc937de1270">Read</a>(is, <span class="keyword">false</span>); <span class="comment">// false for ascii</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  }</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="namespacekaldi_1_1nnet1.html#a2e553e0c26ad5fde7fef7d48ed5110c1">   46</a></span>&#160;  <a class="code" href="structkaldi_1_1nnet1_1_1Component.html">Component</a>* <a class="code" href="namespacekaldi_1_1nnet1.html#a2e553e0c26ad5fde7fef7d48ed5110c1">ReadComponentFromString</a>(<span class="keyword">const</span> std::string&amp; s) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    std::istringstream is(s + <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structkaldi_1_1nnet1_1_1Component.html#a9a02ce735be66894f80466e1fd9a089c">Component::Read</a>(is, <span class="keyword">false</span>); <span class="comment">// false for ascii</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">   * Unit tests,</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="namespacekaldi_1_1nnet1.html#af4899f1f41590d4bea3458e0b3d2fb2c">   55</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet1.html#af4899f1f41590d4bea3458e0b3d2fb2c">UnitTestLengthNorm</a>() {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">// make L2-lenght normalization component,</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="structkaldi_1_1nnet1_1_1Component.html">Component</a>* c = <a class="code" href="namespacekaldi_1_1nnet1.html#a2e553e0c26ad5fde7fef7d48ed5110c1">ReadComponentFromString</a>(<span class="stringliteral">&quot;&lt;LengthNormComponent&gt; 5 5&quot;</span>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">// prepare input,</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 1 2 3 4 5 \n 2 3 5 6 8 ] &quot;</span>, &amp;mat_in);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// propagate,</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#aaa5db876de71ec16a23afbf1fbd76b43">Propagate</a>(mat_in,&amp;mat_out);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// check the lenght,</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    mat_out.<a class="code" href="classkaldi_1_1CuMatrixBase.html#a93f1ecf679bf0ab28200c1cec33bd1ba">MulElements</a>(mat_out); <span class="comment">// ^2,</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="classkaldi_1_1CuVector.html">CuVector&lt;BaseFloat&gt;</a> check_length_is_one(2);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    check_length_is_one.<a class="code" href="classkaldi_1_1CuVectorBase.html#acb7f57affd1060151b6265c544ba8659">AddColSumMat</a>(1.0, mat_out, 0.0); <span class="comment">// sum_of_cols(x^2),</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    check_length_is_one.<a class="code" href="classkaldi_1_1CuVectorBase.html#a36c241f895530869d9e5a3c7bdedb25e">ApplyPow</a>(0.5); <span class="comment">// L2norm = sqrt(sum_of_cols(x^2)),</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="classkaldi_1_1CuVector.html">CuVector&lt;BaseFloat&gt;</a> ones(2); ones.<a class="code" href="classkaldi_1_1CuVectorBase.html#ac6869c723f58973838a83d4b60d4b433">Set</a>(1.0);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(check_length_is_one, ones);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="namespacekaldi_1_1nnet1.html#aa7a45ebc694c25541b89a6f0588ec5a6">   73</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet1.html#aa7a45ebc694c25541b89a6f0588ec5a6">UnitTestSimpleSentenceAveragingComponent</a>() {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">// make SimpleSentenceAveraging component,</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="structkaldi_1_1nnet1_1_1Component.html">Component</a>* c = <a class="code" href="namespacekaldi_1_1nnet1.html#a2e553e0c26ad5fde7fef7d48ed5110c1">ReadComponentFromString</a>(<span class="stringliteral">&quot;&lt;SimpleSentenceAveragingComponent&gt; 2 2 &lt;GradientBoost&gt; 10.0&quot;</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// prepare input,</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 0 0.5 \n 1 1 \n 2 1.5 ] &quot;</span>, &amp;mat_in);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// propagate,</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#aaa5db876de71ec16a23afbf1fbd76b43">Propagate</a>(mat_in,&amp;mat_out);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// check the output,</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="classkaldi_1_1CuVector.html">CuVector&lt;BaseFloat&gt;</a> ones(2); ones.<a class="code" href="classkaldi_1_1CuVectorBase.html#ac6869c723f58973838a83d4b60d4b433">Set</a>(1.0);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;mat_out.<a class="code" href="classkaldi_1_1CuMatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_out.<a class="code" href="classkaldi_1_1CuMatrixBase.html#a0d1d1dad8675b40db92926168f186573">Row</a>(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>), ones);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// backpropagate,</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> dummy1(3,2), dummy2(3,2), diff_out(mat_in), diff_in;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#a2923db03aecf226a39705a326ab2886e">Backpropagate</a>(dummy1, dummy2, diff_out, &amp;diff_in); <span class="comment">// output 1.0 boosted by 10.0,</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// check the output,</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="classkaldi_1_1CuVector.html">CuVector&lt;BaseFloat&gt;</a> tens(2); tens.<a class="code" href="classkaldi_1_1CuVectorBase.html#ac6869c723f58973838a83d4b60d4b433">Set</a>(10); </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;diff_in.<a class="code" href="classkaldi_1_1CuMatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(diff_in.<a class="code" href="classkaldi_1_1CuMatrixBase.html#a0d1d1dad8675b40db92926168f186573">Row</a>(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>), tens);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="namespacekaldi_1_1nnet1.html#ad75205c73ff44b4cb018f774dfda2d73">   99</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet1.html#ad75205c73ff44b4cb018f774dfda2d73">UnitTestConvolutionalComponentUnity</a>() {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// make &#39;identity&#39; convolutional component,</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="structkaldi_1_1nnet1_1_1Component.html">Component</a>* c = <a class="code" href="namespacekaldi_1_1nnet1.html#a2e553e0c26ad5fde7fef7d48ed5110c1">ReadComponentFromString</a>(<span class="stringliteral">&quot;&lt;ConvolutionalComponent&gt; 5 5 \</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="stringliteral">      &lt;PatchDim&gt; 1 &lt;PatchStep&gt; 1 &lt;PatchStride&gt; 5 \</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="stringliteral">      &lt;LearnRateCoef&gt; 1.0 &lt;BiasLearnRateCoef&gt; 1.0 \</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="stringliteral">      &lt;MaxNorm&gt; 0 \</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="stringliteral">      &lt;Filters&gt; [ 1 \</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="stringliteral">      ] &lt;Bias&gt; [ 0 ]&quot;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    );</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// prepare input,</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 1 2 3 4 5 ] &quot;</span>, &amp;mat_in);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// propagate,</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#aaa5db876de71ec16a23afbf1fbd76b43">Propagate</a>(mat_in,&amp;mat_out);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_in&quot;</span> &lt;&lt; mat_in &lt;&lt; <span class="stringliteral">&quot;mat_out&quot;</span> &lt;&lt; mat_out;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_in,mat_out);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// backpropagate,</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out_diff(mat_in), mat_in_diff;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#a2923db03aecf226a39705a326ab2886e">Backpropagate</a>(mat_in, mat_out, mat_out_diff, &amp;mat_in_diff);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_out_diff &quot;</span> &lt;&lt; mat_out_diff &lt;&lt; <span class="stringliteral">&quot; mat_in_diff &quot;</span> &lt;&lt; mat_in_diff;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_out_diff,mat_in_diff);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// clean,</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keyword">delete</span> c;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="namespacekaldi_1_1nnet1.html#a7eadc8ee4e77ebcee5ace87f7f9d9b5d">  129</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet1.html#a7eadc8ee4e77ebcee5ace87f7f9d9b5d">UnitTestConvolutionalComponent3x3</a>() {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// make 3x3 convolutional component, design such weights and input so output is zero,</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="structkaldi_1_1nnet1_1_1Component.html">Component</a>* c = <a class="code" href="namespacekaldi_1_1nnet1.html#a2e553e0c26ad5fde7fef7d48ed5110c1">ReadComponentFromString</a>(<span class="stringliteral">&quot;&lt;ConvolutionalComponent&gt; 9 15 \</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="stringliteral">      &lt;PatchDim&gt; 3 &lt;PatchStep&gt; 1 &lt;PatchStride&gt; 5 \</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="stringliteral">      &lt;LearnRateCoef&gt; 1.0 &lt;BiasLearnRateCoef&gt; 1.0 \</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="stringliteral">      &lt;MaxNorm&gt; 0 \</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="stringliteral">      &lt;Filters&gt; [ -1 -2 -7   0 0 0   1 2 7 ; \</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="stringliteral">                  -1  0  1  -3 0 3  -2 2 0 ; \</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="stringliteral">                  -4  0  0  -3 0 3   4 0 0 ] \</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="stringliteral">      &lt;Bias&gt; [ -20 -20 -20 ]&quot;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    );</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// prepare input, reference output,</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 1 3 5 7 9  2 4 6 8 10  3 5 7 9 11 ]&quot;</span>, &amp;mat_in);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out_ref;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 0 0 0  0 0 0  0 0 0 ]&quot;</span>, &amp;mat_out_ref);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// propagate,</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#aaa5db876de71ec16a23afbf1fbd76b43">Propagate</a>(mat_in, &amp;mat_out);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_in&quot;</span> &lt;&lt; mat_in &lt;&lt; <span class="stringliteral">&quot;mat_out&quot;</span> &lt;&lt; mat_out;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_out, mat_out_ref);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// prepare mat_out_diff, mat_in_diff_ref,</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out_diff;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 1 0 0  1 1 0  1 1 1 ]&quot;</span>, &amp;mat_out_diff);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in_diff_ref; <span class="comment">// hand-computed back-propagated values,</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ -1 -4 -15 -8 -6   0 -3 -6 3 6   1 1 14 11 7 ]&quot;</span>, &amp;mat_in_diff_ref);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// backpropagate,</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in_diff;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#a2923db03aecf226a39705a326ab2886e">Backpropagate</a>(mat_in, mat_out, mat_out_diff, &amp;mat_in_diff);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_in_diff &quot;</span> &lt;&lt; mat_in_diff &lt;&lt; <span class="stringliteral">&quot; mat_in_diff_ref &quot;</span> &lt;&lt; mat_in_diff_ref;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_in_diff, mat_in_diff_ref);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// clean,</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">delete</span> c;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="namespacekaldi_1_1nnet1.html#a72a6f835cff5791aefaf8d6dfb64c6cb">  171</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet1.html#a72a6f835cff5791aefaf8d6dfb64c6cb">UnitTestMaxPoolingComponent</a>() {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// make max-pooling component, assuming 4 conv. neurons, non-overlapping pool of size 3,</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="structkaldi_1_1nnet1_1_1Component.html">Component</a>* c = <a class="code" href="structkaldi_1_1nnet1_1_1Component.html#a31d604ff041030c5e62cf87cdbce97ea">Component::Init</a>(<span class="stringliteral">&quot;&lt;MaxPoolingComponent&gt; &lt;InputDim&gt; 24 &lt;OutputDim&gt; 8 \</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="stringliteral">                     &lt;PoolSize&gt; 3 &lt;PoolStep&gt; 3 &lt;PoolStride&gt; 4&quot;</span>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// input matrix,</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 3 8 2 9 \</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="stringliteral">                              8 3 9 3 \</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="stringliteral">                              2 4 9 6 \</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="stringliteral">                              \</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="stringliteral">                              2 4 2 0 \</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="stringliteral">                              6 4 9 4 \</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="stringliteral">                              7 3 0 3;\</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="stringliteral">                              \</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="stringliteral">                              5 4 7 8 \</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="stringliteral">                              3 9 5 6 \</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="stringliteral">                              3 4 8 9 \</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="stringliteral">                              \</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="stringliteral">                              5 4 5 6 \</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="stringliteral">                              3 1 4 5 \</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="stringliteral">                              8 2 1 7 ]&quot;</span>, &amp;mat_in);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">// expected output (max values in columns),</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out_ref;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 8 8 9 9 \</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="stringliteral">                              7 4 9 4;\</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="stringliteral">                              5 9 8 9 \</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="stringliteral">                              8 4 5 7 ]&quot;</span>, &amp;mat_out_ref);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// propagate,</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#aaa5db876de71ec16a23afbf1fbd76b43">Propagate</a>(mat_in,&amp;mat_out);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_out&quot;</span> &lt;&lt; mat_out &lt;&lt; <span class="stringliteral">&quot;mat_out_ref&quot;</span> &lt;&lt; mat_out_ref;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_out, mat_out_ref);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// locations of max values will be shown,</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out_diff(mat_out);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    mat_out_diff.<a class="code" href="classkaldi_1_1CuMatrixBase.html#ac6869c723f58973838a83d4b60d4b433">Set</a>(1);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// expected backpropagated values,</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in_diff_ref; <span class="comment">// hand-computed back-propagated values,</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 0 1 0 1 \</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="stringliteral">                              1 0 1 0 \</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="stringliteral">                              0 0 1 0 \</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="stringliteral">                              \</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="stringliteral">                              0 1 0 0 \</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="stringliteral">                              0 1 1 1 \</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="stringliteral">                              1 0 0 0;\</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="stringliteral">                              \</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="stringliteral">                              1 0 0 0 \</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="stringliteral">                              0 1 0 0 \</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="stringliteral">                              0 0 1 1 \</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="stringliteral">                              \</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="stringliteral">                              0 1 1 0 \</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="stringliteral">                              0 0 0 0 \</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="stringliteral">                              1 0 0 1 ]&quot;</span>, &amp;mat_in_diff_ref);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// backpropagate,</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in_diff;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#a2923db03aecf226a39705a326ab2886e">Backpropagate</a>(mat_in, mat_out, mat_out_diff, &amp;mat_in_diff);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_in_diff &quot;</span> &lt;&lt; mat_in_diff &lt;&lt; <span class="stringliteral">&quot; mat_in_diff_ref &quot;</span> &lt;&lt; mat_in_diff_ref;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_in_diff, mat_in_diff_ref);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keyword">delete</span> c;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="namespacekaldi_1_1nnet1.html#ae2138c171d2469d51120c8b10ea07e8d">  236</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet1.html#ae2138c171d2469d51120c8b10ea07e8d">UnitTestMaxPooling2DComponent</a>() { <span class="comment">/* Implemented by Harish Mallidi */</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">// make max-pooling2d component</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="structkaldi_1_1nnet1_1_1Component.html">Component</a>* c = <a class="code" href="structkaldi_1_1nnet1_1_1Component.html#a31d604ff041030c5e62cf87cdbce97ea">Component::Init</a>(<span class="stringliteral">&quot;&lt;MaxPooling2DComponent&gt; &lt;InputDim&gt; 56 &lt;OutputDim&gt; 18 \</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="stringliteral">&lt;FmapXLen&gt; 4 &lt;FmapYLen&gt; 7 &lt;PoolXLen&gt; 2 &lt;PoolYLen&gt; 3 &lt;PoolXStep&gt; 1 &lt;PoolYStep&gt; 2&quot;</span>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// input matrix,</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9 10 10 11 11 12 12 13 13 14 14 15 15 16 16 17 17 18 18 19 19 20 20 21 21 22 22 23 23 24 24 25 25 26 26 27 27 ]&quot;</span>, &amp;mat_in);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// expected output (max values in the patch)</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out_ref;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 9 9 11 11 13 13 16 16 18 18 20 20 23 23 25 25 27 27 ]&quot;</span>, &amp;mat_out_ref);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// propagate,</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#aaa5db876de71ec16a23afbf1fbd76b43">Propagate</a>(mat_in, &amp;mat_out);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_out&quot;</span> &lt;&lt; mat_out &lt;&lt; <span class="stringliteral">&quot;mat_out_ref&quot;</span> &lt;&lt; mat_out_ref;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_out, mat_out_ref);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// locations of max values will be shown</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out_diff(mat_out);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 ]&quot;</span>, &amp;mat_out_diff);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">//expected backpropagated values,</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in_diff_ref; <span class="comment">//hand-computed back-propagated values,</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0.25 0 0 1 1 0 0 0 0 0.75 0.75 0 0 1 1 0 0 2.5 2.5 0 0 0 0 3 3 0 0 3.5 3.5 0 0 8 8 ]&quot;</span>, &amp;mat_in_diff_ref);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// backpropagate,</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in_diff;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#a2923db03aecf226a39705a326ab2886e">Backpropagate</a>(mat_in, mat_out, mat_out_diff, &amp;mat_in_diff);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_in_diff &quot;</span> &lt;&lt; mat_in_diff &lt;&lt; <span class="stringliteral">&quot; mat_in_diff_ref &quot;</span> &lt;&lt; mat_in_diff_ref;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_in_diff, mat_in_diff_ref);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keyword">delete</span> c;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="namespacekaldi_1_1nnet1.html#ab23b9582e2a7ecfb4b70b3b00266e4cf">  273</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet1.html#ab23b9582e2a7ecfb4b70b3b00266e4cf">UnitTestAveragePooling2DComponent</a>() { <span class="comment">/* Implemented by Harish Mallidi */</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// make average-pooling2d component</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="structkaldi_1_1nnet1_1_1Component.html">Component</a>* c = <a class="code" href="structkaldi_1_1nnet1_1_1Component.html#a31d604ff041030c5e62cf87cdbce97ea">Component::Init</a>(<span class="stringliteral">&quot;&lt;AveragePooling2DComponent&gt; &lt;InputDim&gt; 56 &lt;OutputDim&gt; 18 \</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="stringliteral">&lt;FmapXLen&gt; 4 &lt;FmapYLen&gt; 7 &lt;PoolXLen&gt; 2 &lt;PoolYLen&gt; 3 &lt;PoolXStep&gt; 1 &lt;PoolYStep&gt; 2&quot;</span>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// input matrix,</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9 10 10 11 11 12 12 13 13 14 14 15 15 16 16 17 17 18 18 19 19 20 20 21 21 22 22 23 23 24 24 25 25 26 26 27 27 ]&quot;</span>, &amp;mat_in);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// expected output (max values in the patch)</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out_ref;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 4.5 4.5 6.5 6.5 8.5 8.5 11.5 11.5 13.5 13.5 15.5 15.5 18.5 18.5 20.5 20.5 22.5 22.5 ]&quot;</span>, &amp;mat_out_ref);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// propagate,</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#aaa5db876de71ec16a23afbf1fbd76b43">Propagate</a>(mat_in, &amp;mat_out);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_out&quot;</span> &lt;&lt; mat_out &lt;&lt; <span class="stringliteral">&quot;mat_out_ref&quot;</span> &lt;&lt; mat_out_ref;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_out, mat_out_ref);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">// locations of max values will be shown</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out_diff(mat_out);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 ]&quot;</span>, &amp;mat_out_diff);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// expected backpropagated values,</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in_diff_ref; <span class="comment">// hand-computed back-propagated values,</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[  0 0 0 0 0.0833333 0.0833333 0.166667 0.166667 0.25 0.25 0.333333 0.333333 0.333333 0.333333 0.25 0.25 0.25 0.25 0.333333 0.333333 0.416667 0.416667 0.5 0.5 0.583333 0.583333 0.583333 0.583333 0.75 0.75 0.75 0.75 0.833333 0.833333 0.916667 0.916667 1 1 1.08333 1.08333 1.08333 1.08333 1 1 1 1 1.08333 1.08333 1.16667 1.16667 1.25 1.25 1.33333 1.33333 1.33333 1.33333 ]&quot;</span>, &amp;mat_in_diff_ref);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// backpropagate,</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in_diff;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#a2923db03aecf226a39705a326ab2886e">Backpropagate</a>(mat_in, mat_out, mat_out_diff, &amp;mat_in_diff);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_in_diff &quot;</span> &lt;&lt; mat_in_diff &lt;&lt; <span class="stringliteral">&quot; mat_in_diff_ref &quot;</span> &lt;&lt; mat_in_diff_ref;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_in_diff, mat_in_diff_ref);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keyword">delete</span> c;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="namespacekaldi_1_1nnet1.html#a237d8dd66935ec58b5e4efad982d6c98">  311</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet1.html#a237d8dd66935ec58b5e4efad982d6c98">UnitTestConvolutional2DComponent</a>() { <span class="comment">/* Implemented by Harish Mallidi */</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// Convolutional2D component </span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="structkaldi_1_1nnet1_1_1Component.html">Component</a>* c = <a class="code" href="namespacekaldi_1_1nnet1.html#a2e553e0c26ad5fde7fef7d48ed5110c1">ReadComponentFromString</a>(<span class="stringliteral">&quot;&lt;Convolutional2DComponent&gt; 18 56 \</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="stringliteral">&lt;LearnRateCoef&gt; 0 &lt;BiasLearnRateCoef&gt; 0 &lt;FmapXLen&gt; 4 &lt;FmapYLen&gt; 7 &lt;FiltXLen&gt; 2 &lt;FiltYLen&gt; 3 &lt;FiltXStep&gt; 1 &lt;FiltYStep&gt; 2 &lt;ConnectFmap&gt; 1 &lt;Filters&gt; [ 0 0 1 1 2 2 3 3 4 4 5 5 ; 0 0 1 1 2 2 3 3 4 4 5 5 ] &lt;Bias&gt; [ 0 0 ]&quot;</span>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// input matrix</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9 10 10 11 11 12 12 13 13 14 14 15 15 16 16 17 17 18 18 19 19 20 20 21 21 22 22 23 23 24 24 25 25 26 26 27 27 ]&quot;</span>, &amp;mat_in);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out_ref;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 206 206 266 266 326 326 416 416 476 476 536 536 626 626 686 686 746 746 ]&quot;</span>, &amp;mat_out_ref);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="comment">// propagate</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#aaa5db876de71ec16a23afbf1fbd76b43">Propagate</a>(mat_in,&amp;mat_out);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_out&quot;</span> &lt;&lt; mat_out &lt;&lt; <span class="stringliteral">&quot;mat_out&quot;</span> &lt;&lt; mat_out_ref;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_out, mat_out_ref);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// prepare mat_out_diff, mat_in_diff_ref,</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_out_diff;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 ]&quot;</span>, &amp;mat_out_diff);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in_diff_ref;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">ReadCuMatrixFromString</a>(<span class="stringliteral">&quot;[ 0 0 0 0 0 0 2 2 2 2 4 4 8 8 0 0 3 3 4.5 4.5 8 8 9.5 9.5 13 13 20 20 9 9 18 18 19.5 19.5 23 23 24.5 24.5 28 28 41 41 36 36 48 48 51 51 56 56 59 59 64 64 80 80 ]&quot;</span>, &amp;mat_in_diff_ref);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">// backpropagate</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> mat_in_diff;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    c-&gt;<a class="code" href="structkaldi_1_1nnet1_1_1Component.html#a2923db03aecf226a39705a326ab2886e">Backpropagate</a>(mat_in, mat_out, mat_out_diff, &amp;mat_in_diff);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;mat_in_diff &quot;</span> &lt;&lt; mat_in_diff &lt;&lt; <span class="stringliteral">&quot; mat_in_diff_ref &quot;</span> &lt;&lt; mat_in_diff_ref;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">AssertEqual</a>(mat_in_diff, mat_in_diff_ref);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keyword">delete</span> c;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;} <span class="comment">// namespace nnet1</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;} <span class="comment">// namespace kaldi</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="nnet-component-test_8cc.html#ae66f6b31b5ad750f1fe042a706a4e3d4">  346</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="nnet-component-test_8cc.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keyword">using namespace </span>kaldi;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keyword">using namespace </span>kaldi::nnet1;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a> loop = 0; loop &lt; 2; loop++) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (loop == 0)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      CuDevice::Instantiate().SelectGpuId(<span class="stringliteral">&quot;no&quot;</span>); <span class="comment">// use no GPU</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      CuDevice::Instantiate().SelectGpuId(<span class="stringliteral">&quot;optional&quot;</span>); <span class="comment">// use GPU when available</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor"></span>    <span class="comment">// unit-tests :</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#af4899f1f41590d4bea3458e0b3d2fb2c">UnitTestLengthNorm</a>();</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#aa7a45ebc694c25541b89a6f0588ec5a6">UnitTestSimpleSentenceAveragingComponent</a>();</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#ad75205c73ff44b4cb018f774dfda2d73">UnitTestConvolutionalComponentUnity</a>();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a7eadc8ee4e77ebcee5ace87f7f9d9b5d">UnitTestConvolutionalComponent3x3</a>();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a72a6f835cff5791aefaf8d6dfb64c6cb">UnitTestMaxPoolingComponent</a>();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#a237d8dd66935ec58b5e4efad982d6c98">UnitTestConvolutional2DComponent</a>();</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#ae2138c171d2469d51120c8b10ea07e8d">UnitTestMaxPooling2DComponent</a>();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet1.html#ab23b9582e2a7ecfb4b70b3b00266e4cf">UnitTestAveragePooling2DComponent</a>();</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// end of unit-tests,</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span> (loop == 0)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;Tests without GPU use succeeded.&quot;</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;Tests with GPU use (if available) succeeded.&quot;</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor"></span>  CuDevice::Instantiate().PrintProfile();</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">return</span> 0; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="ttc" id="nnet-max-pooling-component_8h_html"><div class="ttname"><a href="nnet-max-pooling-component_8h.html">nnet-max-pooling-component.h</a></div></div>
<div class="ttc" id="nnet-max-pooling-2d-component_8h_html"><div class="ttname"><a href="nnet-max-pooling-2d-component_8h.html">nnet-max-pooling-2d-component.h</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet1_html_a237d8dd66935ec58b5e4efad982d6c98"><div class="ttname"><a href="namespacekaldi_1_1nnet1.html#a237d8dd66935ec58b5e4efad982d6c98">kaldi::nnet1::UnitTestConvolutional2DComponent</a></div><div class="ttdeci">void UnitTestConvolutional2DComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-test_8cc_source.html#l00311">nnet-component-test.cc:311</a></div></div>
<div class="ttc" id="classkaldi_1_1CuVector_html"><div class="ttname"><a href="classkaldi_1_1CuVector.html">kaldi::CuVector&lt; BaseFloat &gt;</a></div></div>
<div class="ttc" id="classkaldi_1_1CuMatrixBase_html_a0d1d1dad8675b40db92926168f186573"><div class="ttname"><a href="classkaldi_1_1CuMatrixBase.html#a0d1d1dad8675b40db92926168f186573">kaldi::CuMatrixBase::Row</a></div><div class="ttdeci">const CuSubVector&lt; Real &gt; Row(MatrixIndexT i) const </div><div class="ttdef"><b>Definition:</b> <a href="cu-matrix_8h_source.html#l00497">cu-matrix.h:497</a></div></div>
<div class="ttc" id="nnet-component-test_8cc_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="nnet-component-test_8cc.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-test_8cc_source.html#l00346">nnet-component-test.cc:346</a></div></div>
<div class="ttc" id="classkaldi_1_1CuVectorBase_html_ac6869c723f58973838a83d4b60d4b433"><div class="ttname"><a href="classkaldi_1_1CuVectorBase.html#ac6869c723f58973838a83d4b60d4b433">kaldi::CuVectorBase::Set</a></div><div class="ttdeci">void Set(Real value)</div><div class="ttdef"><b>Definition:</b> <a href="cu-vector_8cc_source.html#l00973">cu-vector.cc:973</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet1_1_1Component_html_a2923db03aecf226a39705a326ab2886e"><div class="ttname"><a href="structkaldi_1_1nnet1_1_1Component.html#a2923db03aecf226a39705a326ab2886e">kaldi::nnet1::Component::Backpropagate</a></div><div class="ttdeci">void Backpropagate(const CuMatrixBase&lt; BaseFloat &gt; &amp;in, const CuMatrixBase&lt; BaseFloat &gt; &amp;out, const CuMatrixBase&lt; BaseFloat &gt; &amp;out_diff, CuMatrix&lt; BaseFloat &gt; *in_diff)</div><div class="ttdoc">Perform backward pass propagation, out_diff -&gt; in_diff &#39;&amp;in&#39; and &#39;&amp;out&#39; will sometimes be unused...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component_8h_source.html#l00235">nnet-component.h:235</a></div></div>
<div class="ttc" id="common-utils_8h_html"><div class="ttname"><a href="common-utils_8h.html">common-utils.h</a></div></div>
<div class="ttc" id="classkaldi_1_1CuMatrix_html"><div class="ttname"><a href="classkaldi_1_1CuMatrix.html">kaldi::CuMatrix</a></div><div class="ttdoc">This class represents a matrix that&#39;s stored on the GPU if we have one, and in memory if not...</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00064">matrix-common.h:64</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet1_1_1Component_html_a31d604ff041030c5e62cf87cdbce97ea"><div class="ttname"><a href="structkaldi_1_1nnet1_1_1Component.html#a31d604ff041030c5e62cf87cdbce97ea">kaldi::nnet1::Component::Init</a></div><div class="ttdeci">static Component * Init(const std::string &amp;conf_line)</div><div class="ttdoc">Initialize component from a line in config file. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component_8cc_source.html#l00208">nnet-component.cc:208</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet1_html_aa7a45ebc694c25541b89a6f0588ec5a6"><div class="ttname"><a href="namespacekaldi_1_1nnet1.html#aa7a45ebc694c25541b89a6f0588ec5a6">kaldi::nnet1::UnitTestSimpleSentenceAveragingComponent</a></div><div class="ttdeci">void UnitTestSimpleSentenceAveragingComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-test_8cc_source.html#l00073">nnet-component-test.cc:73</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet1_1_1Component_html_a9a02ce735be66894f80466e1fd9a089c"><div class="ttname"><a href="structkaldi_1_1nnet1_1_1Component.html#a9a02ce735be66894f80466e1fd9a089c">kaldi::nnet1::Component::Read</a></div><div class="ttdeci">static Component * Read(std::istream &amp;is, bool binary)</div><div class="ttdoc">Read component from stream. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component_8cc_source.html#l00229">nnet-component.cc:229</a></div></div>
<div class="ttc" id="nnet-component_8h_html"><div class="ttname"><a href="nnet-component_8h.html">nnet-component.h</a></div></div>
<div class="ttc" id="nnet-convolutional-2d-component_8h_html"><div class="ttname"><a href="nnet-convolutional-2d-component_8h.html">nnet-convolutional-2d-component.h</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet1_html_a2e553e0c26ad5fde7fef7d48ed5110c1"><div class="ttname"><a href="namespacekaldi_1_1nnet1.html#a2e553e0c26ad5fde7fef7d48ed5110c1">kaldi::nnet1::ReadComponentFromString</a></div><div class="ttdeci">Component * ReadComponentFromString(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-test_8cc_source.html#l00046">nnet-component-test.cc:46</a></div></div>
<div class="ttc" id="classkaldi_1_1CuVectorBase_html_acb7f57affd1060151b6265c544ba8659"><div class="ttname"><a href="classkaldi_1_1CuVectorBase.html#acb7f57affd1060151b6265c544ba8659">kaldi::CuVectorBase::AddColSumMat</a></div><div class="ttdeci">void AddColSumMat(Real alpha, const CuMatrixBase&lt; Real &gt; &amp;mat, Real beta=1.0)</div><div class="ttdoc">Sum the columns of the matrix, add to vector. </div><div class="ttdef"><b>Definition:</b> <a href="cu-vector_8cc_source.html#l01128">cu-vector.cc:1128</a></div></div>
<div class="ttc" id="classkaldi_1_1CuMatrixBase_html_a93f1ecf679bf0ab28200c1cec33bd1ba"><div class="ttname"><a href="classkaldi_1_1CuMatrixBase.html#a93f1ecf679bf0ab28200c1cec33bd1ba">kaldi::CuMatrixBase::MulElements</a></div><div class="ttdeci">void MulElements(const CuMatrixBase&lt; Real &gt; &amp;A)</div><div class="ttdoc">Multiply two matrices elementwise: C = C .* A. </div><div class="ttdef"><b>Definition:</b> <a href="cu-matrix_8cc_source.html#l00637">cu-matrix.cc:637</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet1_html_af4899f1f41590d4bea3458e0b3d2fb2c"><div class="ttname"><a href="namespacekaldi_1_1nnet1.html#af4899f1f41590d4bea3458e0b3d2fb2c">kaldi::nnet1::UnitTestLengthNorm</a></div><div class="ttdeci">void UnitTestLengthNorm()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-test_8cc_source.html#l00055">nnet-component-test.cc:55</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet1_1_1Component_html_aaa5db876de71ec16a23afbf1fbd76b43"><div class="ttname"><a href="structkaldi_1_1nnet1_1_1Component.html#aaa5db876de71ec16a23afbf1fbd76b43">kaldi::nnet1::Component::Propagate</a></div><div class="ttdeci">void Propagate(const CuMatrixBase&lt; BaseFloat &gt; &amp;in, CuMatrix&lt; BaseFloat &gt; *out)</div><div class="ttdoc">Perform forward pass propagation Input-&gt;Output. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component_8h_source.html#l00221">nnet-component.h:221</a></div></div>
<div class="ttc" id="classkaldi_1_1CuVectorBase_html_a36c241f895530869d9e5a3c7bdedb25e"><div class="ttname"><a href="classkaldi_1_1CuVectorBase.html#a36c241f895530869d9e5a3c7bdedb25e">kaldi::CuVectorBase::ApplyPow</a></div><div class="ttdeci">void ApplyPow(Real power)</div><div class="ttdef"><b>Definition:</b> <a href="cu-vector_8cc_source.html#l00367">cu-vector.cc:367</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet1_html_ab23b9582e2a7ecfb4b70b3b00266e4cf"><div class="ttname"><a href="namespacekaldi_1_1nnet1.html#ab23b9582e2a7ecfb4b70b3b00266e4cf">kaldi::nnet1::UnitTestAveragePooling2DComponent</a></div><div class="ttdeci">void UnitTestAveragePooling2DComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-test_8cc_source.html#l00273">nnet-component-test.cc:273</a></div></div>
<div class="ttc" id="nnet-convolutional-component_8h_html"><div class="ttname"><a href="nnet-convolutional-component_8h.html">nnet-convolutional-component.h</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet1_html_ad75205c73ff44b4cb018f774dfda2d73"><div class="ttname"><a href="namespacekaldi_1_1nnet1.html#ad75205c73ff44b4cb018f774dfda2d73">kaldi::nnet1::UnitTestConvolutionalComponentUnity</a></div><div class="ttdeci">void UnitTestConvolutionalComponentUnity()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-test_8cc_source.html#l00099">nnet-component-test.cc:99</a></div></div>
<div class="ttc" id="nnet-nnet_8h_html"><div class="ttname"><a href="nnet-nnet_8h.html">nnet-nnet.h</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet1_html_ae2138c171d2469d51120c8b10ea07e8d"><div class="ttname"><a href="namespacekaldi_1_1nnet1.html#ae2138c171d2469d51120c8b10ea07e8d">kaldi::nnet1::UnitTestMaxPooling2DComponent</a></div><div class="ttdeci">void UnitTestMaxPooling2DComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-test_8cc_source.html#l00236">nnet-component-test.cc:236</a></div></div>
<div class="ttc" id="classkaldi_1_1CuMatrix_html_a8e7d2790fc7e94fe9780ccc937de1270"><div class="ttname"><a href="classkaldi_1_1CuMatrix.html#a8e7d2790fc7e94fe9780ccc937de1270">kaldi::CuMatrix::Read</a></div><div class="ttdeci">void Read(std::istream &amp;is, bool binary)</div><div class="ttdoc">I/O functions. </div><div class="ttdef"><b>Definition:</b> <a href="cu-matrix_8cc_source.html#l00444">cu-matrix.cc:444</a></div></div>
<div class="ttc" id="nnet-average-pooling-2d-component_8h_html"><div class="ttname"><a href="nnet-average-pooling-2d-component_8h.html">nnet-average-pooling-2d-component.h</a></div></div>
<div class="ttc" id="namespacekaldi_html_aeb6ba6085493e3f15358e49751342177"><div class="ttname"><a href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">kaldi::AssertEqual</a></div><div class="ttdeci">static void AssertEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">assert abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)) </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00273">kaldi-math.h:273</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet1_1_1Component_html"><div class="ttname"><a href="structkaldi_1_1nnet1_1_1Component.html">kaldi::nnet1::Component</a></div><div class="ttdoc">Abstract class, building block of the network. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component_8cc_source.html#l00054">nnet-component.cc:54</a></div></div>
<div class="ttc" id="classkaldi_1_1CuMatrixBase_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1CuMatrixBase.html#ab204078beff8151c95d1828544acf92c">kaldi::CuMatrixBase::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Dimensions. </div><div class="ttdef"><b>Definition:</b> <a href="cu-matrix_8h_source.html#l00195">cu-matrix.h:195</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet1_html_a7eadc8ee4e77ebcee5ace87f7f9d9b5d"><div class="ttname"><a href="namespacekaldi_1_1nnet1.html#a7eadc8ee4e77ebcee5ace87f7f9d9b5d">kaldi::nnet1::UnitTestConvolutionalComponent3x3</a></div><div class="ttdeci">void UnitTestConvolutionalComponent3x3()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-test_8cc_source.html#l00129">nnet-component-test.cc:129</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet1_html_a72a6f835cff5791aefaf8d6dfb64c6cb"><div class="ttname"><a href="namespacekaldi_1_1nnet1.html#a72a6f835cff5791aefaf8d6dfb64c6cb">kaldi::nnet1::UnitTestMaxPoolingComponent</a></div><div class="ttdeci">void UnitTestMaxPoolingComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-test_8cc_source.html#l00171">nnet-component-test.cc:171</a></div></div>
<div class="ttc" id="group__error__group_html_gaf8fb55454306b60c9c1e07a6ef9d341a"><div class="ttname"><a href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a></div><div class="ttdeci">#define KALDI_LOG</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00164">kaldi-error.h:164</a></div></div>
<div class="ttc" id="classkaldi_1_1CuMatrixBase_html_ac6869c723f58973838a83d4b60d4b433"><div class="ttname"><a href="classkaldi_1_1CuMatrixBase.html#ac6869c723f58973838a83d4b60d4b433">kaldi::CuMatrixBase::Set</a></div><div class="ttdeci">void Set(Real value)</div><div class="ttdef"><b>Definition:</b> <a href="cu-matrix_8cc_source.html#l00480">cu-matrix.cc:480</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet1_html_a6ef4f68255ad8358483efbaa40699291"><div class="ttname"><a href="namespacekaldi_1_1nnet1.html#a6ef4f68255ad8358483efbaa40699291">kaldi::nnet1::ReadCuMatrixFromString</a></div><div class="ttdeci">void ReadCuMatrixFromString(const std::string &amp;s, CuMatrix&lt; Real &gt; *m)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-test_8cc_source.html#l00041">nnet-component-test.cc:41</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_4e6213e10bb3ed13420949212be73c8e.html">nnet</a></li><li class="navelem"><a class="el" href="nnet-component-test_8cc.html">nnet-component-test.cc</a></li>
    <li class="footer">Generated on Thu Apr 28 2016 15:42:31 for Kaldi by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
