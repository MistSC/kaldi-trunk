<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: %Matrix and vector classes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__matrix__group.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Matrix and vector classes</div>  </div>
</div><!--header-->
<div class="contents">

<p>For an overview of the matrix library, see <a class="el" href="matrix.html">The Kaldi Matrix library</a>.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Matrix and vector classes:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__matrix__group.png" border="0" alt="" usemap="#group____matrix____group"/>
<map name="group____matrix____group" id="group____matrix____group">
<area shape="rect" id="node1" href="group__matrix__funcs__misc.html" title="Miscellaneous matrix\l/vector library functions\l and classes" alt="" coords="200,5,371,61"/><area shape="rect" id="node2" href="group__matrix__funcs__scalar.html" title="Matrix&#45;vector functions\l returning scalars" alt="" coords="201,85,369,126"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__matrix__funcs__scalar"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__matrix__funcs__scalar.html">Matrix-vector functions returning scalars</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__matrix__funcs__misc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__matrix__funcs__misc.html">Miscellaneous matrix/vector library functions and classes</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CompressedMatrix.html">CompressedMatrix</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class does lossy compression of a matrix.  <a href="classkaldi_1_1CompressedMatrix.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase&lt; Real &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base class which provides matrix operations not involving resizing or allocation.  <a href="classkaldi_1_1MatrixBase.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1Matrix.html">Matrix&lt; Real &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class for storing matrices.  <a href="classkaldi_1_1Matrix.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1VectorBase.html">VectorBase&lt; Real &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides a vector abstraction class.  <a href="classkaldi_1_1VectorBase.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1Vector.html">Vector&lt; Real &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class representing a vector.  <a href="classkaldi_1_1Vector.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1SubVector.html">SubVector&lt; Real &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a non-allocating general vector which can be defined as a sub-vector of higher-level vector [or as the row of a matrix].  <a href="classkaldi_1_1SubVector.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1PackedMatrix.html">PackedMatrix&lt; Real &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packed matrix: base class for triangular and symmetric matrices.  <a href="classkaldi_1_1PackedMatrix.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1SpMatrix.html">SpMatrix&lt; Real &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packed symetric matrix class.  <a href="classkaldi_1_1SpMatrix.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1SparseVector.html">SparseVector&lt; Real &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1SparseMatrix.html">SparseMatrix&lt; Real &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1GeneralMatrix.html">GeneralMatrix</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is a wrapper that enables you to store a matrix in one of three forms: either as a <a class="el" href="classkaldi_1_1Matrix.html">Matrix&lt;BaseFloat&gt;</a>, or a <a class="el" href="classkaldi_1_1CompressedMatrix.html" title="This class does lossy compression of a matrix. ">CompressedMatrix</a>, or a <a class="el" href="classkaldi_1_1SparseMatrix.html">SparseMatrix&lt;BaseFloat&gt;</a>.  <a href="classkaldi_1_1GeneralMatrix.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1TpMatrix.html">TpMatrix&lt; Real &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packed symetric matrix class.  <a href="classkaldi_1_1TpMatrix.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga1b44c0ec7cf5c76c910fd41756787be3"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__matrix__group.html#ga1b44c0ec7cf5c76c910fd41756787be3">GeneralMatrixType</a> { <a class="el" href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3af872badd576ccf234e1bccf54f263863">kFullMatrix</a>, 
<a class="el" href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3a87ea862fefb9f41cf20a2de202b4a9f9">kCompressedMatrix</a>, 
<a class="el" href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3aef253b40b2456ff5af4ad398301f8aef">kSparseMatrix</a>
 }</td></tr>
<tr class="separator:ga1b44c0ec7cf5c76c910fd41756787be3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2f0533da39e428dc81ddd49807a53c35"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:ga2f0533da39e428dc81ddd49807a53c35"><td class="memTemplItemLeft" align="right" valign="top">Real&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__matrix__group.html#ga2f0533da39e428dc81ddd49807a53c35">VecSvec</a> (const VectorBase&lt; Real &gt; &amp;vec, const SparseVector&lt; Real &gt; &amp;svec)</td></tr>
<tr class="separator:ga2f0533da39e428dc81ddd49807a53c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga488f773f3606a469f29a1df41d6debb7"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:ga488f773f3606a469f29a1df41d6debb7"><td class="memTemplItemLeft" align="right" valign="top">Real&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__matrix__group.html#ga488f773f3606a469f29a1df41d6debb7">TraceMatSmat</a> (const MatrixBase&lt; Real &gt; &amp;A, const SparseMatrix&lt; Real &gt; &amp;B, MatrixTransposeType trans)</td></tr>
<tr class="separator:ga488f773f3606a469f29a1df41d6debb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac4e482ffba86badf4f9bf2c7fa6e5214"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__matrix__group.html#gac4e482ffba86badf4f9bf2c7fa6e5214">AppendGeneralMatrixRows</a> (const std::vector&lt; const GeneralMatrix * &gt; &amp;src, GeneralMatrix *mat)</td></tr>
<tr class="memdesc:gac4e482ffba86badf4f9bf2c7fa6e5214"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends all the matrix rows of a list of GeneralMatrixes, to get a single <a class="el" href="classkaldi_1_1GeneralMatrix.html" title="This class is a wrapper that enables you to store a matrix in one of three forms: either as a Matrix&lt;...">GeneralMatrix</a>.  <a href="#gac4e482ffba86badf4f9bf2c7fa6e5214">More...</a><br/></td></tr>
<tr class="separator:gac4e482ffba86badf4f9bf2c7fa6e5214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98159d7aaf1d9cb5bc5b0c126a6deede"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:ga98159d7aaf1d9cb5bc5b0c126a6deede"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__matrix__group.html#ga98159d7aaf1d9cb5bc5b0c126a6deede">FilterSparseMatrixRows</a> (const SparseMatrix&lt; Real &gt; &amp;in, const std::vector&lt; bool &gt; &amp;keep_rows, SparseMatrix&lt; Real &gt; *out)</td></tr>
<tr class="memdesc:ga98159d7aaf1d9cb5bc5b0c126a6deede"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs a SparseMatrix&lt;Real&gt; containing only the rows r of "in" such that keep_rows[r] == true.  <a href="#ga98159d7aaf1d9cb5bc5b0c126a6deede">More...</a><br/></td></tr>
<tr class="separator:ga98159d7aaf1d9cb5bc5b0c126a6deede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacec876d599796ffe6aa6d0a95715101c"><td class="memTemplParams" colspan="2">template&lt;typename Real &gt; </td></tr>
<tr class="memitem:gacec876d599796ffe6aa6d0a95715101c"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__matrix__group.html#gacec876d599796ffe6aa6d0a95715101c">FilterMatrixRows</a> (const Matrix&lt; Real &gt; &amp;in, const std::vector&lt; bool &gt; &amp;keep_rows, Matrix&lt; Real &gt; *out)</td></tr>
<tr class="memdesc:gacec876d599796ffe6aa6d0a95715101c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs a Matrix&lt;Real&gt; containing only the rows r of "in" such that keep_keep_rows[r] == true.  <a href="#gacec876d599796ffe6aa6d0a95715101c">More...</a><br/></td></tr>
<tr class="separator:gacec876d599796ffe6aa6d0a95715101c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace78c1517a5f36a28b34df3c51d8e4bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__matrix__group.html#gace78c1517a5f36a28b34df3c51d8e4bc">FilterCompressedMatrixRows</a> (const CompressedMatrix &amp;in, const std::vector&lt; bool &gt; &amp;keep_rows, Matrix&lt; BaseFloat &gt; *out)</td></tr>
<tr class="memdesc:gace78c1517a5f36a28b34df3c51d8e4bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs a Matrix&lt;Real&gt; containing only the rows r of "in" such that keep_rows[r] == true.  <a href="#gace78c1517a5f36a28b34df3c51d8e4bc">More...</a><br/></td></tr>
<tr class="separator:gace78c1517a5f36a28b34df3c51d8e4bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad382f719d6c9fb0f63e78f686c8a04b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__matrix__group.html#gad382f719d6c9fb0f63e78f686c8a04b8">FilterGeneralMatrixRows</a> (const GeneralMatrix &amp;in, const std::vector&lt; bool &gt; &amp;keep_rows, GeneralMatrix *out)</td></tr>
<tr class="memdesc:gad382f719d6c9fb0f63e78f686c8a04b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs a <a class="el" href="classkaldi_1_1GeneralMatrix.html" title="This class is a wrapper that enables you to store a matrix in one of three forms: either as a Matrix&lt;...">GeneralMatrix</a> containing only the rows r of "in" such that keep_rows[r] == true.  <a href="#gad382f719d6c9fb0f63e78f686c8a04b8">More...</a><br/></td></tr>
<tr class="separator:gad382f719d6c9fb0f63e78f686c8a04b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>For an overview of the matrix library, see <a class="el" href="matrix.html">The Kaldi Matrix library</a>. </p>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga1b44c0ec7cf5c76c910fd41756787be3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum GeneralMatrixType</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="gga1b44c0ec7cf5c76c910fd41756787be3af872badd576ccf234e1bccf54f263863"></a>kFullMatrix</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga1b44c0ec7cf5c76c910fd41756787be3a87ea862fefb9f41cf20a2de202b4a9f9"></a>kCompressedMatrix</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga1b44c0ec7cf5c76c910fd41756787be3aef253b40b2456ff5af4ad398301f8aef"></a>kSparseMatrix</em>&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="sparse-matrix_8h_source.html#l00216">216</a> of file <a class="el" href="sparse-matrix_8h_source.html">sparse-matrix.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                       {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3af872badd576ccf234e1bccf54f263863">kFullMatrix</a>,</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <a class="code" href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3a87ea862fefb9f41cf20a2de202b4a9f9">kCompressedMatrix</a>,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <a class="code" href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3aef253b40b2456ff5af4ad398301f8aef">kSparseMatrix</a></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;};</div>
<div class="ttc" id="group__matrix__group_html_gga1b44c0ec7cf5c76c910fd41756787be3af872badd576ccf234e1bccf54f263863"><div class="ttname"><a href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3af872badd576ccf234e1bccf54f263863">kaldi::kFullMatrix</a></div><div class="ttdef"><b>Definition:</b> <a href="sparse-matrix_8h_source.html#l00217">sparse-matrix.h:217</a></div></div>
<div class="ttc" id="group__matrix__group_html_gga1b44c0ec7cf5c76c910fd41756787be3aef253b40b2456ff5af4ad398301f8aef"><div class="ttname"><a href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3aef253b40b2456ff5af4ad398301f8aef">kaldi::kSparseMatrix</a></div><div class="ttdef"><b>Definition:</b> <a href="sparse-matrix_8h_source.html#l00219">sparse-matrix.h:219</a></div></div>
<div class="ttc" id="group__matrix__group_html_gga1b44c0ec7cf5c76c910fd41756787be3a87ea862fefb9f41cf20a2de202b4a9f9"><div class="ttname"><a href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3a87ea862fefb9f41cf20a2de202b4a9f9">kaldi::kCompressedMatrix</a></div><div class="ttdef"><b>Definition:</b> <a href="sparse-matrix_8h_source.html#l00218">sparse-matrix.h:218</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gac4e482ffba86badf4f9bf2c7fa6e5214"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AppendGeneralMatrixRows </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; const GeneralMatrix * &gt; &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GeneralMatrix *&#160;</td>
          <td class="paramname"><em>mat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Appends all the matrix rows of a list of GeneralMatrixes, to get a single <a class="el" href="classkaldi_1_1GeneralMatrix.html" title="This class is a wrapper that enables you to store a matrix in one of three forms: either as a Matrix&lt;...">GeneralMatrix</a>. </p>
<p>Preserves sparsity if all inputs were sparse (or empty). Does not preserve compression, if inputs were compressed; you have to re-compress manually, if that's what you need. </p>

<p>Definition at line <a class="el" href="sparse-matrix_8cc_source.html#l00818">818</a> of file <a class="el" href="sparse-matrix_8cc_source.html">sparse-matrix.cc</a>.</p>

<p>References <a class="el" href="sparse-matrix_8cc_source.html#l00579">SparseMatrix&lt; Real &gt;::AppendSparseMatrixRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00646">GeneralMatrix::Clear()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00736">GeneralMatrix::CopyToMat()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00160">KALDI_ERR</a>, <a class="el" href="sparse-matrix_8h_source.html#l00219">kaldi::kSparseMatrix</a>, <a class="el" href="matrix-common_8h_source.html#l00037">kaldi::kUndefined</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00697">GeneralMatrix::NumCols()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00687">GeneralMatrix::NumRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00774">GeneralMatrix::SwapFullMatrix()</a>, and <a class="el" href="sparse-matrix_8cc_source.html#l00755">GeneralMatrix::SwapSparseMatrix()</a>.</p>

<p>Referenced by <a class="el" href="nnet-example-utils_8cc_source.html#l00085">kaldi::nnet3::MergeIo()</a>.</p>
<div class="fragment"><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                                                 {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  mat-&gt;Clear();</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> size = src.size();</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keywordflow">if</span> (size == 0)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keywordtype">bool</span> all_sparse = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; size; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">if</span> (src[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;Type() != <a class="code" href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3aef253b40b2456ff5af4ad398301f8aef">kSparseMatrix</a> &amp;&amp; src[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;NumRows() != 0) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      all_sparse = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="keywordflow">if</span> (all_sparse) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    std::vector&lt;SparseMatrix&lt;BaseFloat&gt; &gt; sparse_mats(size);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; size; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      sparse_mats[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = src[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;GetSparseMatrix();</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    SparseMatrix&lt;BaseFloat&gt; appended_mat;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    appended_mat.AppendSparseMatrixRows(&amp;sparse_mats);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    mat-&gt;SwapSparseMatrix(&amp;appended_mat);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> tot_rows = 0, num_cols = -1;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; size; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keyword">const</span> GeneralMatrix &amp;src_mat = *(src[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> src_rows = src_mat.NumRows(), src_cols = src_mat.NumCols();</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <span class="keywordflow">if</span> (src_rows != 0) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        tot_rows += src_rows;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keywordflow">if</span> (num_cols == -1) num_cols = src_cols;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num_cols != src_cols)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;          <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Appending rows of matrices with inconsistent num-cols: &quot;</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                    &lt;&lt; num_cols &lt;&lt; <span class="stringliteral">&quot; vs. &quot;</span> &lt;&lt; src_cols;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    Matrix&lt;BaseFloat&gt; appended_mat(tot_rows, num_cols, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> row_offset = 0;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; size; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keyword">const</span> GeneralMatrix &amp;src_mat = *(src[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> src_rows = src_mat.NumRows();</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keywordflow">if</span> (src_rows != 0) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        SubMatrix&lt;BaseFloat&gt; dest_submat(appended_mat, row_offset, src_rows,</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                                         0, num_cols);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        src_mat.CopyToMat(&amp;dest_submat);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        row_offset += src_rows;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(row_offset == tot_rows);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    mat-&gt;SwapFullMatrix(&amp;appended_mat);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  }</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="group__matrix__group_html_gga1b44c0ec7cf5c76c910fd41756787be3aef253b40b2456ff5af4ad398301f8aef"><div class="ttname"><a href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3aef253b40b2456ff5af4ad398301f8aef">kaldi::kSparseMatrix</a></div><div class="ttdef"><b>Definition:</b> <a href="sparse-matrix_8h_source.html#l00219">sparse-matrix.h:219</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00160">kaldi-error.h:160</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gace78c1517a5f36a28b34df3c51d8e4bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FilterCompressedMatrixRows </td>
          <td>(</td>
          <td class="paramtype">const CompressedMatrix &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; bool &gt; &amp;&#160;</td>
          <td class="paramname"><em>keep_rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Matrix&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Outputs a Matrix&lt;Real&gt; containing only the rows r of "in" such that keep_rows[r] == true. </p>
<p>keep_rows.size() must equal in.NumRows(), and rows must contain at least one "true" element. </p>

<p>Definition at line <a class="el" href="sparse-matrix_8cc_source.html#l00868">868</a> of file <a class="el" href="sparse-matrix_8cc_source.html">sparse-matrix.cc</a>.</p>

<p>References <a class="el" href="compressed-matrix_8cc_source.html#l00540">CompressedMatrix::CopyRowToVec()</a>, <a class="el" href="compressed-matrix_8cc_source.html#l00486">CompressedMatrix::CopyToMat()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00912">kaldi::FilterMatrixRows()</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00160">KALDI_ERR</a>, <a class="el" href="matrix-common_8h_source.html#l00037">kaldi::kUndefined</a>, <a class="el" href="compressed-matrix_8h_source.html#l00092">CompressedMatrix::NumCols()</a>, <a class="el" href="compressed-matrix_8h_source.html#l00088">CompressedMatrix::NumRows()</a>, and <a class="el" href="kaldi-matrix_8cc_source.html#l00692">Matrix&lt; Real &gt;::Resize()</a>.</p>

<p>Referenced by <a class="el" href="sparse-matrix_8cc_source.html#l00990">kaldi::FilterGeneralMatrixRows()</a>.</p>
<div class="fragment"><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                                                        {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(keep_rows.size() == <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(in.NumRows()));</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_kept_rows = 0;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  std::vector&lt;bool&gt;::const_iterator iter = keep_rows.begin(),</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                                     end = keep_rows.end();</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">for</span> (; iter != end; ++iter)</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (*iter)</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      num_kept_rows++;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordflow">if</span> (num_kept_rows == 0)</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;No kept rows&quot;</span>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordflow">if</span> (num_kept_rows == static_cast&lt;int32&gt;(keep_rows.size())) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    out-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(in.NumRows(), in.NumCols(), <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    in.CopyToMat(out);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> heuristic = 0.33;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">// should be &gt; 0 and &lt; 1.0.  represents the performance hit we get from</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// iterating row-wise versus column-wise in compressed-matrix uncompression.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> (num_kept_rows &gt; heuristic * in.NumRows()) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="comment">// if quite a few of the the rows are kept, it may be more efficient</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="comment">// to uncompress the entire compressed matrix, since per-column operation</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="comment">// is more efficient.</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    Matrix&lt;BaseFloat&gt; full_mat(in);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <a class="code" href="namespacekaldi.html#a3a7a260d910c8c4820202eb9b97e45c0">FilterMatrixRows</a>(full_mat, keep_rows, out);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    out-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(num_kept_rows, in.NumCols(), <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    iter = keep_rows.begin();</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> out_row = 0;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> in_row = 0; iter != end; ++iter, ++in_row) {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <span class="keywordflow">if</span> (*iter) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        SubVector&lt;BaseFloat&gt; dest(*out, out_row);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        in.CopyRowToVec(in_row, &amp;dest);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        out_row++;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    }</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(out_row == num_kept_rows);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="namespacekaldi_html_a3a7a260d910c8c4820202eb9b97e45c0"><div class="ttname"><a href="namespacekaldi.html#a3a7a260d910c8c4820202eb9b97e45c0">kaldi::FilterMatrixRows</a></div><div class="ttdeci">template void FilterMatrixRows(const Matrix&lt; double &gt; &amp;in, const std::vector&lt; bool &gt; &amp;keep_rows, Matrix&lt; double &gt; *out)</div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00160">kaldi-error.h:160</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_aaabb78f23b01b8ac551b3cc56f602be4"><div class="ttname"><a href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00692">kaldi-matrix.cc:692</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gad382f719d6c9fb0f63e78f686c8a04b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FilterGeneralMatrixRows </td>
          <td>(</td>
          <td class="paramtype">const GeneralMatrix &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; bool &gt; &amp;&#160;</td>
          <td class="paramname"><em>keep_rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GeneralMatrix *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Outputs a <a class="el" href="classkaldi_1_1GeneralMatrix.html" title="This class is a wrapper that enables you to store a matrix in one of three forms: either as a Matrix&lt;...">GeneralMatrix</a> containing only the rows r of "in" such that keep_rows[r] == true. </p>
<p>keep_rows.size() must equal in.NumRows(), and keep_rows must contain at least one "true" element. If in.Type() is kCompressedMatrix, the result will not be compressed; otherwise, the type is preserved. </p>

<p>Definition at line <a class="el" href="sparse-matrix_8cc_source.html#l00990">990</a> of file <a class="el" href="sparse-matrix_8cc_source.html">sparse-matrix.cc</a>.</p>

<p>References <a class="el" href="sparse-matrix_8cc_source.html#l00646">GeneralMatrix::Clear()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00868">kaldi::FilterCompressedMatrixRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00912">kaldi::FilterMatrixRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00952">kaldi::FilterSparseMatrixRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00761">GeneralMatrix::GetCompressedMatrix()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00767">GeneralMatrix::GetFullMatrix()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00749">GeneralMatrix::GetSparseMatrix()</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00160">KALDI_ERR</a>, <a class="el" href="sparse-matrix_8h_source.html#l00218">kaldi::kCompressedMatrix</a>, <a class="el" href="sparse-matrix_8h_source.html#l00217">kaldi::kFullMatrix</a>, <a class="el" href="sparse-matrix_8h_source.html#l00219">kaldi::kSparseMatrix</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00687">GeneralMatrix::NumRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00774">GeneralMatrix::SwapFullMatrix()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00755">GeneralMatrix::SwapSparseMatrix()</a>, and <a class="el" href="sparse-matrix_8cc_source.html#l00678">GeneralMatrix::Type()</a>.</p>

<p>Referenced by <a class="el" href="nnet3-copy-egs_8cc_source.html#l00111">kaldi::nnet3::FilterExample()</a>.</p>
<div class="fragment"><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                                                 {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  out-&gt;Clear();</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(keep_rows.size() == <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(in.NumRows()));</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_kept_rows = 0;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  std::vector&lt;bool&gt;::const_iterator iter = keep_rows.begin(),</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                                     end = keep_rows.end();</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="keywordflow">for</span> (; iter != end; ++iter)</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="keywordflow">if</span> (*iter)</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      num_kept_rows++;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordflow">if</span> (num_kept_rows == 0)</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;No kept rows&quot;</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="keywordflow">if</span> (num_kept_rows == static_cast&lt;int32&gt;(keep_rows.size())) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    *out = in;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  }</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordflow">switch</span> (in.Type()) {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3a87ea862fefb9f41cf20a2de202b4a9f9">kCompressedMatrix</a>: {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keyword">const</span> CompressedMatrix &amp;cmat = in.GetCompressedMatrix();</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      Matrix&lt;BaseFloat&gt; full_mat;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <a class="code" href="group__matrix__group.html#gace78c1517a5f36a28b34df3c51d8e4bc">FilterCompressedMatrixRows</a>(cmat, keep_rows, &amp;full_mat);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      out-&gt;SwapFullMatrix(&amp;full_mat);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3aef253b40b2456ff5af4ad398301f8aef">kSparseMatrix</a>: {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="keyword">const</span> SparseMatrix&lt;BaseFloat&gt; &amp;smat = in.GetSparseMatrix();</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      SparseMatrix&lt;BaseFloat&gt; smat_out;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      <a class="code" href="namespacekaldi.html#a37b80d0509030c5679a54ffb7a2e4350">FilterSparseMatrixRows</a>(smat, keep_rows, &amp;smat_out);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      out-&gt;SwapSparseMatrix(&amp;smat_out);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3af872badd576ccf234e1bccf54f263863">kFullMatrix</a>: {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <span class="keyword">const</span> Matrix&lt;BaseFloat&gt; &amp;full_mat = in.GetFullMatrix();</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      Matrix&lt;BaseFloat&gt; full_mat_out;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <a class="code" href="namespacekaldi.html#a3a7a260d910c8c4820202eb9b97e45c0">FilterMatrixRows</a>(full_mat, keep_rows, &amp;full_mat_out);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      out-&gt;SwapFullMatrix(&amp;full_mat_out);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    }</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Invalid general-matrix type.&quot;</span>;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;}</div>
<div class="ttc" id="group__matrix__group_html_gga1b44c0ec7cf5c76c910fd41756787be3af872badd576ccf234e1bccf54f263863"><div class="ttname"><a href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3af872badd576ccf234e1bccf54f263863">kaldi::kFullMatrix</a></div><div class="ttdef"><b>Definition:</b> <a href="sparse-matrix_8h_source.html#l00217">sparse-matrix.h:217</a></div></div>
<div class="ttc" id="group__matrix__group_html_gga1b44c0ec7cf5c76c910fd41756787be3aef253b40b2456ff5af4ad398301f8aef"><div class="ttname"><a href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3aef253b40b2456ff5af4ad398301f8aef">kaldi::kSparseMatrix</a></div><div class="ttdef"><b>Definition:</b> <a href="sparse-matrix_8h_source.html#l00219">sparse-matrix.h:219</a></div></div>
<div class="ttc" id="namespacekaldi_html_a3a7a260d910c8c4820202eb9b97e45c0"><div class="ttname"><a href="namespacekaldi.html#a3a7a260d910c8c4820202eb9b97e45c0">kaldi::FilterMatrixRows</a></div><div class="ttdeci">template void FilterMatrixRows(const Matrix&lt; double &gt; &amp;in, const std::vector&lt; bool &gt; &amp;keep_rows, Matrix&lt; double &gt; *out)</div></div>
<div class="ttc" id="group__matrix__group_html_gga1b44c0ec7cf5c76c910fd41756787be3a87ea862fefb9f41cf20a2de202b4a9f9"><div class="ttname"><a href="group__matrix__group.html#gga1b44c0ec7cf5c76c910fd41756787be3a87ea862fefb9f41cf20a2de202b4a9f9">kaldi::kCompressedMatrix</a></div><div class="ttdef"><b>Definition:</b> <a href="sparse-matrix_8h_source.html#l00218">sparse-matrix.h:218</a></div></div>
<div class="ttc" id="namespacekaldi_html_a37b80d0509030c5679a54ffb7a2e4350"><div class="ttname"><a href="namespacekaldi.html#a37b80d0509030c5679a54ffb7a2e4350">kaldi::FilterSparseMatrixRows</a></div><div class="ttdeci">template void FilterSparseMatrixRows(const SparseMatrix&lt; double &gt; &amp;in, const std::vector&lt; bool &gt; &amp;keep_rows, SparseMatrix&lt; double &gt; *out)</div></div>
<div class="ttc" id="group__matrix__group_html_gace78c1517a5f36a28b34df3c51d8e4bc"><div class="ttname"><a href="group__matrix__group.html#gace78c1517a5f36a28b34df3c51d8e4bc">kaldi::FilterCompressedMatrixRows</a></div><div class="ttdeci">void FilterCompressedMatrixRows(const CompressedMatrix &amp;in, const std::vector&lt; bool &gt; &amp;keep_rows, Matrix&lt; BaseFloat &gt; *out)</div><div class="ttdoc">Outputs a Matrix&lt;Real&gt; containing only the rows r of &quot;in&quot; such that keep_rows[r] == true...</div><div class="ttdef"><b>Definition:</b> <a href="sparse-matrix_8cc_source.html#l00868">sparse-matrix.cc:868</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00160">kaldi-error.h:160</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gacec876d599796ffe6aa6d0a95715101c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FilterMatrixRows </td>
          <td>(</td>
          <td class="paramtype">const Matrix&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; bool &gt; &amp;&#160;</td>
          <td class="paramname"><em>keep_rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Matrix&lt; Real &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Outputs a Matrix&lt;Real&gt; containing only the rows r of "in" such that keep_keep_rows[r] == true. </p>
<p>keep_rows.size() must equal in.NumRows(), and keep_rows must contain at least one "true" element. </p>

<p>Definition at line <a class="el" href="sparse-matrix_8cc_source.html#l00912">912</a> of file <a class="el" href="sparse-matrix_8cc_source.html">sparse-matrix.cc</a>.</p>

<p>References <a class="el" href="kaldi-vector_8cc_source.html#l00227">VectorBase&lt; Real &gt;::CopyFromVec()</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00160">KALDI_ERR</a>, <a class="el" href="matrix-common_8h_source.html#l00037">kaldi::kUndefined</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>, and <a class="el" href="kaldi-matrix_8cc_source.html#l00692">Matrix&lt; Real &gt;::Resize()</a>.</p>

<p>Referenced by <a class="el" href="sparse-matrix_8cc_source.html#l00868">kaldi::FilterCompressedMatrixRows()</a>, and <a class="el" href="sparse-matrix_8cc_source.html#l00990">kaldi::FilterGeneralMatrixRows()</a>.</p>
<div class="fragment"><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                                         {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(keep_rows.size() == <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(in.NumRows()));</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_kept_rows = 0;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  std::vector&lt;bool&gt;::const_iterator iter = keep_rows.begin(),</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                                     end = keep_rows.end();</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keywordflow">for</span> (; iter != end; ++iter)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">if</span> (*iter)</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      num_kept_rows++;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keywordflow">if</span> (num_kept_rows == 0)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;No kept rows&quot;</span>;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keywordflow">if</span> (num_kept_rows == static_cast&lt;int32&gt;(keep_rows.size())) {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    *out = in;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  out-&gt;Resize(num_kept_rows, in.NumCols(), <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  iter = keep_rows.begin();</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> out_row = 0;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> in_row = 0; iter != end; ++iter, ++in_row) {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">if</span> (*iter) {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      SubVector&lt;Real&gt; src(in, in_row);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      SubVector&lt;Real&gt; dest(*out, out_row);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      dest.CopyFromVec(src);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      out_row++;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(out_row == num_kept_rows);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00160">kaldi-error.h:160</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga98159d7aaf1d9cb5bc5b0c126a6deede"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FilterSparseMatrixRows </td>
          <td>(</td>
          <td class="paramtype">const SparseMatrix&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; bool &gt; &amp;&#160;</td>
          <td class="paramname"><em>keep_rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SparseMatrix&lt; Real &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Outputs a SparseMatrix&lt;Real&gt; containing only the rows r of "in" such that keep_rows[r] == true. </p>
<p>keep_rows.size() must equal in.NumRows(), and rows must contain at least one "true" element. </p>

<p>Definition at line <a class="el" href="sparse-matrix_8cc_source.html#l00952">952</a> of file <a class="el" href="sparse-matrix_8cc_source.html">sparse-matrix.cc</a>.</p>

<p>References <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00160">KALDI_ERR</a>, <a class="el" href="matrix-common_8h_source.html#l00037">kaldi::kUndefined</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00290">SparseMatrix&lt; Real &gt;::NumCols()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00285">SparseMatrix&lt; Real &gt;::NumRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00560">SparseMatrix&lt; Real &gt;::Resize()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00516">SparseMatrix&lt; Real &gt;::Row()</a>, and <a class="el" href="sparse-matrix_8cc_source.html#l00522">SparseMatrix&lt; Real &gt;::SetRow()</a>.</p>

<p>Referenced by <a class="el" href="sparse-matrix_8cc_source.html#l00990">kaldi::FilterGeneralMatrixRows()</a>.</p>
<div class="fragment"><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                                                     {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(keep_rows.size() == <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(in.NumRows()));</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_kept_rows = 0;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  std::vector&lt;bool&gt;::const_iterator iter = keep_rows.begin(),</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                                     end = keep_rows.end();</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="keywordflow">for</span> (; iter != end; ++iter)</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keywordflow">if</span> (*iter)</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      num_kept_rows++;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keywordflow">if</span> (num_kept_rows == 0)</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;No kept rows&quot;</span>;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keywordflow">if</span> (num_kept_rows == static_cast&lt;int32&gt;(keep_rows.size())) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    *out = in;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  out-&gt;Resize(num_kept_rows, in.NumCols(), <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  iter = keep_rows.begin();</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> out_row = 0;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> in_row = 0; iter != end; ++iter, ++in_row) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">if</span> (*iter) {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      out-&gt;SetRow(out_row, in.Row(in_row));</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      out_row++;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    }</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(out_row == num_kept_rows);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00160">kaldi-error.h:160</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga488f773f3606a469f29a1df41d6debb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Real TraceMatSmat </td>
          <td>(</td>
          <td class="paramtype">const MatrixBase&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SparseMatrix&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MatrixTransposeType&#160;</td>
          <td class="paramname"><em>trans</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sparse-matrix_8cc_source.html#l00610">610</a> of file <a class="el" href="sparse-matrix_8cc_source.html">sparse-matrix.cc</a>.</p>

<p>References <a class="el" href="kaldi-matrix_8h_source.html#l00073">MatrixBase&lt; Real &gt;::Data()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00031">SparseVector&lt; Real &gt;::Data()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="matrix-common_8h_source.html#l00031">kaldi::kTrans</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00290">SparseMatrix&lt; Real &gt;::NumCols()</a>, <a class="el" href="sparse-matrix_8h_source.html#l00072">SparseVector&lt; Real &gt;::NumElements()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00285">SparseMatrix&lt; Real &gt;::NumRows()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00516">SparseMatrix&lt; Real &gt;::Row()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00182">MatrixBase&lt; Real &gt;::Row()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00064">MatrixBase&lt; Real &gt;::Stride()</a>, and <a class="el" href="sparse-matrix_8cc_source.html#l00496">kaldi::VecSvec()</a>.</p>

<p>Referenced by <a class="el" href="nnet-training_8cc_source.html#l00167">kaldi::nnet3::ComputeObjectiveFunction()</a>, <a class="el" href="cu-sparse-matrix_8cc_source.html#l00300">kaldi::TraceMatSmat()</a>, <a class="el" href="cu-sparse-matrix-test_8cc_source.html#l00031">kaldi::UnitTestCuSparseMatrixTraceMatSmat()</a>, and <a class="el" href="sparse-matrix-test_8cc_source.html#l00175">kaldi::UnitTestSparseMatrixTraceMatSmat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                             {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  Real sum = 0.0;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">if</span> (trans == <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> num_rows = A.NumRows();</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(B.NumRows() == num_rows);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> r = 0; r &lt; num_rows; r++)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      sum += <a class="code" href="namespacekaldi.html#a47b704f5dc116b9131a6bbb7f755b1b4">VecSvec</a>(A.Row(r), B.Row(r));</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keyword">const</span> Real *A_col_data = A.Data();</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> Astride = A.Stride(), Acols = A.NumCols(), Arows = A.NumRows();</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(Arows == B.NumCols() &amp;&amp; Acols == B.NumRows());</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    sum = 0.0;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Acols; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++, A_col_data++) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      Real col_sum = 0.0;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <span class="keyword">const</span> SparseVector&lt;Real&gt; &amp;svec = B.Row(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> num_elems = svec.NumElements();</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <span class="keyword">const</span> std::pair&lt;MatrixIndexT, Real&gt; *sdata = svec.Data();</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> e = 0; e &lt; num_elems; e++)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        col_sum += A_col_data[Astride * sdata[e].first] * sdata[e].second;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      sum += col_sum;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="keywordflow">return</span> sum;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_a47b704f5dc116b9131a6bbb7f755b1b4"><div class="ttname"><a href="namespacekaldi.html#a47b704f5dc116b9131a6bbb7f755b1b4">kaldi::VecSvec</a></div><div class="ttdeci">template double VecSvec(const VectorBase&lt; double &gt; &amp;vec, const SparseVector&lt; double &gt; &amp;svec)</div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kaldi::kTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00031">matrix-common.h:31</a></div></div>
<div class="ttc" id="namespacekaldi_html_aac2c220416519a2b0a7ad822ee2ef972"><div class="ttname"><a href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">kaldi::MatrixIndexT</a></div><div class="ttdeci">int32 MatrixIndexT</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00090">matrix-common.h:90</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga2f0533da39e428dc81ddd49807a53c35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Real VecSvec </td>
          <td>(</td>
          <td class="paramtype">const VectorBase&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SparseVector&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>svec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sparse-matrix_8cc_source.html#l00496">496</a> of file <a class="el" href="sparse-matrix_8cc_source.html">sparse-matrix.cc</a>.</p>

<p>References <a class="el" href="kaldi-vector_8h_source.html#l00065">VectorBase&lt; Real &gt;::Data()</a>, <a class="el" href="sparse-matrix_8cc_source.html#l00031">SparseVector&lt; Real &gt;::Data()</a>, <a class="el" href="sparse-matrix_8h_source.html#l00041">SparseVector&lt; Real &gt;::Dim()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">rnnlm::n</a>, and <a class="el" href="sparse-matrix_8h_source.html#l00072">SparseVector&lt; Real &gt;::NumElements()</a>.</p>

<p>Referenced by <a class="el" href="sparse-matrix_8cc_source.html#l00610">kaldi::TraceMatSmat()</a>, and <a class="el" href="sparse-matrix-test_8cc_source.html#l00092">kaldi::UnitTestSparseVectorVecSvec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                             {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(vec.Dim() == svec.Dim());</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> <a class="code" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">n</a> = svec.NumElements();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keyword">const</span> std::pair&lt;MatrixIndexT, Real&gt; *sdata = svec.Data();</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keyword">const</span> Real *data = vec.Data();</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  Real ans = 0.0;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">n</a>; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    ans += data[sdata[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].first] * sdata[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].second;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keywordflow">return</span> ans;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div>
<div class="ttc" id="namespacernnlm_html_a318f3e22ac453fd1efea583625fe76c3"><div class="ttname"><a href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">rnnlm::n</a></div><div class="ttdeci">struct rnnlm::@10::@11 n</div></div>
<div class="ttc" id="namespacekaldi_html_aac2c220416519a2b0a7ad822ee2ef972"><div class="ttname"><a href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">kaldi::MatrixIndexT</a></div><div class="ttdeci">int32 MatrixIndexT</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00090">matrix-common.h:90</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Apr 26 2016 14:54:46 for Kaldi by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
