<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: FeatureExtraction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__feat.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">FeatureExtraction</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:resample_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="resample_8h.html">resample.h</a></td></tr>
<tr class="memdesc:resample_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">] <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1FbankOptions.html">FbankOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structkaldi_1_1FbankOptions.html" title="FbankOptions contains basic options for computing FBANK features It only includes things that can be ...">FbankOptions</a> contains basic options for computing FBANK features It only includes things that can be done in a "stateless" way, i.e.  <a href="structkaldi_1_1FbankOptions.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1Fbank.html">Fbank</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for computing mel-filterbank features; see <a class="el" href="feat.html#feat_mfcc">Computing MFCC features</a> for more information.  <a href="classkaldi_1_1Fbank.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1MelBanksOptions.html">MelBanksOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1FrameExtractionOptions.html">FrameExtractionOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1FeatureWindowFunction.html">FeatureWindowFunction</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1DeltaFeaturesOptions.html">DeltaFeaturesOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1DeltaFeatures.html">DeltaFeatures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1ShiftedDeltaFeaturesOptions.html">ShiftedDeltaFeaturesOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1ShiftedDeltaFeatures.html">ShiftedDeltaFeatures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1SlidingWindowCmnOptions.html">SlidingWindowCmnOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1MfccOptions.html">MfccOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structkaldi_1_1MfccOptions.html" title="MfccOptions contains basic options for computing MFCC features It only includes things that can be do...">MfccOptions</a> contains basic options for computing MFCC features It only includes things that can be done in a "stateless" way, i.e.  <a href="structkaldi_1_1MfccOptions.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1Mfcc.html">Mfcc</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for computing MFCC features; see <a class="el" href="feat.html#feat_mfcc">Computing MFCC features</a> for more information.  <a href="classkaldi_1_1Mfcc.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1PlpOptions.html">PlpOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structkaldi_1_1PlpOptions.html" title="PlpOptions contains basic options for computing PLP features. ">PlpOptions</a> contains basic options for computing PLP features.  <a href="structkaldi_1_1PlpOptions.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1Plp.html">Plp</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for computing PLP features.  <a href="classkaldi_1_1Plp.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1SpectrogramOptions.html">SpectrogramOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structkaldi_1_1SpectrogramOptions.html" title="SpectrogramOptions contains basic options for computing SPECTROGRAM features It only includes things ...">SpectrogramOptions</a> contains basic options for computing SPECTROGRAM features It only includes things that can be done in a "stateless" way, i.e.  <a href="structkaldi_1_1SpectrogramOptions.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1Spectrogram.html">Spectrogram</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for computing SPECTROGRAM features; see <a class="el" href="feat.html#feat_mfcc">Computing MFCC features</a> for more information.  <a href="classkaldi_1_1Spectrogram.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html">MelBanks</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1PitchExtractionOptions.html">PitchExtractionOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1ProcessPitchOptions.html">ProcessPitchOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlinePitchFeature.html">OnlinePitchFeature</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html">OnlineProcessPitch</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This online-feature class implements post processing of pitch features.  <a href="classkaldi_1_1OnlineProcessPitch.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1ArbitraryResample.html">ArbitraryResample</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class <a class="el" href="classkaldi_1_1ArbitraryResample.html" title="Class ArbitraryResample allows you to resample a signal (assumed zero outside the sample region...">ArbitraryResample</a> allows you to resample a signal (assumed zero outside the sample region, not periodic) at arbitrary specified time values, which don't have to be linearly spaced.  <a href="classkaldi_1_1ArbitraryResample.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LinearResample.html">LinearResample</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classkaldi_1_1LinearResample.html" title="LinearResample is a special case of ArbitraryResample, where we want to resample a signal at linearly...">LinearResample</a> is a special case of <a class="el" href="classkaldi_1_1ArbitraryResample.html" title="Class ArbitraryResample allows you to resample a signal (assumed zero outside the sample region...">ArbitraryResample</a>, where we want to resample a signal at linearly spaced intervals (this means we want to upsample or downsample the signal).  <a href="classkaldi_1_1LinearResample.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1Sinusoid.html">Sinusoid</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1SinusoidDetector.html">SinusoidDetector</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1MultiSinusoidDetectorConfig.html">MultiSinusoidDetectorConfig</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This configuration class is for the frame-by-frame detection of cases where there are one or two sinusoids that can explain a lot of the energy in the signal.  <a href="structkaldi_1_1MultiSinusoidDetectorConfig.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1MultiSinusoidDetectorOutput.html">MultiSinusoidDetectorOutput</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MultiSinusoidDetector.html">MultiSinusoidDetector</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabec1d2e87a51be7dc54d6fea38e38e2a"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#gabec1d2e87a51be7dc54d6fea38e38e2a">NumFrames</a> (int32 nsamp, const FrameExtractionOptions &amp;opts)</td></tr>
<tr class="separator:gabec1d2e87a51be7dc54d6fea38e38e2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46d7bb685639cae24e9aa9077bfdbabd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga46d7bb685639cae24e9aa9077bfdbabd">Dither</a> (VectorBase&lt; BaseFloat &gt; *waveform, BaseFloat dither_value)</td></tr>
<tr class="separator:ga46d7bb685639cae24e9aa9077bfdbabd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04035df68c8b47aef47844494e226239"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga04035df68c8b47aef47844494e226239">Preemphasize</a> (VectorBase&lt; BaseFloat &gt; *waveform, BaseFloat preemph_coeff)</td></tr>
<tr class="separator:ga04035df68c8b47aef47844494e226239"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6bda4504c235b976eefdcd87ef035a52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga6bda4504c235b976eefdcd87ef035a52">ExtractWindow</a> (const VectorBase&lt; BaseFloat &gt; &amp;wave, int32 f, const FrameExtractionOptions &amp;opts, const FeatureWindowFunction &amp;window_function, Vector&lt; BaseFloat &gt; *window, BaseFloat *log_energy_pre_window)</td></tr>
<tr class="separator:ga6bda4504c235b976eefdcd87ef035a52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81fe1983cccd15a9d062a3620cf71d8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga81fe1983cccd15a9d062a3620cf71d8b">ExtractWaveformRemainder</a> (const VectorBase&lt; BaseFloat &gt; &amp;wave, const FrameExtractionOptions &amp;opts, Vector&lt; BaseFloat &gt; *wave_remainder)</td></tr>
<tr class="separator:ga81fe1983cccd15a9d062a3620cf71d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga779ec8723da60f1959df26356e65e45b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga779ec8723da60f1959df26356e65e45b">ComputePowerSpectrum</a> (VectorBase&lt; BaseFloat &gt; *waveform)</td></tr>
<tr class="separator:ga779ec8723da60f1959df26356e65e45b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4751031100e38042b165151f3689b20a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga4751031100e38042b165151f3689b20a">MaxNormalizeEnergy</a> (Matrix&lt; BaseFloat &gt; *feats)</td></tr>
<tr class="separator:ga4751031100e38042b165151f3689b20a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b867a4f7a70bcbdc3ac09e125e0ec76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga2b867a4f7a70bcbdc3ac09e125e0ec76">ComputeDeltas</a> (const DeltaFeaturesOptions &amp;delta_opts, const MatrixBase&lt; BaseFloat &gt; &amp;input_features, Matrix&lt; BaseFloat &gt; *output_features)</td></tr>
<tr class="separator:ga2b867a4f7a70bcbdc3ac09e125e0ec76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad61b620d61e761a71030233dcd939dee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#gad61b620d61e761a71030233dcd939dee">ComputeShiftedDeltas</a> (const ShiftedDeltaFeaturesOptions &amp;delta_opts, const MatrixBase&lt; BaseFloat &gt; &amp;input_features, Matrix&lt; BaseFloat &gt; *output_features)</td></tr>
<tr class="separator:gad61b620d61e761a71030233dcd939dee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d650c792ffea3eba71aaaf0df52d93e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga1d650c792ffea3eba71aaaf0df52d93e">SpliceFrames</a> (const MatrixBase&lt; BaseFloat &gt; &amp;input_features, int32 left_context, int32 right_context, Matrix&lt; BaseFloat &gt; *output_features)</td></tr>
<tr class="separator:ga1d650c792ffea3eba71aaaf0df52d93e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85f143ad1d8dc191243adaa567cd735a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga85f143ad1d8dc191243adaa567cd735a">ReverseFrames</a> (const MatrixBase&lt; BaseFloat &gt; &amp;input_features, Matrix&lt; BaseFloat &gt; *output_features)</td></tr>
<tr class="separator:ga85f143ad1d8dc191243adaa567cd735a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad935da5d50c821fb441ac2d489f13d83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#gad935da5d50c821fb441ac2d489f13d83">GetEqualLoudnessVector</a> (const MelBanks &amp;mel_banks, Vector&lt; BaseFloat &gt; *ans)</td></tr>
<tr class="separator:gad935da5d50c821fb441ac2d489f13d83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac626f9ce3c50bf797d436a480e8ad386"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#gac626f9ce3c50bf797d436a480e8ad386">InitIdftBases</a> (int32 n_bases, int32 dimension, Matrix&lt; BaseFloat &gt; *mat_out)</td></tr>
<tr class="separator:gac626f9ce3c50bf797d436a480e8ad386"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga15e9b5c77e2d6296dc18d05906357ccc"><td class="memItemLeft" align="right" valign="top">BaseFloat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga15e9b5c77e2d6296dc18d05906357ccc">ComputeLpc</a> (const VectorBase&lt; BaseFloat &gt; &amp;autocorr_in, Vector&lt; BaseFloat &gt; *lpc_out)</td></tr>
<tr class="separator:ga15e9b5c77e2d6296dc18d05906357ccc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac509a0ded6c5bbd8a955a21726a614f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#gac509a0ded6c5bbd8a955a21726a614f5">SlidingWindowCmn</a> (const SlidingWindowCmnOptions &amp;opts, const MatrixBase&lt; BaseFloat &gt; &amp;input, MatrixBase&lt; BaseFloat &gt; *output)</td></tr>
<tr class="memdesc:gac509a0ded6c5bbd8a955a21726a614f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies sliding-window cepstral mean and/or variance normalization.  <a href="#gac509a0ded6c5bbd8a955a21726a614f5">More...</a><br/></td></tr>
<tr class="separator:gac509a0ded6c5bbd8a955a21726a614f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaf12cf5eac02b3ff2cae8ba6b36a4312"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#gaaf12cf5eac02b3ff2cae8ba6b36a4312">ComputeLifterCoeffs</a> (BaseFloat Q, VectorBase&lt; BaseFloat &gt; *coeffs)</td></tr>
<tr class="separator:gaaf12cf5eac02b3ff2cae8ba6b36a4312"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadfc97acaa9e31bce118e273e1bbf74e2"><td class="memItemLeft" align="right" valign="top">BaseFloat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#gadfc97acaa9e31bce118e273e1bbf74e2">Durbin</a> (int n, const BaseFloat *pAC, BaseFloat *pLP, BaseFloat *pTmp)</td></tr>
<tr class="separator:gadfc97acaa9e31bce118e273e1bbf74e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62f868a9e143ccea1ff7a3a81b8477aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga62f868a9e143ccea1ff7a3a81b8477aa">Lpc2Cepstrum</a> (int n, const BaseFloat *pLPC, BaseFloat *pCepst)</td></tr>
<tr class="separator:ga62f868a9e143ccea1ff7a3a81b8477aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab2d0682a863b69133865d08ff795f7dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#gab2d0682a863b69133865d08ff795f7dc">ComputeKaldiPitch</a> (const PitchExtractionOptions &amp;opts, const VectorBase&lt; BaseFloat &gt; &amp;wave, Matrix&lt; BaseFloat &gt; *output)</td></tr>
<tr class="memdesc:gab2d0682a863b69133865d08ff795f7dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function extracts (pitch, NCCF) per frame, using the pitch extraction method described in "A Pitch Extraction Algorithm Tuned for Automatic Speech
Recognition", Pegah Ghahremani, Bagher BabaAli, Daniel Povey, Korbinian Riedhammer, Jan Trmal and Sanjeev Khudanpur, ICASSP 2014.  <a href="#gab2d0682a863b69133865d08ff795f7dc">More...</a><br/></td></tr>
<tr class="separator:gab2d0682a863b69133865d08ff795f7dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9cf1c363a29d6133ca1f1692b53d25cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga9cf1c363a29d6133ca1f1692b53d25cb">ProcessPitch</a> (const ProcessPitchOptions &amp;opts, const MatrixBase&lt; BaseFloat &gt; &amp;input, Matrix&lt; BaseFloat &gt; *output)</td></tr>
<tr class="memdesc:ga9cf1c363a29d6133ca1f1692b53d25cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function processes the raw (NCCF, pitch) quantities computed by ComputeKaldiPitch, and processes them into features.  <a href="#ga9cf1c363a29d6133ca1f1692b53d25cb">More...</a><br/></td></tr>
<tr class="separator:ga9cf1c363a29d6133ca1f1692b53d25cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3aee193c6b262bda912d49661ed024aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga3aee193c6b262bda912d49661ed024aa">ComputeAndProcessKaldiPitch</a> (const PitchExtractionOptions &amp;pitch_opts, const ProcessPitchOptions &amp;process_opts, const VectorBase&lt; BaseFloat &gt; &amp;wave, Matrix&lt; BaseFloat &gt; *output)</td></tr>
<tr class="memdesc:ga3aee193c6b262bda912d49661ed024aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function combines ComputeKaldiPitch and ProcessPitch.  <a href="#ga3aee193c6b262bda912d49661ed024aa">More...</a><br/></td></tr>
<tr class="separator:ga3aee193c6b262bda912d49661ed024aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5fce515ce48395a054ca3ee677c98c6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#ga5fce515ce48395a054ca3ee677c98c6f">AddSinusoid</a> (BaseFloat samp_freq, const Sinusoid &amp;sinusoid, VectorBase&lt; BaseFloat &gt; *signal)</td></tr>
<tr class="separator:ga5fce515ce48395a054ca3ee677c98c6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae8ee6a0e54be90c7e1c313a621e939bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feat.html#gae8ee6a0e54be90c7e1c313a621e939bb">DetectSinusoids</a> (const VectorBase&lt; BaseFloat &gt; &amp;signal, MultiSinusoidDetector *detector, Matrix&lt; BaseFloat &gt; *output)</td></tr>
<tr class="separator:gae8ee6a0e54be90c7e1c313a621e939bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga5fce515ce48395a054ca3ee677c98c6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddSinusoid </td>
          <td>(</td>
          <td class="paramtype">BaseFloat&#160;</td>
          <td class="paramname"><em>samp_freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Sinusoid &amp;&#160;</td>
          <td class="paramname"><em>sinusoid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorBase&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>signal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sinusoid-detection_8cc_source.html#l00031">31</a> of file <a class="el" href="sinusoid-detection_8cc_source.html">sinusoid-detection.cc</a>.</p>

<p>References <a class="el" href="sinusoid-detection_8h_source.html#l00038">Sinusoid::amplitude</a>, <a class="el" href="matrix-functions-inl_8h_source.html#l00031">kaldi::ComplexMul()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00065">VectorBase&lt; Real &gt;::Data()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="sinusoid-detection_8h_source.html#l00039">Sinusoid::freq</a>, <a class="el" href="kaldi-math_8h_source.html#l00052">M_2PI</a>, and <a class="el" href="sinusoid-detection_8h_source.html#l00040">Sinusoid::phase</a>.</p>

<p>Referenced by <a class="el" href="sinusoid-detection_8cc_source.html#l00778">MultiSinusoidDetector::GetNextFrame()</a>, <a class="el" href="sinusoid-detection-test_8cc_source.html#l00038">kaldi::UnitTestAddSinusoid()</a>, <a class="el" href="sinusoid-detection-test_8cc_source.html#l00111">kaldi::UnitTestSinusoidDetector()</a>, and <a class="el" href="sinusoid-detection-test_8cc_source.html#l00167">kaldi::UnitTestSinusoidDetectorNoisy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                                {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="comment">// treat &quot;factor&quot; as a complex variable equal to exp(i * 2 pi freq / samp_freq); it&#39;s</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">// the factor by which we multiply on each frame.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> factor_real = cos(<a class="code" href="kaldi-math_8h.html#a4aa2c43b09c1300c334821f5507d6f71">M_2PI</a> * sinusoid.freq / samp_freq),</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;      factor_im = sin(<a class="code" href="kaldi-math_8h.html#a4aa2c43b09c1300c334821f5507d6f71">M_2PI</a> * sinusoid.freq / samp_freq);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *signal_data = signal-&gt;<a class="code" href="classkaldi_1_1VectorBase.html#abda573212fad06ec61fd3f428a0992c7">Data</a>();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> dim = signal-&gt;<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>(), batch_size = 100;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="comment">// process frames in batches of size &quot;batch_size&quot;, after which we recompute</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// the starting point to prevent loss of accuracy due to drift.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> b = 0; b * batch_size &lt; dim; b++) {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> t_offset = b * batch_size,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        t_end = std::min(dim, t_offset + batch_size);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordtype">double</span> phase = sinusoid.phase + <a class="code" href="kaldi-math_8h.html#a4aa2c43b09c1300c334821f5507d6f71">M_2PI</a> * t_offset * sinusoid.freq / samp_freq;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment">// treat x as a complex variable which initially is equal to amplitude * exp(i * phase),</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">// but which gets multiplied by &quot;factor&quot; on each frame.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> x_real = sinusoid.amplitude * cos(phase),</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        x_im = sinusoid.amplitude * sin(phase);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> t = t_offset; t &lt; t_end; t++) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      signal_data[t] += x_real;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      <a class="code" href="group__matrix__funcs__misc.html#gadf1aeb4e8fa162e8875ba335316ab1e2">ComplexMul</a>(factor_real, factor_im, &amp;x_real, &amp;x_im);  <span class="comment">// x *= factor.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  }</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_abda573212fad06ec61fd3f428a0992c7"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#abda573212fad06ec61fd3f428a0992c7">kaldi::VectorBase::Data</a></div><div class="ttdeci">Real * Data()</div><div class="ttdoc">Returns a pointer to the start of the vector&#39;s data. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00065">kaldi-vector.h:65</a></div></div>
<div class="ttc" id="group__matrix__funcs__misc_html_gadf1aeb4e8fa162e8875ba335316ab1e2"><div class="ttname"><a href="group__matrix__funcs__misc.html#gadf1aeb4e8fa162e8875ba335316ab1e2">kaldi::ComplexMul</a></div><div class="ttdeci">void ComplexMul(const Real &amp;a_re, const Real &amp;a_im, Real *b_re, Real *b_im)</div><div class="ttdoc">ComplexMul implements, inline, the complex multiplication b *= a. </div><div class="ttdef"><b>Definition:</b> <a href="matrix-functions-inl_8h_source.html#l00031">matrix-functions-inl.h:31</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="kaldi-math_8h_html_a4aa2c43b09c1300c334821f5507d6f71"><div class="ttname"><a href="kaldi-math_8h.html#a4aa2c43b09c1300c334821f5507d6f71">M_2PI</a></div><div class="ttdeci">#define M_2PI</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00052">kaldi-math.h:52</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::VectorBase::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Returns the dimension of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00059">kaldi-vector.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga3aee193c6b262bda912d49661ed024aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComputeAndProcessKaldiPitch </td>
          <td>(</td>
          <td class="paramtype">const PitchExtractionOptions &amp;&#160;</td>
          <td class="paramname"><em>pitch_opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ProcessPitchOptions &amp;&#160;</td>
          <td class="paramname"><em>process_opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const VectorBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>wave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Matrix&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function combines ComputeKaldiPitch and ProcessPitch. </p>
<p>The reason why we need a separate function to do this is in order to be able to accurately simulate the online pitch-processing, for testing and for training models matched to the "first-pass" features. It is sensitive to the variables in pitch_opts that relate to online processing, i.e. max_frames_latency, frames_per_chunk, simulate_first_pass_online, recompute_frame. </p>

<p>Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01552">1552</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p>References <a class="el" href="pitch-functions_8cc_source.html#l01178">OnlinePitchFeature::AcceptWaveform()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="pitch-functions_8h_source.html#l00329">OnlineProcessPitch::Dim()</a>, <a class="el" href="pitch-functions_8h_source.html#l00045">PitchExtractionOptions::frame_shift_ms</a>, <a class="el" href="pitch-functions_8h_source.html#l00083">PitchExtractionOptions::frames_per_chunk</a>, <a class="el" href="pitch-functions_8cc_source.html#l01369">OnlineProcessPitch::GetFrame()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01184">OnlinePitchFeature::InputFinished()</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00162">KALDI_WARN</a>, <a class="el" href="matrix-common_8h_source.html#l00038">kaldi::kCopyData</a>, <a class="el" href="pitch-functions_8cc_source.html#l01524">OnlineProcessPitch::NumFramesReady()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l00692">Matrix&lt; Real &gt;::Resize()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00203">MatrixBase&lt; Real &gt;::RowRange()</a>, <a class="el" href="pitch-functions_8h_source.html#l00044">PitchExtractionOptions::samp_freq</a>, and <a class="el" href="pitch-functions_8h_source.html#l00092">PitchExtractionOptions::simulate_first_pass_online</a>.</p>

<p>Referenced by <a class="el" href="compute-and-process-kaldi-pitch-feats_8cc_source.html#l00027">main()</a>, and <a class="el" href="pitch-functions-test_8cc_source.html#l00052">kaldi::UnitTestSimple()</a>.</p>
<div class="fragment"><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                               {</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  </div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  OnlinePitchFeature pitch_extractor(pitch_opts);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="keywordflow">if</span> (pitch_opts.simulate_first_pass_online) {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(pitch_opts.frames_per_chunk &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;                 <span class="stringliteral">&quot;--simulate-first-pass-online option does not make sense &quot;</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                 <span class="stringliteral">&quot;unless you specify --frames-per-chunk&quot;</span>);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  }</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  OnlineProcessPitch post_process(process_opts, &amp;pitch_extractor);</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> cur_rows = 100;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  Matrix&lt;BaseFloat&gt; feats(cur_rows, post_process.Dim());</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> cur_offset = 0, cur_frame = 0,</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      samp_per_chunk = pitch_opts.frames_per_chunk *</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      pitch_opts.samp_freq * 1.0e-03 * pitch_opts.frame_shift_ms;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="comment">// We request the first-pass features as soon as they are available,</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <span class="comment">// regardless of whether opts.simulate_first_pass_online == true.  If</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  <span class="comment">// opts.simulate_first_pass_online == true this should</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="comment">// not affect the features generated, but it helps us to test the code</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="comment">// in a way that&#39;s closer to what online decoding would see.</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  </div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="keywordflow">while</span> (cur_offset &lt; wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>()) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_samp;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="keywordflow">if</span> (samp_per_chunk &gt; 0)</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      num_samp = std::min(samp_per_chunk, wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>() - cur_offset);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">else</span>  <span class="comment">// user left opts.frames_per_chunk at zero.</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      num_samp = wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>();</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    SubVector&lt;BaseFloat&gt; wave_chunk(wave, cur_offset, num_samp);</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    pitch_extractor.AcceptWaveform(pitch_opts.samp_freq, wave_chunk);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    cur_offset += num_samp;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordflow">if</span> (cur_offset == wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>())</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      pitch_extractor.InputFinished();</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    </div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="comment">// Get each frame as soon as it is ready.</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="keywordflow">for</span> (; cur_frame &lt; post_process.NumFramesReady(); cur_frame++) {</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <span class="keywordflow">if</span> (cur_frame &gt;= cur_rows) {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        cur_rows *= 2;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        feats.Resize(cur_rows, post_process.Dim(), <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80ba6ccfb1220c1b49764f14603227edd6e0">kCopyData</a>);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      }</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      SubVector&lt;BaseFloat&gt; row(feats, cur_frame);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      post_process.GetFrame(cur_frame, &amp;row);</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    }</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  }</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  </div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="keywordflow">if</span> (pitch_opts.simulate_first_pass_online) {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">if</span> (cur_frame == 0) {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;No features output since wave file too short&quot;</span>;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      output-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(0, 0);</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      *output = feats.<a class="code" href="classkaldi_1_1MatrixBase.html#a32fc72178643923293705f08ed684f20">RowRange</a>(0, cur_frame);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="comment">// want the &quot;final&quot; features for second pass, so get them again.</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    output-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(post_process.NumFramesReady(), post_process.Dim());</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> frame = 0; frame &lt; post_process.NumFramesReady(); frame++) {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      SubVector&lt;BaseFloat&gt; row(*output, frame);</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      post_process.GetFrame(frame, &amp;row);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    }</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  }</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;}</div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00162">kaldi-error.h:162</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80ba6ccfb1220c1b49764f14603227edd6e0"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80ba6ccfb1220c1b49764f14603227edd6e0">kaldi::kCopyData</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00038">matrix-common.h:38</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_a32fc72178643923293705f08ed684f20"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#a32fc72178643923293705f08ed684f20">kaldi::MatrixBase::RowRange</a></div><div class="ttdeci">SubMatrix&lt; Real &gt; RowRange(const MatrixIndexT row_offset, const MatrixIndexT num_rows) const </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00203">kaldi-matrix.h:203</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_aaabb78f23b01b8ac551b3cc56f602be4"><div class="ttname"><a href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00692">kaldi-matrix.cc:692</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::VectorBase::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Returns the dimension of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00059">kaldi-vector.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga2b867a4f7a70bcbdc3ac09e125e0ec76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComputeDeltas </td>
          <td>(</td>
          <td class="paramtype">const DeltaFeaturesOptions &amp;&#160;</td>
          <td class="paramname"><em>delta_opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MatrixBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>input_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Matrix&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>output_features</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00316">316</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="feature-functions_8h_source.html#l00193">DeltaFeaturesOptions::order</a>, <a class="el" href="feature-functions_8cc_source.html#l00244">DeltaFeatures::Process()</a>, and <a class="el" href="kaldi-matrix_8cc_source.html#l00692">Matrix&lt; Real &gt;::Resize()</a>.</p>

<p>Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01394">OnlineProcessPitch::GetDeltaPitchFeature()</a>, <a class="el" href="add-deltas_8cc_source.html#l00026">main()</a>, <a class="el" href="online-feature-test_8cc_source.html#l00108">kaldi::TestOnlineDeltaFeature()</a>, <a class="el" href="feature-sdc-test_8cc_source.html#l00030">UnitTestCompareWithDeltaFeatures()</a>, <a class="el" href="feature-mfcc-test_8cc_source.html#l00112">UnitTestHTKCompare1()</a>, <a class="el" href="feature-mfcc-test_8cc_source.html#l00196">UnitTestHTKCompare2()</a>, <a class="el" href="feature-mfcc-test_8cc_source.html#l00280">UnitTestHTKCompare3()</a>, <a class="el" href="feature-mfcc-test_8cc_source.html#l00365">UnitTestHTKCompare4()</a>, <a class="el" href="feature-mfcc-test_8cc_source.html#l00448">UnitTestHTKCompare5()</a>, and <a class="el" href="feature-mfcc-test_8cc_source.html#l00535">UnitTestHTKCompare6()</a>.</p>
<div class="fragment"><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                                       {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  output_features-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(input_features.<a class="code" href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>(),</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                          input_features.<a class="code" href="classkaldi_1_1MatrixBase.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>()</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                          *(delta_opts.order + 1));</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  DeltaFeatures delta(delta_opts);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> r = 0; r &lt; static_cast&lt;int32&gt;(input_features.<a class="code" href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>()); r++) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    SubVector&lt;BaseFloat&gt; row(*output_features, r);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    delta.Process(input_features, r, &amp;row);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">kaldi::MatrixBase::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00058">kaldi-matrix.h:58</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_afe58124fbfb387ddc20513bf3075b16e"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#afe58124fbfb387ddc20513bf3075b16e">kaldi::MatrixBase::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const </div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00061">kaldi-matrix.h:61</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_aaabb78f23b01b8ac551b3cc56f602be4"><div class="ttname"><a href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00692">kaldi-matrix.cc:692</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gab2d0682a863b69133865d08ff795f7dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComputeKaldiPitch </td>
          <td>(</td>
          <td class="paramtype">const PitchExtractionOptions &amp;&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const VectorBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>wave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Matrix&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function extracts (pitch, NCCF) per frame, using the pitch extraction method described in "A Pitch Extraction Algorithm Tuned for Automatic Speech
Recognition", Pegah Ghahremani, Bagher BabaAli, Daniel Povey, Korbinian Riedhammer, Jan Trmal and Sanjeev Khudanpur, ICASSP 2014. </p>
<p>The output will have as many rows as there are frames, and two columns corresponding to (NCCF, pitch) </p>

<p>Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01246">1246</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p>References <a class="el" href="pitch-functions_8cc_source.html#l01178">OnlinePitchFeature::AcceptWaveform()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01203">kaldi::ComputeKaldiPitchFirstPass()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="pitch-functions_8h_source.html#l00045">PitchExtractionOptions::frame_shift_ms</a>, <a class="el" href="pitch-functions_8h_source.html#l00083">PitchExtractionOptions::frames_per_chunk</a>, <a class="el" href="pitch-functions_8cc_source.html#l01174">OnlinePitchFeature::GetFrame()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01184">OnlinePitchFeature::InputFinished()</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00162">KALDI_WARN</a>, <a class="el" href="pitch-functions_8cc_source.html#l01163">OnlinePitchFeature::NumFramesReady()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l00692">Matrix&lt; Real &gt;::Resize()</a>, <a class="el" href="pitch-functions_8h_source.html#l00044">PitchExtractionOptions::samp_freq</a>, and <a class="el" href="pitch-functions_8h_source.html#l00092">PitchExtractionOptions::simulate_first_pass_online</a>.</p>

<p>Referenced by <a class="el" href="compute-kaldi-pitch-feats_8cc_source.html#l00027">main()</a>, <a class="el" href="pitch-functions-test_8cc_source.html#l00445">kaldi::UnitTestDiffSampleRate()</a>, <a class="el" href="pitch-functions-test_8cc_source.html#l00283">kaldi::UnitTestKeele()</a>, <a class="el" href="pitch-functions-test_8cc_source.html#l00347">kaldi::UnitTestKeeleNccfBallast()</a>, <a class="el" href="pitch-functions-test_8cc_source.html#l00314">kaldi::UnitTestPenaltyFactor()</a>, <a class="el" href="pitch-functions-test_8cc_source.html#l00071">kaldi::UnitTestPieces()</a>, <a class="el" href="pitch-functions-test_8cc_source.html#l00382">kaldi::UnitTestPitchExtractionSpeed()</a>, <a class="el" href="pitch-functions-test_8cc_source.html#l00416">kaldi::UnitTestPitchExtractorCompareKeele()</a>, <a class="el" href="pitch-functions-test_8cc_source.html#l00478">kaldi::UnitTestProcess()</a>, and <a class="el" href="pitch-functions-test_8cc_source.html#l00206">kaldi::UnitTestSearch()</a>.</p>
<div class="fragment"><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                                                  {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="keywordflow">if</span> (opts.simulate_first_pass_online) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <a class="code" href="namespacekaldi.html#a79bdca1cc024bf77057d3d3984724226">ComputeKaldiPitchFirstPass</a>(opts, wave, output);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  OnlinePitchFeature pitch_extractor(opts);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="keywordflow">if</span> (opts.frames_per_chunk == 0) {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    pitch_extractor.AcceptWaveform(opts.samp_freq, wave);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="comment">// the user may set opts.frames_per_chunk for better compatibility with</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="comment">// online operation.</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(opts.frames_per_chunk &gt; 0);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> cur_offset = 0, samp_per_chunk =</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        opts.frames_per_chunk * opts.samp_freq * 1.0e-03 * opts.frame_shift_ms;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">while</span> (cur_offset &lt; wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>()) {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_samp = std::min(samp_per_chunk, wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>() - cur_offset);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      SubVector&lt;BaseFloat&gt; wave_chunk(wave, cur_offset, num_samp);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      pitch_extractor.AcceptWaveform(opts.samp_freq, wave_chunk);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      cur_offset += num_samp;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  pitch_extractor.InputFinished();</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_frames = pitch_extractor.NumFramesReady();</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="keywordflow">if</span> (num_frames == 0) {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;No frames output in pitch extraction&quot;</span>;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    output-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(0, 0);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  }</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  output-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(num_frames, 2);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> frame = 0; frame &lt; num_frames; frame++) {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    SubVector&lt;BaseFloat&gt; row(*output, frame);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    pitch_extractor.GetFrame(frame, &amp;row);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_a79bdca1cc024bf77057d3d3984724226"><div class="ttname"><a href="namespacekaldi.html#a79bdca1cc024bf77057d3d3984724226">kaldi::ComputeKaldiPitchFirstPass</a></div><div class="ttdeci">void ComputeKaldiPitchFirstPass(const PitchExtractionOptions &amp;opts, const VectorBase&lt; BaseFloat &gt; &amp;wave, Matrix&lt; BaseFloat &gt; *output)</div><div class="ttdoc">This function is called from ComputeKaldiPitch when the user specifies opts.simulate_first_pass_onlin...</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l01203">pitch-functions.cc:1203</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00162">kaldi-error.h:162</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_aaabb78f23b01b8ac551b3cc56f602be4"><div class="ttname"><a href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00692">kaldi-matrix.cc:692</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::VectorBase::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Returns the dimension of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00059">kaldi-vector.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaaf12cf5eac02b3ff2cae8ba6b36a4312"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComputeLifterCoeffs </td>
          <td>(</td>
          <td class="paramtype">BaseFloat&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorBase&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>coeffs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mel-computations_8cc_source.html#l00248">248</a> of file <a class="el" href="mel-computations_8cc_source.html">mel-computations.cc</a>.</p>

<p>References <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-math_8h_source.html#l00044">M_PI</a>.</p>

<p>Referenced by <a class="el" href="feature-mfcc_8cc_source.html#l00026">Mfcc::Mfcc()</a>, and <a class="el" href="feature-plp_8cc_source.html#l00027">Plp::Plp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                                                     {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// Compute liftering coefficients (scaling on cepstral coeffs)</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// coeffs are numbered slightly differently from HTK: the zeroth</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// index is C0, which is not affected.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; coeffs-&gt;<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    (*coeffs)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = 1.0 + 0.5 * Q * sin (<a class="code" href="kaldi-math_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> / Q);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div>
<div class="ttc" id="kaldi-math_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="kaldi-math_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00044">kaldi-math.h:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::VectorBase::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Returns the dimension of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00059">kaldi-vector.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga15e9b5c77e2d6296dc18d05906357ccc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseFloat ComputeLpc </td>
          <td>(</td>
          <td class="paramtype">const VectorBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>autocorr_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Vector&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>lpc_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00378">378</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="kaldi-vector_8h_source.html#l00065">VectorBase&lt; Real &gt;::Data()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="mel-computations_8cc_source.html#l00262">kaldi::Durbin()</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00162">KALDI_WARN</a>, <a class="el" href="kaldi-math_8h_source.html#l00100">kaldi::Log()</a>, and <a class="el" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">rnnlm::n</a>.</p>

<p>Referenced by <a class="el" href="feature-plp_8cc_source.html#l00160">Plp::ComputeInternal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                                 {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">n</a> = autocorr_in.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>() - 1;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(lpc_out-&gt;<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>() == <a class="code" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">n</a>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  Vector&lt;BaseFloat&gt; tmp(n);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> ans =  <a class="code" href="group__feat.html#gadfc97acaa9e31bce118e273e1bbf74e2">Durbin</a>(n, autocorr_in.<a class="code" href="classkaldi_1_1VectorBase.html#abda573212fad06ec61fd3f428a0992c7">Data</a>(),</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                          lpc_out-&gt;<a class="code" href="classkaldi_1_1VectorBase.html#abda573212fad06ec61fd3f428a0992c7">Data</a>(),</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                          tmp.Data());</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">if</span> (ans &lt;= 0.0)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Zero energy in LPC computation&quot;</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">return</span> -<a class="code" href="namespacekaldi.html#af75c4606b108091c348102660de63180">Log</a>((<span class="keywordtype">double</span>)1.0/ans);  <span class="comment">// forms the C0 value</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div>
<div class="ttc" id="namespacernnlm_html_a318f3e22ac453fd1efea583625fe76c3"><div class="ttname"><a href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">rnnlm::n</a></div><div class="ttdeci">struct rnnlm::@10::@11 n</div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_af75c4606b108091c348102660de63180"><div class="ttname"><a href="namespacekaldi.html#af75c4606b108091c348102660de63180">kaldi::Log</a></div><div class="ttdeci">double Log(double x)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00100">kaldi-math.h:100</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00162">kaldi-error.h:162</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_abda573212fad06ec61fd3f428a0992c7"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#abda573212fad06ec61fd3f428a0992c7">kaldi::VectorBase::Data</a></div><div class="ttdeci">Real * Data()</div><div class="ttdoc">Returns a pointer to the start of the vector&#39;s data. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00065">kaldi-vector.h:65</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="group__feat_html_gadfc97acaa9e31bce118e273e1bbf74e2"><div class="ttname"><a href="group__feat.html#gadfc97acaa9e31bce118e273e1bbf74e2">kaldi::Durbin</a></div><div class="ttdeci">BaseFloat Durbin(int n, const BaseFloat *pAC, BaseFloat *pLP, BaseFloat *pTmp)</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8cc_source.html#l00262">mel-computations.cc:262</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::VectorBase::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Returns the dimension of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00059">kaldi-vector.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga779ec8723da60f1959df26356e65e45b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComputePowerSpectrum </td>
          <td>(</td>
          <td class="paramtype">VectorBase&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>waveform</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00185">185</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, and <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>

<p>Referenced by <a class="el" href="feature-spectrogram_8cc_source.html#l00041">Spectrogram::Compute()</a>, <a class="el" href="feature-fbank_8cc_source.html#l00104">Fbank::ComputeInternal()</a>, <a class="el" href="feature-mfcc_8cc_source.html#l00116">Mfcc::ComputeInternal()</a>, and <a class="el" href="feature-plp_8cc_source.html#l00160">Plp::ComputeInternal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                                                           {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> dim = waveform-&gt;<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// no, letting it be non-power-of-two for now.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// KALDI_ASSERT(dim &gt; 0 &amp;&amp; (dim &amp; (dim-1) == 0));  // make sure a power of two.. actually my FFT code</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// does not require this (dan) but this is better in case we use different code [dan].</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// RealFft(waveform, true);  // true == forward (not inverse) FFT; makes no difference here,</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">// as we just want power spectrum.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// now we have in waveform, first half of complex spectrum</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// it&#39;s stored as [real0, realN/2-1, real1, im1, real2, im2, ...]</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> half_dim = dim/2;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> first_energy = (*waveform)(0) * (*waveform)(0),</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      last_energy = (*waveform)(1) * (*waveform)(1);  <span class="comment">// handle this special case</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; half_dim; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> <a class="code" href="namespacernnlm.html#a11d147c64891830c9e79b3315b1b2e21">real</a> = (*waveform)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>*2), im = (*waveform)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>*2 + 1);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    (*waveform)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = real*real + im*im;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  (*waveform)(0) = first_energy;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  (*waveform)(half_dim) = last_energy;  <span class="comment">// Will actually never be used, and anyway</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// if the signal has been bandlimited sensibly this should be zero.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="ttc" id="namespacernnlm_html_a11d147c64891830c9e79b3315b1b2e21"><div class="ttname"><a href="namespacernnlm.html#a11d147c64891830c9e79b3315b1b2e21">rnnlm::real</a></div><div class="ttdeci">double real</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8h_source.html#l00064">mikolov-rnnlm-lib.h:64</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::VectorBase::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Returns the dimension of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00059">kaldi-vector.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gad61b620d61e761a71030233dcd939dee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComputeShiftedDeltas </td>
          <td>(</td>
          <td class="paramtype">const ShiftedDeltaFeaturesOptions &amp;&#160;</td>
          <td class="paramname"><em>delta_opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MatrixBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>input_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Matrix&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>output_features</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00329">329</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="feature-functions_8h_source.html#l00230">ShiftedDeltaFeaturesOptions::num_blocks</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="feature-functions_8cc_source.html#l00285">ShiftedDeltaFeatures::Process()</a>, and <a class="el" href="kaldi-matrix_8cc_source.html#l00692">Matrix&lt; Real &gt;::Resize()</a>.</p>

<p>Referenced by <a class="el" href="add-deltas-sdc_8cc_source.html#l00026">main()</a>, <a class="el" href="feature-sdc-test_8cc_source.html#l00030">UnitTestCompareWithDeltaFeatures()</a>, <a class="el" href="feature-sdc-test_8cc_source.html#l00106">UnitTestEndEffects()</a>, and <a class="el" href="feature-sdc-test_8cc_source.html#l00063">UnitTestParams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                                                       {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  output_features-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(input_features.<a class="code" href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>(),</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                          input_features.<a class="code" href="classkaldi_1_1MatrixBase.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>()</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                          * (delta_opts.num_blocks + 1));</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  ShiftedDeltaFeatures delta(delta_opts);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> r = 0; r &lt; static_cast&lt;int32&gt;(input_features.<a class="code" href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>()); r++) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    SubVector&lt;BaseFloat&gt; row(*output_features, r);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    delta.Process(input_features, r, &amp;row);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">kaldi::MatrixBase::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00058">kaldi-matrix.h:58</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_afe58124fbfb387ddc20513bf3075b16e"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#afe58124fbfb387ddc20513bf3075b16e">kaldi::MatrixBase::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const </div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00061">kaldi-matrix.h:61</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_aaabb78f23b01b8ac551b3cc56f602be4"><div class="ttname"><a href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00692">kaldi-matrix.cc:692</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gae8ee6a0e54be90c7e1c313a621e939bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DetectSinusoids </td>
          <td>(</td>
          <td class="paramtype">const VectorBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MultiSinusoidDetector *&#160;</td>
          <td class="paramname"><em>detector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Matrix&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sinusoid-detection_8cc_source.html#l00913">913</a> of file <a class="el" href="sinusoid-detection_8cc_source.html">sinusoid-detection.cc</a>.</p>

<p>References <a class="el" href="sinusoid-detection_8cc_source.html#l00710">MultiSinusoidDetector::AcceptWaveform()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="sinusoid-detection_8cc_source.html#l00739">MultiSinusoidDetector::Done()</a>, <a class="el" href="sinusoid-detection_8h_source.html#l00325">MultiSinusoidDetectorOutput::energy1</a>, <a class="el" href="sinusoid-detection_8h_source.html#l00329">MultiSinusoidDetectorOutput::energy2</a>, <a class="el" href="sinusoid-detection_8h_source.html#l00362">MultiSinusoidDetector::FrameShiftSecs()</a>, <a class="el" href="sinusoid-detection_8h_source.html#l00324">MultiSinusoidDetectorOutput::freq1</a>, <a class="el" href="sinusoid-detection_8h_source.html#l00327">MultiSinusoidDetectorOutput::freq2</a>, <a class="el" href="sinusoid-detection_8cc_source.html#l00778">MultiSinusoidDetector::GetNextFrame()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="matrix-common_8h_source.html#l00037">kaldi::kUndefined</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="sinusoid-detection_8cc_source.html#l00684">MultiSinusoidDetector::Reset()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l00692">Matrix&lt; Real &gt;::Resize()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00081">MatrixBase&lt; Real &gt;::RowData()</a>, <a class="el" href="sinusoid-detection_8h_source.html#l00364">MultiSinusoidDetector::SamplingFrequency()</a>, <a class="el" href="sinusoid-detection_8h_source.html#l00321">MultiSinusoidDetectorOutput::tot_energy</a>, and <a class="el" href="sinusoid-detection_8cc_source.html#l00694">MultiSinusoidDetector::WaveformFinished()</a>.</p>

<p>Referenced by <a class="el" href="detect-sinusoids_8cc_source.html#l00026">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                                                {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  std::vector&lt;MultiSinusoidDetectorOutput&gt; output_vec;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  detector-&gt;AcceptWaveform(signal);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  detector-&gt;WaveformFinished();</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> safety_margin = 10, approx_num_frames = safety_margin + </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      (signal.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>() / (detector-&gt;SamplingFrequency() *</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                       detector-&gt;FrameShiftSecs()));</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  output_vec.reserve(approx_num_frames);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keywordflow">while</span> (!detector-&gt;Done()) {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    output_vec.resize(output_vec.size() + 1);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    detector-&gt;GetNextFrame(&amp;(output_vec.back()));</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  }  </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  detector-&gt;Reset();</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keywordflow">if</span> (output_vec.empty()) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    output-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(0, 0);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    output-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(output_vec.size(), 5, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; output-&gt;<a class="code" href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *row_data = output-&gt;<a class="code" href="classkaldi_1_1MatrixBase.html#adcdfaf228ce399718576a58a371f3735">RowData</a>(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      MultiSinusoidDetectorOutput &amp;this_output = output_vec[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      row_data[0] = this_output.tot_energy;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      row_data[1] = this_output.freq1;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      row_data[2] = this_output.energy1;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      row_data[3] = this_output.freq2;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      row_data[4] = this_output.energy2;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_adcdfaf228ce399718576a58a371f3735"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#adcdfaf228ce399718576a58a371f3735">kaldi::MatrixBase::RowData</a></div><div class="ttdeci">Real * RowData(MatrixIndexT i)</div><div class="ttdoc">Returns pointer to data for one row (non-const) </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00081">kaldi-matrix.h:81</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">kaldi::MatrixBase::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00058">kaldi-matrix.h:58</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_aaabb78f23b01b8ac551b3cc56f602be4"><div class="ttname"><a href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00692">kaldi-matrix.cc:692</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::VectorBase::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Returns the dimension of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00059">kaldi-vector.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga46d7bb685639cae24e9aa9077bfdbabd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Dither </td>
          <td>(</td>
          <td class="paramtype">VectorBase&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>waveform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BaseFloat&#160;</td>
          <td class="paramname"><em>dither_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00051">51</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-math_8h_source.html#l00155">kaldi::RandGauss()</a>.</p>

<p>Referenced by <a class="el" href="feature-functions_8cc_source.html#l00091">kaldi::ExtractWindow()</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                                                                     {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; waveform-&gt;<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    (*waveform)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) += <a class="code" href="namespacekaldi.html#a3871a9c94a69d8807ea4c1d94e2d4ab9">RandGauss</a>() * dither_value;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_a3871a9c94a69d8807ea4c1d94e2d4ab9"><div class="ttname"><a href="namespacekaldi.html#a3871a9c94a69d8807ea4c1d94e2d4ab9">kaldi::RandGauss</a></div><div class="ttdeci">float RandGauss(struct RandomState *state=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00155">kaldi-math.h:155</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::VectorBase::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Returns the dimension of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00059">kaldi-vector.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gadfc97acaa9e31bce118e273e1bbf74e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseFloat Durbin </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const BaseFloat *&#160;</td>
          <td class="paramname"><em>pAC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BaseFloat *&#160;</td>
          <td class="paramname"><em>pLP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BaseFloat *&#160;</td>
          <td class="paramname"><em>pTmp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mel-computations_8cc_source.html#l00262">262</a> of file <a class="el" href="mel-computations_8cc_source.html">mel-computations.cc</a>.</p>

<p>References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, and <a class="el" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">rnnlm::n</a>.</p>

<p>Referenced by <a class="el" href="feature-functions_8cc_source.html#l00378">kaldi::ComputeLpc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                                                               {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> ki;                <span class="comment">// reflection coefficient</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> E = pAC[0];</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">n</a>; i++) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// next reflection coefficient</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    ki = pAC[i + 1];</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>; j++)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      ki += pLP[j] * pAC[i - j];</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    ki = ki / E;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// new error</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> c = 1 - ki * ki;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> (c &lt; 1.0e-5) <span class="comment">// remove NaNs for constan signal</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      c = 1.0e-5;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    E *= c;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// new LP coefficients</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    pTmp[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = -ki;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>; j++)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      pTmp[j] = pLP[j] - ki * pLP[i - j - 1];</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt;= <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>; j++)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      pLP[j] = pTmp[j];</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordflow">return</span> E;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
<div class="ttc" id="namespacernnlm_html_a318f3e22ac453fd1efea583625fe76c3"><div class="ttname"><a href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">rnnlm::n</a></div><div class="ttdeci">struct rnnlm::@10::@11 n</div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga81fe1983cccd15a9d062a3620cf71d8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ExtractWaveformRemainder </td>
          <td>(</td>
          <td class="paramtype">const VectorBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>wave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FrameExtractionOptions &amp;&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Vector&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>wave_remainder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00169">169</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="kaldi-vector_8cc_source.html#l00227">VectorBase&lt; Real &gt;::CopyFromVec()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="feature-functions_8cc_source.html#l00029">kaldi::NumFrames()</a>, <a class="el" href="kaldi-vector_8cc_source.html#l00189">Vector&lt; Real &gt;::Resize()</a>, and <a class="el" href="feature-functions_8h_source.html#l00119">FrameExtractionOptions::WindowShift()</a>.</p>

<p>Referenced by <a class="el" href="feature-spectrogram_8cc_source.html#l00041">Spectrogram::Compute()</a>, <a class="el" href="feature-fbank_8cc_source.html#l00104">Fbank::ComputeInternal()</a>, <a class="el" href="feature-mfcc_8cc_source.html#l00116">Mfcc::ComputeInternal()</a>, and <a class="el" href="feature-plp_8cc_source.html#l00160">Plp::ComputeInternal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                                                 {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> frame_shift = opts.WindowShift();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> num_frames = <a class="code" href="group__feat.html#gabec1d2e87a51be7dc54d6fea38e38e2a">NumFrames</a>(wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>(), opts);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// offset is the amount at the start that has been extracted.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> offset = num_frames * frame_shift;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(wave_remainder != NULL);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> remaining_len = wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>() - offset;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  wave_remainder-&gt;<a class="code" href="classkaldi_1_1Vector.html#ae98e624cca1982e866ff195131ed4427">Resize</a>(remaining_len);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(remaining_len &gt;= 0);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (remaining_len &gt; 0)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    wave_remainder-&gt;<a class="code" href="classkaldi_1_1VectorBase.html#a959973067b5f0a4b205c9d8385fa33df">CopyFromVec</a>(SubVector&lt;BaseFloat&gt;(wave, offset, remaining_len));</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1Vector_html_ae98e624cca1982e866ff195131ed4427"><div class="ttname"><a href="classkaldi_1_1Vector.html#ae98e624cca1982e866ff195131ed4427">kaldi::Vector::Resize</a></div><div class="ttdeci">void Resize(MatrixIndexT length, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Set vector to a specified size (can be zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8cc_source.html#l00189">kaldi-vector.cc:189</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_a959973067b5f0a4b205c9d8385fa33df"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#a959973067b5f0a4b205c9d8385fa33df">kaldi::VectorBase::CopyFromVec</a></div><div class="ttdeci">void CopyFromVec(const VectorBase&lt; Real &gt; &amp;v)</div><div class="ttdoc">Copy data from another vector (must match own size). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8cc_source.html#l00227">kaldi-vector.cc:227</a></div></div>
<div class="ttc" id="group__feat_html_gabec1d2e87a51be7dc54d6fea38e38e2a"><div class="ttname"><a href="group__feat.html#gabec1d2e87a51be7dc54d6fea38e38e2a">kaldi::NumFrames</a></div><div class="ttdeci">int32 NumFrames(int32 nsamp, const FrameExtractionOptions &amp;opts)</div><div class="ttdef"><b>Definition:</b> <a href="feature-functions_8cc_source.html#l00029">feature-functions.cc:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::VectorBase::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Returns the dimension of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00059">kaldi-vector.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga6bda4504c235b976eefdcd87ef035a52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ExtractWindow </td>
          <td>(</td>
          <td class="paramtype">const VectorBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>wave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FrameExtractionOptions &amp;&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FeatureWindowFunction &amp;&#160;</td>
          <td class="paramname"><em>window_function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Vector&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BaseFloat *&#160;</td>
          <td class="paramname"><em>log_energy_pre_window</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00091">91</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="kaldi-vector_8cc_source.html#l00929">VectorBase&lt; Real &gt;::Add()</a>, <a class="el" href="kaldi-vector_8cc_source.html#l00227">VectorBase&lt; Real &gt;::CopyFromVec()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="feature-functions_8cc_source.html#l00051">kaldi::Dither()</a>, <a class="el" href="feature-functions_8h_source.html#l00077">FrameExtractionOptions::dither</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-math_8h_source.html#l00100">kaldi::Log()</a>, <a class="el" href="kaldi-vector_8cc_source.html#l00941">VectorBase&lt; Real &gt;::MulElements()</a>, <a class="el" href="feature-functions_8h_source.html#l00125">FrameExtractionOptions::PaddedWindowSize()</a>, <a class="el" href="feature-functions_8h_source.html#l00078">FrameExtractionOptions::preemph_coeff</a>, <a class="el" href="feature-functions_8cc_source.html#l00057">kaldi::Preemphasize()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00089">VectorBase&lt; Real &gt;::Range()</a>, <a class="el" href="feature-functions_8h_source.html#l00079">FrameExtractionOptions::remove_dc_offset</a>, <a class="el" href="kaldi-vector_8cc_source.html#l00189">Vector&lt; Real &gt;::Resize()</a>, <a class="el" href="nnet-utils_8cc_source.html#l00162">kaldi::nnet3::SetZero()</a>, <a class="el" href="feature-functions_8h_source.html#l00082">FrameExtractionOptions::snip_edges</a>, <a class="el" href="kaldi-vector_8cc_source.html#l00680">VectorBase&lt; Real &gt;::Sum()</a>, <a class="el" href="kaldi-vector_8cc_source.html#l00036">kaldi::VecVec()</a>, <a class="el" href="feature-functions_8h_source.html#l00135">FeatureWindowFunction::window</a>, <a class="el" href="feature-functions_8h_source.html#l00119">FrameExtractionOptions::WindowShift()</a>, and <a class="el" href="feature-functions_8h_source.html#l00122">FrameExtractionOptions::WindowSize()</a>.</p>

<p>Referenced by <a class="el" href="feature-spectrogram_8cc_source.html#l00041">Spectrogram::Compute()</a>, <a class="el" href="feature-fbank_8cc_source.html#l00104">Fbank::ComputeInternal()</a>, <a class="el" href="feature-mfcc_8cc_source.html#l00116">Mfcc::ComputeInternal()</a>, and <a class="el" href="feature-plp_8cc_source.html#l00160">Plp::ComputeInternal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                                     {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> frame_shift = opts.WindowShift();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> frame_length = opts.WindowSize();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(window_function.window.Dim() == frame_length);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(frame_shift != 0 &amp;&amp; frame_length != 0);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  Vector&lt;BaseFloat&gt; wave_part(frame_length);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">if</span> (opts.snip_edges) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> start = frame_shift*f, end = start + frame_length;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(start &gt;= 0 &amp;&amp; end &lt;= wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>());</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    wave_part.CopyFromVec(wave.<a class="code" href="classkaldi_1_1VectorBase.html#acb1578cb13d51c1d7456c3a59bb3b69a">Range</a>(start, frame_length));</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// If opts.snip_edges = false, we allow the frames to go slightly over the</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// edges of the file; we&#39;ll extend the data by reflection.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> mid = frame_shift * (f + 0.5),</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        begin = mid - frame_length / 2,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        end = begin + frame_length,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        begin_limited = std::max&lt;int32&gt;(0, begin),</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        end_limited = std::min(end, wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>()),</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        length_limited = end_limited - begin_limited;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// Copy the main part.  Usually this will be the entire window.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    wave_part.Range(begin_limited - begin, length_limited).</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        CopyFromVec(wave.<a class="code" href="classkaldi_1_1VectorBase.html#acb1578cb13d51c1d7456c3a59bb3b69a">Range</a>(begin_limited, length_limited));</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// Deal with any end effects by reflection, if needed.  This code will</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// rarely be reached, so we don&#39;t concern ourselves with efficiency.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> f = begin; f &lt; 0; f++) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> reflected_f = -f;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="comment">// The next statement will only have an effect in the case of files</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="comment">// shorter than a single frame, it&#39;s to avoid a crash in those cases.</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      reflected_f = reflected_f % wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>(); </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      wave_part(f - begin) = wave(reflected_f);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> f = wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>(); f &lt; end; f++) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> distance_to_end = f - wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>();</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="comment">// The next statement will only have an effect in the case of files</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="comment">// shorter than a single frame, it&#39;s to avoid a crash in those cases.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      distance_to_end = distance_to_end % wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> reflected_f = wave.<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>() - 1 - distance_to_end;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      wave_part(f - begin) = wave(reflected_f);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(window != NULL);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> frame_length_padded = opts.PaddedWindowSize();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">if</span> (window-&gt;<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>() != frame_length_padded)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    window-&gt;<a class="code" href="classkaldi_1_1Vector.html#ae98e624cca1982e866ff195131ed4427">Resize</a>(frame_length_padded);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  SubVector&lt;BaseFloat&gt; window_part(*window, 0, frame_length);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  window_part.CopyFromVec(wave_part);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> (opts.dither != 0.0) <a class="code" href="group__feat.html#ga46d7bb685639cae24e9aa9077bfdbabd">Dither</a>(&amp;window_part, opts.dither);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">if</span> (opts.remove_dc_offset)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    window_part.Add(-window_part.Sum() / frame_length);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">if</span> (log_energy_pre_window != NULL) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> energy = std::max(<a class="code" href="group__matrix__funcs__scalar.html#ga4750cd6f7a02a013435779588056b153">VecVec</a>(window_part, window_part),</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                std::numeric_limits&lt;BaseFloat&gt;::min());</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    *log_energy_pre_window = <a class="code" href="namespacekaldi.html#af75c4606b108091c348102660de63180">Log</a>(energy);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">if</span> (opts.preemph_coeff != 0.0)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="group__feat.html#ga04035df68c8b47aef47844494e226239">Preemphasize</a>(&amp;window_part, opts.preemph_coeff);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  window_part.MulElements(window_function.window);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">if</span> (frame_length != frame_length_padded)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    SubVector&lt;BaseFloat&gt;(*window, frame_length,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                         frame_length_padded-frame_length).<a class="code" href="namespacekaldi_1_1nnet3.html#a9f63e4d60600b08466b42e409dd6253d">SetZero</a>();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1Vector_html_ae98e624cca1982e866ff195131ed4427"><div class="ttname"><a href="classkaldi_1_1Vector.html#ae98e624cca1982e866ff195131ed4427">kaldi::Vector::Resize</a></div><div class="ttdeci">void Resize(MatrixIndexT length, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Set vector to a specified size (can be zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8cc_source.html#l00189">kaldi-vector.cc:189</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_af75c4606b108091c348102660de63180"><div class="ttname"><a href="namespacekaldi.html#af75c4606b108091c348102660de63180">kaldi::Log</a></div><div class="ttdeci">double Log(double x)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00100">kaldi-math.h:100</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="group__feat_html_ga04035df68c8b47aef47844494e226239"><div class="ttname"><a href="group__feat.html#ga04035df68c8b47aef47844494e226239">kaldi::Preemphasize</a></div><div class="ttdeci">void Preemphasize(VectorBase&lt; BaseFloat &gt; *waveform, BaseFloat preemph_coeff)</div><div class="ttdef"><b>Definition:</b> <a href="feature-functions_8cc_source.html#l00057">feature-functions.cc:57</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a9f63e4d60600b08466b42e409dd6253d"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a9f63e4d60600b08466b42e409dd6253d">kaldi::nnet3::SetZero</a></div><div class="ttdeci">void SetZero(bool is_gradient, Nnet *nnet)</div><div class="ttdoc">Calls SetZero (with the given is_gradient parameter) on all updatable components of the nnet...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-utils_8cc_source.html#l00162">nnet-utils.cc:162</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="group__matrix__funcs__scalar_html_ga4750cd6f7a02a013435779588056b153"><div class="ttname"><a href="group__matrix__funcs__scalar.html#ga4750cd6f7a02a013435779588056b153">kaldi::VecVec</a></div><div class="ttdeci">Real VecVec(const VectorBase&lt; Real &gt; &amp;a, const VectorBase&lt; Real &gt; &amp;b)</div><div class="ttdoc">Returns dot product between v1 and v2. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8cc_source.html#l00036">kaldi-vector.cc:36</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::VectorBase::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Returns the dimension of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00059">kaldi-vector.h:59</a></div></div>
<div class="ttc" id="group__feat_html_ga46d7bb685639cae24e9aa9077bfdbabd"><div class="ttname"><a href="group__feat.html#ga46d7bb685639cae24e9aa9077bfdbabd">kaldi::Dither</a></div><div class="ttdeci">void Dither(VectorBase&lt; BaseFloat &gt; *waveform, BaseFloat dither_value)</div><div class="ttdef"><b>Definition:</b> <a href="feature-functions_8cc_source.html#l00051">feature-functions.cc:51</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_acb1578cb13d51c1d7456c3a59bb3b69a"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#acb1578cb13d51c1d7456c3a59bb3b69a">kaldi::VectorBase::Range</a></div><div class="ttdeci">SubVector&lt; Real &gt; Range(const MatrixIndexT o, const MatrixIndexT l)</div><div class="ttdoc">Returns a sub-vector of a vector (a range of elements). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00089">kaldi-vector.h:89</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gad935da5d50c821fb441ac2d489f13d83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetEqualLoudnessVector </td>
          <td>(</td>
          <td class="paramtype">const MelBanks &amp;&#160;</td>
          <td class="paramname"><em>mel_banks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Vector&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>ans</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00347">347</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="mel-computations_8h_source.html#l00082">MelBanks::GetCenterFreqs()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">rnnlm::n</a>, <a class="el" href="mel-computations_8h_source.html#l00079">MelBanks::NumBins()</a>, and <a class="el" href="kaldi-vector_8cc_source.html#l00189">Vector&lt; Real &gt;::Resize()</a>.</p>

<p>Referenced by <a class="el" href="feature-plp_8cc_source.html#l00094">Plp::GetEqualLoudness()</a>.</p>
<div class="fragment"><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                                    {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">n</a> = mel_banks.NumBins();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// central freq of each mel bin</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keyword">const</span> Vector&lt;BaseFloat&gt; &amp;f0 = mel_banks.GetCenterFreqs();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  ans-&gt;<a class="code" href="classkaldi_1_1Vector.html#ae98e624cca1982e866ff195131ed4427">Resize</a>(n);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">n</a>; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> fsq = f0(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) * f0(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> fsub = fsq / (fsq + 1.6e5);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    (*ans)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = fsub * fsub * ((fsq + 1.44e6) / (fsq + 9.61e6));</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div>
<div class="ttc" id="namespacernnlm_html_a318f3e22ac453fd1efea583625fe76c3"><div class="ttname"><a href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">rnnlm::n</a></div><div class="ttdeci">struct rnnlm::@10::@11 n</div></div>
<div class="ttc" id="classkaldi_1_1Vector_html_ae98e624cca1982e866ff195131ed4427"><div class="ttname"><a href="classkaldi_1_1Vector.html#ae98e624cca1982e866ff195131ed4427">kaldi::Vector::Resize</a></div><div class="ttdeci">void Resize(MatrixIndexT length, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Set vector to a specified size (can be zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8cc_source.html#l00189">kaldi-vector.cc:189</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gac626f9ce3c50bf797d436a480e8ad386"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitIdftBases </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>n_bases</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>dimension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Matrix&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>mat_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00360">360</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-math_8h_source.html#l00044">M_PI</a>, and <a class="el" href="kaldi-matrix_8cc_source.html#l00692">Matrix&lt; Real &gt;::Resize()</a>.</p>

<p>Referenced by <a class="el" href="feature-plp_8cc_source.html#l00027">Plp::Plp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                                                                               {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> angle = <a class="code" href="kaldi-math_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / <span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a><span class="keyword">&gt;</span>(dimension - 1);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> scale = 1.0f / (2.0 * <span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a><span class="keyword">&gt;</span>(dimension - 1));</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  mat_out-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(n_bases, dimension);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; n_bases; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    (*mat_out)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>, 0) = 1.0 * scale;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> i_fl = <span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a><span class="keyword">&gt;</span>(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 1; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; dimension - 1; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> j_fl = <span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a><span class="keyword">&gt;</span>(<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      (*mat_out)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>) = 2.0 * scale * cos(angle * i_fl * j_fl);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    (*mat_out)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>, dimension -1)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        = scale * cos(angle * i_fl * static_cast&lt;BaseFloat&gt;(dimension-1));</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="kaldi-math_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="kaldi-math_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00044">kaldi-math.h:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_aaabb78f23b01b8ac551b3cc56f602be4"><div class="ttname"><a href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00692">kaldi-matrix.cc:692</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga62f868a9e143ccea1ff7a3a81b8477aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Lpc2Cepstrum </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const BaseFloat *&#160;</td>
          <td class="paramname"><em>pLPC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BaseFloat *&#160;</td>
          <td class="paramname"><em>pCepst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mel-computations_8cc_source.html#l00295">295</a> of file <a class="el" href="mel-computations_8cc_source.html">mel-computations.cc</a>.</p>

<p>References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, and <a class="el" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">rnnlm::n</a>.</p>

<p>Referenced by <a class="el" href="feature-plp_8cc_source.html#l00160">Plp::ComputeInternal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                                                   {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">n</a>; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">double</span> sum = 0.0;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>; j++) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      sum += <span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a><span class="keyword">&gt;</span>(i - <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>) * pLPC[j] * pCepst[i - j - 1];</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    pCepst[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = -pLPC[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] - sum / <span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a><span class="keyword">&gt;</span>(i + 1);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
<div class="ttc" id="namespacernnlm_html_a318f3e22ac453fd1efea583625fe76c3"><div class="ttname"><a href="namespacernnlm.html#a318f3e22ac453fd1efea583625fe76c3">rnnlm::n</a></div><div class="ttdeci">struct rnnlm::@10::@11 n</div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4751031100e38042b165151f3689b20a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void kaldi::MaxNormalizeEnergy </td>
          <td>(</td>
          <td class="paramtype">Matrix&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>feats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8h_source.html#l00177">177</a> of file <a class="el" href="feature-functions_8h_source.html">feature-functions.h</a>.</p>

<p>References <a class="el" href="kaldi-matrix_8cc_source.html#l01515">MatrixBase&lt; Real &gt;::Add()</a>, and <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>.</p>
<div class="fragment"><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                                                         {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// Just subtract the largest energy value... assume energy is the first</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// column of the mfcc features.  Don&#39;t do the flooring of energy (dithering</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// should prevent exact zeros).</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// We didn&#39;t put this in the main MFCC computation as we wanted to make sure</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// it is stateless (so we can do it bit by bit for large waveforms).</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// not compatible with the order_as_htk_ option in MfccOptions.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  SubMatrix&lt;BaseFloat&gt; energy(*feats, 0, feats-&gt;<a class="code" href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>(), 0, 1);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  energy.Add(-energy.Max());</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">kaldi::MatrixBase::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00058">kaldi-matrix.h:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gabec1d2e87a51be7dc54d6fea38e38e2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 NumFrames </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>nsamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FrameExtractionOptions &amp;&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00029">29</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="feature-functions_8h_source.html#l00082">FrameExtractionOptions::snip_edges</a>, <a class="el" href="feature-functions_8h_source.html#l00119">FrameExtractionOptions::WindowShift()</a>, and <a class="el" href="feature-functions_8h_source.html#l00122">FrameExtractionOptions::WindowSize()</a>.</p>

<p>Referenced by <a class="el" href="feature-spectrogram_8cc_source.html#l00041">Spectrogram::Compute()</a>, <a class="el" href="feature-fbank_8cc_source.html#l00104">Fbank::ComputeInternal()</a>, <a class="el" href="feature-mfcc_8cc_source.html#l00116">Mfcc::ComputeInternal()</a>, <a class="el" href="feature-plp_8cc_source.html#l00160">Plp::ComputeInternal()</a>, and <a class="el" href="feature-functions_8cc_source.html#l00169">kaldi::ExtractWaveformRemainder()</a>.</p>
<div class="fragment"><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                                                    {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> frame_shift = opts.WindowShift();</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> frame_length = opts.WindowSize();</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(frame_shift != 0 &amp;&amp; frame_length != 0);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">if</span> (opts.snip_edges) {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordflow">if</span> (static_cast&lt;int32&gt;(nsamp) &lt; frame_length)</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;      <span class="keywordflow">return</span> (1 + ((nsamp - frame_length) / frame_shift));</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <span class="comment">// view the expression above as: nsamp-frame_length is how much room we</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      <span class="comment">// have to shift the frame within the waveform; frame_shift is how much</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      <span class="comment">// we shift it each time and the ratio is how many times we can shift</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;      <span class="comment">// it (integer arithmetic rounds down).</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a>)(nsamp * 1.0f / frame_shift + 0.5f);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// if --snip-edges=false, the number of frames would be determined by</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment">// rounding the (file-length / frame-shift) to the nearest integer</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  }</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga04035df68c8b47aef47844494e226239"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Preemphasize </td>
          <td>(</td>
          <td class="paramtype">VectorBase&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>waveform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BaseFloat&#160;</td>
          <td class="paramname"><em>preemph_coeff</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00057">57</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="kaldi-vector_8h_source.html#l00059">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>.</p>

<p>Referenced by <a class="el" href="feature-functions_8cc_source.html#l00091">kaldi::ExtractWindow()</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                                                            {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">if</span> (preemph_coeff == 0.0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(preemph_coeff &gt;= 0.0 &amp;&amp; preemph_coeff &lt;= 1.0);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = waveform-&gt;<a class="code" href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>()-1; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>--)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    (*waveform)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) -= preemph_coeff * (*waveform)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>-1);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  (*waveform)(0) -= preemph_coeff * (*waveform)(0);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="classkaldi_1_1VectorBase_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1VectorBase.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::VectorBase::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Returns the dimension of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8h_source.html#l00059">kaldi-vector.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga9cf1c363a29d6133ca1f1692b53d25cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessPitch </td>
          <td>(</td>
          <td class="paramtype">const ProcessPitchOptions &amp;&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MatrixBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Matrix&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function processes the raw (NCCF, pitch) quantities computed by ComputeKaldiPitch, and processes them into features. </p>
<p>By default it will output three-dimensional features, (POV-feature, mean-subtracted-log-pitch, delta-of-raw-pitch), but this is configurable in the options. The number of rows of "output" will be the number of frames (rows) in "input", and the number of columns will be the number of different types of features requested (by default, 3; 4 is the max). The four config variables &ndash;add-pov-feature, &ndash;add-normalized-log-pitch, &ndash;add-delta-pitch, &ndash;add-raw-log-pitch determine which features we create; by default we create the first three. </p>

<p>Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01536">1536</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p>References <a class="el" href="pitch-functions_8h_source.html#l00329">OnlineProcessPitch::Dim()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01369">OnlineProcessPitch::GetFrame()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01524">OnlineProcessPitch::NumFramesReady()</a>, and <a class="el" href="kaldi-matrix_8cc_source.html#l00692">Matrix&lt; Real &gt;::Resize()</a>.</p>

<p>Referenced by <a class="el" href="process-kaldi-pitch-feats_8cc_source.html#l00028">main()</a>, <a class="el" href="pitch-functions-test_8cc_source.html#l00071">kaldi::UnitTestPieces()</a>, and <a class="el" href="pitch-functions-test_8cc_source.html#l00478">kaldi::UnitTestProcess()</a>.</p>
<div class="fragment"><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                                             {</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  OnlineMatrixFeature pitch_feat(input);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  OnlineProcessPitch online_process_pitch(opts, &amp;pitch_feat);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  output-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(online_process_pitch.NumFramesReady(),</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                 online_process_pitch.Dim());</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> t = 0; t &lt; online_process_pitch.NumFramesReady(); t++) {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    SubVector&lt;BaseFloat&gt; row(*output, t);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    online_process_pitch.GetFrame(t, &amp;row);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_aaabb78f23b01b8ac551b3cc56f602be4"><div class="ttname"><a href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00692">kaldi-matrix.cc:692</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga85f143ad1d8dc191243adaa567cd735a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReverseFrames </td>
          <td>(</td>
          <td class="paramtype">const MatrixBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>input_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Matrix&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>output_features</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00414">414</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="kaldi-vector_8cc_source.html#l00227">VectorBase&lt; Real &gt;::CopyFromVec()</a>, <a class="el" href="kaldi-error_8h_source.html#l00160">KALDI_ERR</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>, and <a class="el" href="kaldi-matrix_8cc_source.html#l00692">Matrix&lt; Real &gt;::Resize()</a>.</p>

<p>Referenced by <a class="el" href="reverse-feats_8cc_source.html#l00026">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                                                       {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> T = input_features.<a class="code" href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>(), D = input_features.<a class="code" href="classkaldi_1_1MatrixBase.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>();</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">if</span> (T == 0 || D == 0)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;ReverseFrames: empty input&quot;</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  output_features-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(T, D);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> t = 0; t &lt; T; t++) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    SubVector&lt;BaseFloat&gt; dst_row(*output_features, t);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    SubVector&lt;BaseFloat&gt; src_row(input_features, T-1-t);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    dst_row.CopyFromVec(src_row);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00160">kaldi-error.h:160</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">kaldi::MatrixBase::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00058">kaldi-matrix.h:58</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_afe58124fbfb387ddc20513bf3075b16e"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#afe58124fbfb387ddc20513bf3075b16e">kaldi::MatrixBase::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const </div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00061">kaldi-matrix.h:61</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_aaabb78f23b01b8ac551b3cc56f602be4"><div class="ttname"><a href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00692">kaldi-matrix.cc:692</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gac509a0ded6c5bbd8a955a21726a614f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SlidingWindowCmn </td>
          <td>(</td>
          <td class="paramtype">const SlidingWindowCmnOptions &amp;&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MatrixBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MatrixBase&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applies sliding-window cepstral mean and/or variance normalization. </p>
<p>See the strings registering the options in the options class for information on how this works and what the options are. input and output must have the same dimension. </p>

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00523">523</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="kaldi-matrix_8cc_source.html#l00733">MatrixBase&lt; Real &gt;::CopyFromMat()</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l01023">kaldi::SameDim()</a>, and <a class="el" href="feature-functions_8cc_source.html#l00436">kaldi::SlidingWindowCmnInternal()</a>.</p>

<p>Referenced by <a class="el" href="apply-cmvn-sliding_8cc_source.html#l00026">main()</a>, and <a class="el" href="feature-functions-test_8cc_source.html#l00032">kaldi::UnitTestOnlineCmvn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                                                     {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="group__matrix__funcs__io.html#ga07b147212efb08775c252cd4cc7453fe">SameDim</a>(input, *output) &amp;&amp; input.<a class="code" href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>() &gt; 0);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  Matrix&lt;double&gt; input_dbl(input), output_dbl(input.<a class="code" href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>(), input.<a class="code" href="classkaldi_1_1MatrixBase.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>());</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// calll double-precision version</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <a class="code" href="namespacekaldi.html#afeb46d0f391b790f76a8c2797f862044">SlidingWindowCmnInternal</a>(opts, input_dbl, &amp;output_dbl);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  output-&gt;<a class="code" href="classkaldi_1_1MatrixBase.html#a557fe407783c0d8f2e604666fd48f96d">CopyFromMat</a>(output_dbl);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_a557fe407783c0d8f2e604666fd48f96d"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#a557fe407783c0d8f2e604666fd48f96d">kaldi::MatrixBase::CopyFromMat</a></div><div class="ttdeci">void CopyFromMat(const MatrixBase&lt; OtherReal &gt; &amp;M, MatrixTransposeType trans=kNoTrans)</div><div class="ttdoc">Copy given matrix. (no resize is done). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00733">kaldi-matrix.cc:733</a></div></div>
<div class="ttc" id="group__matrix__funcs__io_html_ga07b147212efb08775c252cd4cc7453fe"><div class="ttname"><a href="group__matrix__funcs__io.html#ga07b147212efb08775c252cd4cc7453fe">kaldi::SameDim</a></div><div class="ttdeci">bool SameDim(const MatrixBase&lt; Real &gt; &amp;M, const MatrixBase&lt; Real &gt; &amp;N)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l01023">kaldi-matrix.h:1023</a></div></div>
<div class="ttc" id="namespacekaldi_html_afeb46d0f391b790f76a8c2797f862044"><div class="ttname"><a href="namespacekaldi.html#afeb46d0f391b790f76a8c2797f862044">kaldi::SlidingWindowCmnInternal</a></div><div class="ttdeci">void SlidingWindowCmnInternal(const SlidingWindowCmnOptions &amp;opts, const MatrixBase&lt; double &gt; &amp;input, MatrixBase&lt; double &gt; *output)</div><div class="ttdef"><b>Definition:</b> <a href="feature-functions_8cc_source.html#l00436">feature-functions.cc:436</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">kaldi::MatrixBase::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00058">kaldi-matrix.h:58</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_afe58124fbfb387ddc20513bf3075b16e"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#afe58124fbfb387ddc20513bf3075b16e">kaldi::MatrixBase::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const </div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00061">kaldi-matrix.h:61</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga1d650c792ffea3eba71aaaf0df52d93e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SpliceFrames </td>
          <td>(</td>
          <td class="paramtype">const MatrixBase&lt; BaseFloat &gt; &amp;&#160;</td>
          <td class="paramname"><em>input_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>left_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>right_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Matrix&lt; BaseFloat &gt; *&#160;</td>
          <td class="paramname"><em>output_features</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="feature-functions_8cc_source.html#l00391">391</a> of file <a class="el" href="feature-functions_8cc_source.html">feature-functions.cc</a>.</p>

<p>References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00160">KALDI_ERR</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00058">MatrixBase&lt; Real &gt;::NumRows()</a>, and <a class="el" href="kaldi-matrix_8cc_source.html#l00692">Matrix&lt; Real &gt;::Resize()</a>.</p>

<p>Referenced by <a class="el" href="splice-feats_8cc_source.html#l00025">main()</a>, and <a class="el" href="online-feature-test_8cc_source.html#l00132">kaldi::TestOnlineSpliceFrames()</a>.</p>
<div class="fragment"><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                                      {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> T = input_features.<a class="code" href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">NumRows</a>(), D = input_features.<a class="code" href="classkaldi_1_1MatrixBase.html#afe58124fbfb387ddc20513bf3075b16e">NumCols</a>();</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">if</span> (T == 0 || D == 0)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;SpliceFrames: empty input&quot;</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(left_context &gt;= 0 &amp;&amp; right_context &gt;= 0);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> N = 1 + left_context + right_context;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  output_features-&gt;<a class="code" href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">Resize</a>(T, D*N);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> t = 0; t &lt; T; t++) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    SubVector&lt;BaseFloat&gt; dst_row(*output_features, t);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; N; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> t2 = t + <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> - left_context;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="keywordflow">if</span> (t2 &lt; 0) t2 = 0;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keywordflow">if</span> (t2 &gt;= T) t2 = T-1;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      SubVector&lt;BaseFloat&gt; dst(dst_row, <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>*D, D),</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;          src(input_features, t2);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      dst.CopyFromVec(src);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00160">kaldi-error.h:160</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_ab204078beff8151c95d1828544acf92c"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#ab204078beff8151c95d1828544acf92c">kaldi::MatrixBase::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const </div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00058">kaldi-matrix.h:58</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_afe58124fbfb387ddc20513bf3075b16e"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#afe58124fbfb387ddc20513bf3075b16e">kaldi::MatrixBase::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const </div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00061">kaldi-matrix.h:61</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_aaabb78f23b01b8ac551b3cc56f602be4"><div class="ttname"><a href="classkaldi_1_1Matrix.html#aaabb78f23b01b8ac551b3cc56f602be4">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00692">kaldi-matrix.cc:692</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Apr 26 2016 14:54:46 for Kaldi by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
