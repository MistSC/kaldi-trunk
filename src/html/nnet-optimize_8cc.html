<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: nnet3/nnet-optimize.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nnet-optimize_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">nnet-optimize.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="nnet-optimize_8h_source.html">nnet3/nnet-optimize.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="nnet-optimize-utils_8h_source.html">nnet3/nnet-optimize-utils.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for nnet-optimize.cc:</div>
<div class="dyncontent">
<div class="center"><img src="nnet-optimize_8cc__incl.png" border="0" usemap="#nnet3_2nnet-optimize_8cc" alt=""/></div>
<map name="nnet3_2nnet-optimize_8cc" id="nnet3_2nnet-optimize_8cc">
<area shape="rect" id="node2" href="nnet-optimize_8h.html" title="nnet3/nnet&#45;optimize.h" alt="" coords="2597,88,2760,115"/><area shape="rect" id="node50" href="nnet-optimize-utils_8h.html" title="nnet3/nnet&#45;optimize\l&#45;utils.h" alt="" coords="2420,81,2572,122"/><area shape="rect" id="node3" href="nnet-compile_8h.html" title="nnet3/nnet&#45;compile.h" alt="" coords="2442,245,2600,272"/><area shape="rect" id="node48" href="nnet-analyze_8h.html" title="nnet3/nnet&#45;analyze.h" alt="" coords="2585,171,2743,197"/><area shape="rect" id="node4" href="nnet-component-itf_8h.html" title="nnet3/nnet&#45;component\l&#45;itf.h" alt="" coords="2324,635,2495,677"/><area shape="rect" id="node40" href="nnet-parse_8h.html" title="nnet3/nnet&#45;parse.h" alt="" coords="995,725,1140,752"/><area shape="rect" id="node43" href="_2nnet-nnet_8h.html" title="nnet3/nnet&#45;nnet.h" alt="" coords="2135,485,2273,512"/><area shape="rect" id="node45" href="nnet-computation_8h.html" title="The two main classes defined in this header are struct ComputationRequest, which basically defines a ..." alt="" coords="2293,411,2483,437"/><area shape="rect" id="node46" href="nnet-computation-graph_8h.html" title="nnet3/nnet&#45;computation\l&#45;graph.h" alt="" coords="2432,321,2611,362"/><area shape="rect" id="node5" href="nnet-common_8h.html" title="nnet3/nnet&#45;common.h" alt="" coords="1925,725,2091,752"/><area shape="rect" id="node19" href="kaldi-error_8h.html" title="base/kaldi&#45;error.h" alt="" coords="2335,1040,2468,1067"/><area shape="rect" id="node41" href="kaldi-mutex_8h.html" title="thread/kaldi&#45;mutex.h" alt="" coords="2340,725,2493,752"/><area shape="rect" id="node6" href="kaldi-common_8h.html" title="base/kaldi&#45;common.h" alt="" coords="1716,965,1875,992"/><area shape="rect" id="node25" href="common-utils_8h.html" title="util/common&#45;utils.h" alt="" coords="1559,808,1704,835"/><area shape="rect" id="node30" href="options-itf_8h.html" title="itf/options&#45;itf.h" alt="" coords="1834,891,1947,917"/><area shape="rect" id="node31" href="matrix-lib_8h.html" title="matrix/matrix&#45;lib.h" alt="" coords="736,808,875,835"/><area shape="rect" id="node39" href="cu-matrix-lib_8h.html" title="cudamatrix/cu&#45;matrix\l&#45;lib.h" alt="" coords="2023,801,2181,842"/><area shape="rect" id="node17" href="kaldi-utils_8h.html" title="base/kaldi&#45;utils.h" alt="" coords="1714,1115,1843,1141"/><area shape="rect" id="node21" href="kaldi-types_8h.html" title="base/kaldi&#45;types.h" alt="" coords="1551,1115,1689,1141"/><area shape="rect" id="node22" href="io-funcs_8h.html" title="base/io&#45;funcs.h" alt="" coords="1406,1040,1524,1067"/><area shape="rect" id="node24" href="kaldi-math_8h.html" title="base/kaldi&#45;math.h" alt="" coords="1549,1040,1685,1067"/><area shape="rect" id="node26" href="kaldi-io_8h.html" title="util/kaldi&#45;io.h" alt="" coords="1413,891,1515,917"/><area shape="rect" id="node28" href="text-utils_8h.html" title="util/text&#45;utils.h" alt="" coords="1058,891,1171,917"/><area shape="rect" id="node27" href="kaldi-io-inl_8h.html" title="util/kaldi&#45;io&#45;inl.h" alt="" coords="1254,965,1375,992"/><area shape="rect" id="node32" href="cblas-wrappers_8h.html" title="matrix/cblas&#45;wrappers.h" alt="" coords="357,891,531,917"/><area shape="rect" id="node33" href="sp-matrix_8h.html" title="matrix/sp&#45;matrix.h" alt="" coords="785,965,924,992"/><area shape="rect" id="node34" href="kaldi-vector_8h.html" title="matrix/kaldi&#45;vector.h" alt="" coords="620,1040,772,1067"/><area shape="rect" id="node35" href="kaldi-matrix_8h.html" title="matrix/kaldi&#45;matrix.h" alt="" coords="329,1040,483,1067"/><area shape="rect" id="node36" href="matrix-functions_8h.html" title="matrix/matrix&#45;functions.h" alt="" coords="347,965,529,992"/><area shape="rect" id="node37" href="tp-matrix_8h.html" title="matrix/tp&#45;matrix.h" alt="" coords="736,891,875,917"/><area shape="rect" id="node38" href="srfft_8h.html" title="matrix/srfft.h" alt="" coords="555,965,659,992"/><area shape="rect" id="node44" href="nnet-descriptor_8h.html" title="This file contains class definitions for classes ForwardingDescriptor, SumDescriptor and Descriptor..." alt="" coords="1586,560,1757,587"/></map>
</div>
</div>
<p><a href="nnet-optimize_8cc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacekaldi"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacekaldi.html">kaldi</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacekaldi_1_1nnet3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacekaldi_1_1nnet3.html">kaldi::nnet3</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a20e1e086f75487fe19752fd2b34ca627"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacekaldi_1_1nnet3.html#a20e1e086f75487fe19752fd2b34ca627">MoveSizingCommands</a> (const Nnet &amp;nnet, NnetComputation *computation)</td></tr>
<tr class="memdesc:a20e1e086f75487fe19752fd2b34ca627"><td class="mdescLeft">&#160;</td><td class="mdescRight">This optimization moves commands that initialize matrices to as late as possible, and commands that empty matrices to as early as possible.  <a href="#a20e1e086f75487fe19752fd2b34ca627">More...</a><br/></td></tr>
<tr class="separator:a20e1e086f75487fe19752fd2b34ca627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae053839b5ed781f2f7408489a1528dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacekaldi_1_1nnet3.html#aae053839b5ed781f2f7408489a1528dd">RemoveUnnecessaryZeroing</a> (const Nnet &amp;nnet, NnetComputation *computation)</td></tr>
<tr class="memdesc:aae053839b5ed781f2f7408489a1528dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This optimization function changes, where possible, matrix initializations of type kAllocMatrixZeroed to kAllocMatrixUndefined.  <a href="#aae053839b5ed781f2f7408489a1528dd">More...</a><br/></td></tr>
<tr class="separator:aae053839b5ed781f2f7408489a1528dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4874b04bb051028a1b6cb08cff2d1994"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacekaldi_1_1nnet3.html#a4874b04bb051028a1b6cb08cff2d1994">ComputeCommandPairs</a> (const std::pair&lt; std::vector&lt; int32 &gt;, std::vector&lt; int32 &gt; &gt; &amp;lists, std::vector&lt; std::pair&lt; int32, int32 &gt; &gt; *pairs)</td></tr>
<tr class="separator:a4874b04bb051028a1b6cb08cff2d1994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92c251003c3f612c5cfbcbd72cbd030b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacekaldi_1_1nnet3.html#a92c251003c3f612c5cfbcbd72cbd030b">RemoveUnnecessaryAllocation</a> (const Nnet &amp;nnet, NnetComputation *computation)</td></tr>
<tr class="memdesc:a92c251003c3f612c5cfbcbd72cbd030b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This optimization detects cases where we deallocate a matrix, and then later allocate another matrix of the same size; and replaces them with commands of type kAllocFromOther or kAllocFromOtherZeroed.  <a href="#a92c251003c3f612c5cfbcbd72cbd030b">More...</a><br/></td></tr>
<tr class="separator:a92c251003c3f612c5cfbcbd72cbd030b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7464172a2f27484596c2d374bb1adcd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacekaldi_1_1nnet3.html#a7464172a2f27484596c2d374bb1adcd6">VariableMergingOptimization</a> (const NnetOptimizeOptions &amp;config, const Nnet &amp;nnet, const ComputationRequest &amp;request, NnetComputation *computation)</td></tr>
<tr class="memdesc:a7464172a2f27484596c2d374bb1adcd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This wraps class <a class="el" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html" title="This class is responsible for merging matrices, although you probably want to access it via the the f...">VariableMergingOptimizer</a> in a simplified interface.  <a href="#a7464172a2f27484596c2d374bb1adcd6">More...</a><br/></td></tr>
<tr class="separator:a7464172a2f27484596c2d374bb1adcd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad35855c00662ec8d8b2cf5e14569db0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacekaldi_1_1nnet3.html#ad35855c00662ec8d8b2cf5e14569db0a">ConsolidateModelUpdate</a> (const Nnet &amp;nnet, const ComputationRequest &amp;request, NnetComputation *computation)</td></tr>
<tr class="memdesc:ad35855c00662ec8d8b2cf5e14569db0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This consolidates the model-update parts of the backprop into larger operations (applicable mostly to recurrent setups)&ndash; internally it uses class <a class="el" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html" title="This class is responsible for consolidating the model-update part of backprop commands, for components in (e.g.) recurrent networks that need to have many separate backprop commands, into more efficient single commands operating on consolidated data in larger matrices. ">ModelUpdateConsolidator</a>.  <a href="#ad35855c00662ec8d8b2cf5e14569db0a">More...</a><br/></td></tr>
<tr class="separator:ad35855c00662ec8d8b2cf5e14569db0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac759ea60772df625784bcc714f7a41da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacekaldi_1_1nnet3.html#ac759ea60772df625784bcc714f7a41da">ConvertAdditionToAssignment</a> (const Nnet &amp;nnet, NnetComputation *computation)</td></tr>
<tr class="memdesc:ac759ea60772df625784bcc714f7a41da"><td class="mdescLeft">&#160;</td><td class="mdescRight">This converts addition operations (things with Add in their names) to copy operations (things with Copy in their names).  <a href="#ac759ea60772df625784bcc714f7a41da">More...</a><br/></td></tr>
<tr class="separator:ac759ea60772df625784bcc714f7a41da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96e8c7c5766b9f5c698ce7195489efba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacekaldi_1_1nnet3.html#a96e8c7c5766b9f5c698ce7195489efba">Optimize</a> (const NnetOptimizeOptions &amp;config, const Nnet &amp;nnet, const ComputationRequest &amp;request, NnetComputation *computation)</td></tr>
<tr class="memdesc:a96e8c7c5766b9f5c698ce7195489efba"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the top-level function for optimizing a computation.  <a href="#a96e8c7c5766b9f5c698ce7195489efba">More...</a><br/></td></tr>
<tr class="separator:a96e8c7c5766b9f5c698ce7195489efba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_67a0a17020b8eedc08ffa5626b1d53a1.html">nnet3</a></li><li class="navelem"><a class="el" href="nnet-optimize_8cc.html">nnet-optimize.cc</a></li>
    <li class="footer">Generated on Thu Apr 28 2016 15:42:37 for Kaldi by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
