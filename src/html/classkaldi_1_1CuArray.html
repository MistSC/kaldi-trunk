<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: CuArray&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1CuArray.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkaldi_1_1CuArray-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CuArray&lt; T &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>std::vector equivalent for CUDA computing.  
 <a href="classkaldi_1_1CuArray.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cu-array_8h_source.html">cu-array.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for CuArray&lt; T &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1CuArray__coll__graph.png" border="0" usemap="#CuArray_3_01T_01_4_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6dde1c94a838180222f9ce3c5da008be"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a6dde1c94a838180222f9ce3c5da008be">CuArray</a> ()</td></tr>
<tr class="memdesc:a6dde1c94a838180222f9ce3c5da008be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default Constructor.  <a href="#a6dde1c94a838180222f9ce3c5da008be">More...</a><br/></td></tr>
<tr class="separator:a6dde1c94a838180222f9ce3c5da008be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7c638e82e58a09d48ad4c3f84337d61"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#ac7c638e82e58a09d48ad4c3f84337d61">CuArray</a> (<a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> dim, <a class="el" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80b">MatrixResizeType</a> resize_type=<a class="el" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>)</td></tr>
<tr class="memdesc:ac7c638e82e58a09d48ad4c3f84337d61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor with memory initialisation.  <a href="#ac7c638e82e58a09d48ad4c3f84337d61">More...</a><br/></td></tr>
<tr class="separator:ac7c638e82e58a09d48ad4c3f84337d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe1220e6f51fe8d3aa0dddf92cb23ce6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#afe1220e6f51fe8d3aa0dddf92cb23ce6">CuArray</a> (const std::vector&lt; T &gt; &amp;src)</td></tr>
<tr class="memdesc:afe1220e6f51fe8d3aa0dddf92cb23ce6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor from CPU-based int vector.  <a href="#afe1220e6f51fe8d3aa0dddf92cb23ce6">More...</a><br/></td></tr>
<tr class="separator:afe1220e6f51fe8d3aa0dddf92cb23ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e1681015a4cee5cd82f74eff11ef696"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a1e1681015a4cee5cd82f74eff11ef696">CuArray</a> (const <a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt; T &gt; &amp;src)</td></tr>
<tr class="memdesc:a1e1681015a4cee5cd82f74eff11ef696"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy constructor.  <a href="#a1e1681015a4cee5cd82f74eff11ef696">More...</a><br/></td></tr>
<tr class="separator:a1e1681015a4cee5cd82f74eff11ef696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fae331cffa5602118657688956b1912"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a5fae331cffa5602118657688956b1912">~CuArray</a> ()</td></tr>
<tr class="memdesc:a5fae331cffa5602118657688956b1912"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a5fae331cffa5602118657688956b1912">More...</a><br/></td></tr>
<tr class="separator:a5fae331cffa5602118657688956b1912"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac22929ffa93fd50a886e150013ed81fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a> () const </td></tr>
<tr class="memdesc:ac22929ffa93fd50a886e150013ed81fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the vector dimension.  <a href="#ac22929ffa93fd50a886e150013ed81fe">More...</a><br/></td></tr>
<tr class="separator:ac22929ffa93fd50a886e150013ed81fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bebb0482e70d796b76ac6f2663757b5"><td class="memItemLeft" align="right" valign="top">const T *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a2bebb0482e70d796b76ac6f2663757b5">Data</a> () const </td></tr>
<tr class="memdesc:a2bebb0482e70d796b76ac6f2663757b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get raw pointer.  <a href="#a2bebb0482e70d796b76ac6f2663757b5">More...</a><br/></td></tr>
<tr class="separator:a2bebb0482e70d796b76ac6f2663757b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2c9a1b384ad445ddc5da54c669e3136"><td class="memItemLeft" align="right" valign="top">T *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#ab2c9a1b384ad445ddc5da54c669e3136">Data</a> ()</td></tr>
<tr class="separator:ab2c9a1b384ad445ddc5da54c669e3136"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af91b2fddcb051e5f2dc4ae65730ced8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#af91b2fddcb051e5f2dc4ae65730ced8f">Resize</a> (<a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> dim, <a class="el" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80b">MatrixResizeType</a> resize_type=<a class="el" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>)</td></tr>
<tr class="memdesc:af91b2fddcb051e5f2dc4ae65730ced8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate the memory.  <a href="#af91b2fddcb051e5f2dc4ae65730ced8f">More...</a><br/></td></tr>
<tr class="separator:af91b2fddcb051e5f2dc4ae65730ced8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac919a991060ede6983343719401686de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#ac919a991060ede6983343719401686de">Destroy</a> ()</td></tr>
<tr class="memdesc:ac919a991060ede6983343719401686de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate the memory and set dim_ and data_ to zero.  <a href="#ac919a991060ede6983343719401686de">More...</a><br/></td></tr>
<tr class="separator:ac919a991060ede6983343719401686de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a406d7bbca5f16c2b7a17534ec2cd58f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a406d7bbca5f16c2b7a17534ec2cd58f6">CopyFromVec</a> (const std::vector&lt; T &gt; &amp;src)</td></tr>
<tr class="memdesc:a406d7bbca5f16c2b7a17534ec2cd58f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function resizes if needed.  <a href="#a406d7bbca5f16c2b7a17534ec2cd58f6">More...</a><br/></td></tr>
<tr class="separator:a406d7bbca5f16c2b7a17534ec2cd58f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ebfc60c1662a407563b1d2a28ae0a3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a3ebfc60c1662a407563b1d2a28ae0a3e">CopyFromArray</a> (const <a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt; T &gt; &amp;src)</td></tr>
<tr class="memdesc:a3ebfc60c1662a407563b1d2a28ae0a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function resizes if needed.  <a href="#a3ebfc60c1662a407563b1d2a28ae0a3e">More...</a><br/></td></tr>
<tr class="separator:a3ebfc60c1662a407563b1d2a28ae0a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ca32aba54490f8990303202bdc7caf6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a2ca32aba54490f8990303202bdc7caf6">CopyToVec</a> (std::vector&lt; T &gt; *dst) const </td></tr>
<tr class="memdesc:a2ca32aba54490f8990303202bdc7caf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function resizes *dst if needed.  <a href="#a2ca32aba54490f8990303202bdc7caf6">More...</a><br/></td></tr>
<tr class="separator:a2ca32aba54490f8990303202bdc7caf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeed5411b731bb1ff6df28bb6898b5ff7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#aeed5411b731bb1ff6df28bb6898b5ff7">CopyToHost</a> (T *dst) const </td></tr>
<tr class="memdesc:aeed5411b731bb1ff6df28bb6898b5ff7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version of the above function that copies contents to a host array.  <a href="#aeed5411b731bb1ff6df28bb6898b5ff7">More...</a><br/></td></tr>
<tr class="separator:aeed5411b731bb1ff6df28bb6898b5ff7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae57e5aca5db002545e4b9335c8d9dbfa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#ae57e5aca5db002545e4b9335c8d9dbfa">SetZero</a> ()</td></tr>
<tr class="memdesc:ae57e5aca5db002545e4b9335c8d9dbfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the memory for the object to zero, via memset.  <a href="#ae57e5aca5db002545e4b9335c8d9dbfa">More...</a><br/></td></tr>
<tr class="separator:ae57e5aca5db002545e4b9335c8d9dbfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3295f50ce47d51c37bd463b549506f2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a3295f50ce47d51c37bd463b549506f2c">Set</a> (const T &amp;value)</td></tr>
<tr class="memdesc:a3295f50ce47d51c37bd463b549506f2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to a constant value.  <a href="#a3295f50ce47d51c37bd463b549506f2c">More...</a><br/></td></tr>
<tr class="separator:a3295f50ce47d51c37bd463b549506f2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a962751167f241146c531e4174e5a0b5a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt; T &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a962751167f241146c531e4174e5a0b5a">operator=</a> (const <a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt; T &gt; &amp;in)</td></tr>
<tr class="separator:a962751167f241146c531e4174e5a0b5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a38f760cf42bbfec30b4cd7250347e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt; T &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a72a38f760cf42bbfec30b4cd7250347e">operator=</a> (const std::vector&lt; T &gt; &amp;in)</td></tr>
<tr class="separator:a72a38f760cf42bbfec30b4cd7250347e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab64bfbe38b2cf091d391b11184f24d87"><td class="memTemplParams" colspan="2">template&lt;&gt; </td></tr>
<tr class="memitem:ab64bfbe38b2cf091d391b11184f24d87"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#ab64bfbe38b2cf091d391b11184f24d87">Set</a> (const <a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> &amp;value)</td></tr>
<tr class="separator:ab64bfbe38b2cf091d391b11184f24d87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a376355f5c1df5e6c9b6592d5126ba1ac"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a376355f5c1df5e6c9b6592d5126ba1ac">ThisType</a></td></tr>
<tr class="separator:a376355f5c1df5e6c9b6592d5126ba1ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1862fa1831225b08919e2c3a619cb9d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a></td></tr>
<tr class="memdesc:a1862fa1831225b08919e2c3a619cb9d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">dimension of the vector  <a href="#a1862fa1831225b08919e2c3a619cb9d1">More...</a><br/></td></tr>
<tr class="separator:a1862fa1831225b08919e2c3a619cb9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5a936fbbc363fa1913fdaadc70d872a"><td class="memItemLeft" align="right" valign="top">T *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a></td></tr>
<tr class="memdesc:aa5a936fbbc363fa1913fdaadc70d872a"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPU data pointer (if GPU not available, will point to CPU memory).  <a href="#aa5a936fbbc363fa1913fdaadc70d872a">More...</a><br/></td></tr>
<tr class="separator:aa5a936fbbc363fa1913fdaadc70d872a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br/>
class kaldi::CuArray&lt; T &gt;</h3>

<p>std::vector equivalent for CUDA computing. </p>
<p>This class is mostly intended as a CUDA-based mirror of a std::vector object that lives on the CPU. We don't call constructors, initializers, etc., on the GPU. </p>

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00037">37</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a376355f5c1df5e6c9b6592d5126ba1ac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt;T&gt; <a class="el" href="classkaldi_1_1CuArray.html#a376355f5c1df5e6c9b6592d5126ba1ac">ThisType</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00038">38</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6dde1c94a838180222f9ce3c5da008be"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuArray.html">CuArray</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default Constructor. </p>

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00042">42</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;: <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a>(0), <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>(NULL) {  }</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac7c638e82e58a09d48ad4c3f84337d61"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuArray.html">CuArray</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80b">MatrixResizeType</a>&#160;</td>
          <td class="paramname"><em>resize_type</em> = <code><a class="el" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor with memory initialisation. </p>
<p>resize_type may be kSetZero or kUndefined. </p>

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00046">46</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                                                                :</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a>(0), <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>(NULL) { <a class="code" href="classkaldi_1_1CuArray.html#af91b2fddcb051e5f2dc4ae65730ced8f">Resize</a>(dim, resize_type); }</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_af91b2fddcb051e5f2dc4ae65730ced8f"><div class="ttname"><a href="classkaldi_1_1CuArray.html#af91b2fddcb051e5f2dc4ae65730ced8f">kaldi::CuArray::Resize</a></div><div class="ttdeci">void Resize(MatrixIndexT dim, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Allocate the memory. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array-inl_8h_source.html#l00039">cu-array-inl.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe1220e6f51fe8d3aa0dddf92cb23ce6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuArray.html">CuArray</a> </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor from CPU-based int vector. </p>

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00050">50</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                                              :</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a>(0), <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>(NULL) { <a class="code" href="classkaldi_1_1CuArray.html#a406d7bbca5f16c2b7a17534ec2cd58f6">CopyFromVec</a>(src); }</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a406d7bbca5f16c2b7a17534ec2cd58f6"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a406d7bbca5f16c2b7a17534ec2cd58f6">kaldi::CuArray::CopyFromVec</a></div><div class="ttdeci">void CopyFromVec(const std::vector&lt; T &gt; &amp;src)</div><div class="ttdoc">This function resizes if needed. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array-inl_8h_source.html#l00096">cu-array-inl.h:96</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1e1681015a4cee5cd82f74eff11ef696"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuArray.html">CuArray</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy constructor. </p>
<p>We don't make this explicit because we want to be able to create a std::vector&lt;CuArray&gt;. </p>

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00055">55</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                   :</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;   <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a>(0), <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>(NULL) { <a class="code" href="classkaldi_1_1CuArray.html#a3ebfc60c1662a407563b1d2a28ae0a3e">CopyFromArray</a>(src); }</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a3ebfc60c1662a407563b1d2a28ae0a3e"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a3ebfc60c1662a407563b1d2a28ae0a3e">kaldi::CuArray::CopyFromArray</a></div><div class="ttdeci">void CopyFromArray(const CuArray&lt; T &gt; &amp;src)</div><div class="ttdoc">This function resizes if needed. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array-inl_8h_source.html#l00212">cu-array-inl.h:212</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5fae331cffa5602118657688956b1912"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classkaldi_1_1CuArray.html">CuArray</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00059">59</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{ <a class="code" href="classkaldi_1_1CuArray.html#ac919a991060ede6983343719401686de">Destroy</a>(); }</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_ac919a991060ede6983343719401686de"><div class="ttname"><a href="classkaldi_1_1CuArray.html#ac919a991060ede6983343719401686de">kaldi::CuArray::Destroy</a></div><div class="ttdeci">void Destroy()</div><div class="ttdoc">Deallocate the memory and set dim_ and data_ to zero. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array-inl_8h_source.html#l00078">cu-array-inl.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3ebfc60c1662a407563b1d2a28ae0a3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CopyFromArray </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function resizes if needed. </p>

<p>Definition at line <a class="el" href="cu-array-inl_8h_source.html#l00212">212</a> of file <a class="el" href="cu-array-inl_8h_source.html">cu-array-inl.h</a>.</p>

<p>References <a class="el" href="cu-array_8h_source.html#l00115">CuArray&lt; T &gt;::data_</a>, <a class="el" href="cu-array_8h_source.html#l00062">CuArray&lt; T &gt;::Dim()</a>, <a class="el" href="base_2timer_8h_source.html#l00065">Timer::Elapsed()</a>, and <a class="el" href="matrix-common_8h_source.html#l00037">kaldi::kUndefined</a>.</p>

<p>Referenced by <a class="el" href="cu-array_8h_source.html#l00055">CuArray&lt; MatrixElement&lt; Real &gt; &gt;::CuArray()</a>, and <a class="el" href="cu-array_8h_source.html#l00105">CuArray&lt; MatrixElement&lt; Real &gt; &gt;::operator=()</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                                    {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  this-&gt;<a class="code" href="classkaldi_1_1CuArray.html#af91b2fddcb051e5f2dc4ae65730ced8f">Resize</a>(src.Dim(), <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> (CuDevice::Instantiate().Enabled()) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    Timer tim;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    CU_SAFE_CALL(cudaMemcpy(this-&gt;<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>, src.data_, <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> * <span class="keyword">sizeof</span>(T),</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                            cudaMemcpyDeviceToDevice));</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    CuDevice::Instantiate().AccuProfile(__func__, tim.Elapsed());</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor"></span>  {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    memcpy(this-&gt;<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>, src.data_, <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> * <span class="keyword">sizeof</span>(T));</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_af91b2fddcb051e5f2dc4ae65730ced8f"><div class="ttname"><a href="classkaldi_1_1CuArray.html#af91b2fddcb051e5f2dc4ae65730ced8f">kaldi::CuArray::Resize</a></div><div class="ttdeci">void Resize(MatrixIndexT dim, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Allocate the memory. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array-inl_8h_source.html#l00039">cu-array-inl.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a406d7bbca5f16c2b7a17534ec2cd58f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CopyFromVec </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function resizes if needed. </p>
<p>Note: copying to GPU is done via memcpy, and any constructors or assignment operators are not called. </p>

<p>Definition at line <a class="el" href="cu-array-inl_8h_source.html#l00096">96</a> of file <a class="el" href="cu-array-inl_8h_source.html">cu-array-inl.h</a>.</p>

<p>References <a class="el" href="base_2timer_8h_source.html#l00065">Timer::Elapsed()</a>, and <a class="el" href="matrix-common_8h_source.html#l00037">kaldi::kUndefined</a>.</p>

<p>Referenced by <a class="el" href="nnet-simple-component_8cc_source.html#l04264">PermuteComponent::ComputeReverseColumnMap()</a>, <a class="el" href="cu-array_8h_source.html#l00050">CuArray&lt; MatrixElement&lt; Real &gt; &gt;::CuArray()</a>, <a class="el" href="nnet3_2nnet-compute_8cc_source.html#l00300">NnetComputer::GetPointers()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04319">PermuteComponent::Init()</a>, <a class="el" href="cu-array_8h_source.html#l00109">CuArray&lt; MatrixElement&lt; Real &gt; &gt;::operator=()</a>, <a class="el" href="nnet-randomizer_8cc_source.html#l00072">MatrixRandomizer::Randomize()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04325">PermuteComponent::Read()</a>, <a class="el" href="cu-matrix-test_8cc_source.html#l02009">kaldi::UnitTestCuDiffXent()</a>, <a class="el" href="cu-math-test_8cc_source.html#l00074">kaldi::UnitTestCuMathCopy()</a>, <a class="el" href="cu-math-test_8cc_source.html#l00046">kaldi::UnitTestCuMathRandomize()</a>, and <a class="el" href="cu-math-test_8cc_source.html#l00101">kaldi::UnitTestCuMathSplice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                                    {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="classkaldi_1_1CuArray.html#af91b2fddcb051e5f2dc4ae65730ced8f">Resize</a>(src.size(), <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">if</span> (src.empty()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> (CuDevice::Instantiate().Enabled()) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    Timer tim;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    CU_SAFE_CALL(cudaMemcpy(<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>, &amp;src.front(), src.size()*<span class="keyword">sizeof</span>(T), cudaMemcpyHostToDevice));</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    CuDevice::Instantiate().AccuProfile(__func__, tim.Elapsed());</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor"></span>  {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    memcpy(<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>, &amp;src.front(), src.size()*<span class="keyword">sizeof</span>(T));</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_af91b2fddcb051e5f2dc4ae65730ced8f"><div class="ttname"><a href="classkaldi_1_1CuArray.html#af91b2fddcb051e5f2dc4ae65730ced8f">kaldi::CuArray::Resize</a></div><div class="ttdeci">void Resize(MatrixIndexT dim, MatrixResizeType resize_type=kSetZero)</div><div class="ttdoc">Allocate the memory. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array-inl_8h_source.html#l00039">cu-array-inl.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aeed5411b731bb1ff6df28bb6898b5ff7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CopyToHost </td>
          <td>(</td>
          <td class="paramtype">T *&#160;</td>
          <td class="paramname"><em>dst</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Version of the above function that copies contents to a host array. </p>
<p>This function requires *dst to be allocated before calling. The allocated size should be dim_ * sizeof(T) </p>

<p>Definition at line <a class="el" href="cu-array-inl_8h_source.html#l00133">133</a> of file <a class="el" href="cu-array-inl_8h_source.html">cu-array-inl.h</a>.</p>

<p>References <a class="el" href="base_2timer_8h_source.html#l00065">Timer::Elapsed()</a>, and <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>.</p>

<p>Referenced by <a class="el" href="cu-matrix_8cc_source.html#l02777">CuMatrixBase&lt; Real &gt;::Lookup()</a>, and <a class="el" href="cu-array-test_8cc_source.html#l00053">kaldi::UnitTestCuArray()</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                        {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(dst != NULL);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> (CuDevice::Instantiate().Enabled()) { </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    Timer tim;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    CU_SAFE_CALL(cudaMemcpy(dst, <a class="code" href="classkaldi_1_1CuArray.html#a2bebb0482e70d796b76ac6f2663757b5">Data</a>(), <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> * <span class="keyword">sizeof</span>(T), cudaMemcpyDeviceToHost));</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    CuDevice::Instantiate().AccuProfile(<span class="stringliteral">&quot;CuArray::CopyToVecD2H&quot;</span>, tim.Elapsed());</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor"></span>  {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    memcpy(dst, <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>, <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> * <span class="keyword">sizeof</span>(T));</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a2bebb0482e70d796b76ac6f2663757b5"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a2bebb0482e70d796b76ac6f2663757b5">kaldi::CuArray::Data</a></div><div class="ttdeci">const T * Data() const </div><div class="ttdoc">Get raw pointer. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00065">cu-array.h:65</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ca32aba54490f8990303202bdc7caf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CopyToVec </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; T &gt; *&#160;</td>
          <td class="paramname"><em>dst</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function resizes *dst if needed. </p>
<p>On resize of "dst", the STL vector may call copy-constructors, initializers, and assignment operators for existing objects (which will be overwritten), but the copy from GPU to CPU is done via memcpy. So be very careful calling this function if your objects are more than plain structs. </p>

<p>Definition at line <a class="el" href="cu-array-inl_8h_source.html#l00114">114</a> of file <a class="el" href="cu-array-inl_8h_source.html">cu-array-inl.h</a>.</p>

<p>References <a class="el" href="base_2timer_8h_source.html#l00065">Timer::Elapsed()</a>.</p>

<p>Referenced by <a class="el" href="nnet-simple-component_8cc_source.html#l04264">PermuteComponent::ComputeReverseColumnMap()</a>, <a class="el" href="nnet-loss_8cc_source.html#l00039">kaldi::nnet1::CountCorrectFramesWeighted()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l02471">SumGroupComponent::GetSizes()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04360">PermuteComponent::Info()</a>, <a class="el" href="cu-matrix-speed-test_8cc_source.html#l00242">kaldi::TestCuFindRowMaxId()</a>, <a class="el" href="cu-array-test_8cc_source.html#l00053">kaldi::UnitTestCuArray()</a>, <a class="el" href="cu-matrix-test_8cc_source.html#l01975">kaldi::UnitTestCuFindRowMaxId()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04350">PermuteComponent::Write()</a>, <a class="el" href="nnet-various_8h_source.html#l00123">Splice::WriteData()</a>, and <a class="el" href="nnet-various_8h_source.html#l00248">CopyComponent::WriteData()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                  {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">if</span> (static_cast&lt;MatrixIndexT&gt;(dst-&gt;size()) != <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a>) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    dst-&gt;resize(<a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> (CuDevice::Instantiate().Enabled()) { </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    Timer tim;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    CU_SAFE_CALL(cudaMemcpy(&amp;dst-&gt;front(), <a class="code" href="classkaldi_1_1CuArray.html#a2bebb0482e70d796b76ac6f2663757b5">Data</a>(), <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> * <span class="keyword">sizeof</span>(T), cudaMemcpyDeviceToHost));</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    CuDevice::Instantiate().AccuProfile(<span class="stringliteral">&quot;CuArray::CopyToVecD2H&quot;</span>, tim.Elapsed());</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor"></span>  {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    memcpy(&amp;dst-&gt;front(), <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>, <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> * <span class="keyword">sizeof</span>(T));</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a2bebb0482e70d796b76ac6f2663757b5"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a2bebb0482e70d796b76ac6f2663757b5">kaldi::CuArray::Data</a></div><div class="ttdeci">const T * Data() const </div><div class="ttdoc">Get raw pointer. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00065">cu-array.h:65</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2bebb0482e70d796b76ac6f2663757b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const T* Data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get raw pointer. </p>

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00065">65</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>

<p>Referenced by <a class="el" href="cu-matrix_8cc_source.html#l02182">CuMatrixBase&lt; Real &gt;::AddCols()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02720">CuMatrixBase&lt; Real &gt;::AddElements()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02353">CuMatrixBase&lt; Real &gt;::AddRowRanges()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02247">CuMatrixBase&lt; Real &gt;::AddRows()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02293">CuMatrixBase&lt; Real &gt;::AddToRows()</a>, <a class="el" href="cu-math_8cc_source.html#l00173">kaldi::cu::Copy()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02137">CuMatrixBase&lt; Real &gt;::CopyCols()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02159">CuMatrixBase&lt; Real &gt;::CopyRows()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02225">CuMatrixBase&lt; Real &gt;::CopyToRows()</a>, <a class="el" href="cu-matrix_8cc_source.html#l01568">CuMatrixBase&lt; Real &gt;::DiffXent()</a>, <a class="el" href="cu-matrix_8cc_source.html#l01508">CuMatrixBase&lt; Real &gt;::FindRowMaxId()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02777">CuMatrixBase&lt; Real &gt;::Lookup()</a>, <a class="el" href="cu-math_8cc_source.html#l00080">kaldi::cu::Randomize()</a>, <a class="el" href="cu-math_8cc_source.html#l00132">kaldi::cu::Splice()</a>, and <a class="el" href="cu-matrix_8cc_source.html#l02315">CuMatrixBase&lt; Real &gt;::SumColumnRanges()</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>; }</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab2c9a1b384ad445ddc5da54c669e3136"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">T* Data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00067">67</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>; }</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac919a991060ede6983343719401686de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deallocate the memory and set dim_ and data_ to zero. </p>
<p>Does not call any destructors of the objects stored. </p>

<p>Definition at line <a class="el" href="cu-array-inl_8h_source.html#l00078">78</a> of file <a class="el" href="cu-array-inl_8h_source.html">cu-array-inl.h</a>.</p>

<p>Referenced by <a class="el" href="cu-array_8h_source.html#l00059">CuArray&lt; MatrixElement&lt; Real &gt; &gt;::~CuArray()</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                         {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> (CuDevice::Instantiate().Enabled()) { </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a> != NULL) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      CuDevice::Instantiate().Free(this-&gt;<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor"></span>  {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a> != NULL)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      free(<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> = 0;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a> = NULL;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac22929ffa93fd50a886e150013ed81fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> Dim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the vector dimension. </p>

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00062">62</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>

<p>Referenced by <a class="el" href="cu-matrix_8cc_source.html#l02182">CuMatrixBase&lt; Real &gt;::AddCols()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02720">CuMatrixBase&lt; Real &gt;::AddElements()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02353">CuMatrixBase&lt; Real &gt;::AddRowRanges()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02247">CuMatrixBase&lt; Real &gt;::AddRows()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02293">CuMatrixBase&lt; Real &gt;::AddToRows()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04264">PermuteComponent::ComputeReverseColumnMap()</a>, <a class="el" href="cu-math_8cc_source.html#l00173">kaldi::cu::Copy()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02137">CuMatrixBase&lt; Real &gt;::CopyCols()</a>, <a class="el" href="cu-array-inl_8h_source.html#l00212">CuArray&lt; T &gt;::CopyFromArray()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02159">CuMatrixBase&lt; Real &gt;::CopyRows()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02225">CuMatrixBase&lt; Real &gt;::CopyToRows()</a>, <a class="el" href="nnet-loss_8cc_source.html#l00039">kaldi::nnet1::CountCorrectFramesWeighted()</a>, <a class="el" href="cu-matrix_8cc_source.html#l01568">CuMatrixBase&lt; Real &gt;::DiffXent()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04360">PermuteComponent::Info()</a>, <a class="el" href="nnet-various_8h_source.html#l00052">Splice::InitData()</a>, <a class="el" href="nnet-simple-component_8h_source.html#l01002">PermuteComponent::InputDim()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02777">CuMatrixBase&lt; Real &gt;::Lookup()</a>, <a class="el" href="nnet-simple-component_8h_source.html#l01003">PermuteComponent::OutputDim()</a>, <a class="el" href="cu-math_8cc_source.html#l00080">kaldi::cu::Randomize()</a>, <a class="el" href="nnet-various_8h_source.html#l00116">Splice::ReadData()</a>, <a class="el" href="cu-math_8cc_source.html#l00132">kaldi::cu::Splice()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02315">CuMatrixBase&lt; Real &gt;::SumColumnRanges()</a>, <a class="el" href="cu-array-test_8cc_source.html#l00053">kaldi::UnitTestCuArray()</a>, <a class="el" href="nnet-various_8h_source.html#l00123">Splice::WriteData()</a>, and <a class="el" href="nnet-various_8h_source.html#l00248">CopyComponent::WriteData()</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a>;  }</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a962751167f241146c531e4174e5a0b5a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt;T&gt;&amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00105">105</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                               {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    this-&gt;<a class="code" href="classkaldi_1_1CuArray.html#a3ebfc60c1662a407563b1d2a28ae0a3e">CopyFromArray</a>(in); <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a3ebfc60c1662a407563b1d2a28ae0a3e"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a3ebfc60c1662a407563b1d2a28ae0a3e">kaldi::CuArray::CopyFromArray</a></div><div class="ttdeci">void CopyFromArray(const CuArray&lt; T &gt; &amp;src)</div><div class="ttdoc">This function resizes if needed. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array-inl_8h_source.html#l00212">cu-array-inl.h:212</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a72a38f760cf42bbfec30b4cd7250347e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuArray.html">CuArray</a>&lt;T&gt;&amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00109">109</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                                 {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    this-&gt;<a class="code" href="classkaldi_1_1CuArray.html#a406d7bbca5f16c2b7a17534ec2cd58f6">CopyFromVec</a>(in); <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  }</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a406d7bbca5f16c2b7a17534ec2cd58f6"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a406d7bbca5f16c2b7a17534ec2cd58f6">kaldi::CuArray::CopyFromVec</a></div><div class="ttdeci">void CopyFromVec(const std::vector&lt; T &gt; &amp;src)</div><div class="ttdoc">This function resizes if needed. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array-inl_8h_source.html#l00096">cu-array-inl.h:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af91b2fddcb051e5f2dc4ae65730ced8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Resize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80b">MatrixResizeType</a>&#160;</td>
          <td class="paramname"><em>resize_type</em> = <code><a class="el" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate the memory. </p>
<p>resize_type may be kSetZero or kUndefined. kCopyData not yet supported (can be implemented if needed). </p>

<p>Definition at line <a class="el" href="cu-array-inl_8h_source.html#l00039">39</a> of file <a class="el" href="cu-array-inl_8h_source.html">cu-array-inl.h</a>.</p>

<p>References <a class="el" href="base_2timer_8h_source.html#l00065">Timer::Elapsed()</a>, <a class="el" href="kaldi-error_8h_source.html#l00143">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00160">KALDI_ERR</a>, <a class="el" href="matrix-common_8h_source.html#l00036">kaldi::kSetZero</a>, <a class="el" href="matrix-common_8h_source.html#l00037">kaldi::kUndefined</a>, and <a class="el" href="nnet-utils_8cc_source.html#l00162">kaldi::nnet3::SetZero()</a>.</p>

<p>Referenced by <a class="el" href="nnet-simple-component_8cc_source.html#l04264">PermuteComponent::ComputeReverseColumnMap()</a>, <a class="el" href="cu-array_8h_source.html#l00046">CuArray&lt; MatrixElement&lt; Real &gt; &gt;::CuArray()</a>, and <a class="el" href="cu-array-test_8cc_source.html#l00053">kaldi::UnitTestCuArray()</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                                                                      {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>((resize_type == <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a> || resize_type == <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>) &amp;&amp; dim &gt;= 0);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> == dim) {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">if</span> (resize_type == <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      <a class="code" href="classkaldi_1_1CuArray.html#ae57e5aca5db002545e4b9335c8d9dbfa">SetZero</a>();</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  }</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="classkaldi_1_1CuArray.html#ac919a991060ede6983343719401686de">Destroy</a>();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">if</span> (dim == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> (CuDevice::Instantiate().Enabled()) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    Timer tim;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    this-&gt;<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a> = <span class="keyword">static_cast&lt;</span>T*<span class="keyword">&gt;</span>(CuDevice::Instantiate().Malloc(dim * <span class="keyword">sizeof</span>(T)));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    this-&gt;<a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> = dim;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (resize_type == <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>) this-&gt;<a class="code" href="classkaldi_1_1CuArray.html#ae57e5aca5db002545e4b9335c8d9dbfa">SetZero</a>();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    CuDevice::Instantiate().AccuProfile(<span class="stringliteral">&quot;CuArray::Resize&quot;</span>, tim.Elapsed());    </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor"></span>  {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a> = <span class="keyword">static_cast&lt;</span>T*<span class="keyword">&gt;</span>(malloc(dim * <span class="keyword">sizeof</span>(T)));</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// We allocate with malloc because we don&#39;t want constructors being called.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">// We basically ignore memory alignment issues here-- we assume the malloc</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// implementation is forgiving enough that it will automatically align on</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// sensible boundaries.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a> == 0)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Memory allocation failed when initializing CuVector &quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;with dimension &quot;</span> &lt;&lt; dim &lt;&lt; <span class="stringliteral">&quot; object size in bytes: &quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                &lt;&lt; <span class="keyword">sizeof</span>(T);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> = dim;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">if</span> (resize_type == <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="classkaldi_1_1CuArray.html#ae57e5aca5db002545e4b9335c8d9dbfa">SetZero</a>();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_ae57e5aca5db002545e4b9335c8d9dbfa"><div class="ttname"><a href="classkaldi_1_1CuArray.html#ae57e5aca5db002545e4b9335c8d9dbfa">kaldi::CuArray::SetZero</a></div><div class="ttdeci">void SetZero()</div><div class="ttdoc">Sets the memory for the object to zero, via memset. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array-inl_8h_source.html#l00150">cu-array-inl.h:150</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00160">kaldi-error.h:160</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_ac919a991060ede6983343719401686de"><div class="ttname"><a href="classkaldi_1_1CuArray.html#ac919a991060ede6983343719401686de">kaldi::CuArray::Destroy</a></div><div class="ttdeci">void Destroy()</div><div class="ttdoc">Deallocate the memory and set dim_ and data_ to zero. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array-inl_8h_source.html#l00078">cu-array-inl.h:78</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kaldi::kSetZero</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00036">matrix-common.h:36</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00143">kaldi-error.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3295f50ce47d51c37bd463b549506f2c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Set </td>
          <td>(</td>
          <td class="paramtype">const T &amp;&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set to a constant value. </p>
<p>Note: any copying is done as if using memcpy, and assignment operators or destructors are not called. This is NOT IMPLEMENTED YET except for T == int32 (the current implementation will just crash). </p>

<p>Definition at line <a class="el" href="cu-array-inl_8h_source.html#l00183">183</a> of file <a class="el" href="cu-array-inl_8h_source.html">cu-array-inl.h</a>.</p>

<p>References <a class="el" href="kaldi-error_8h_source.html#l00160">KALDI_ERR</a>.</p>

<p>Referenced by <a class="el" href="cu-array-test_8cc_source.html#l00053">kaldi::UnitTestCuArray()</a>.</p>
<div class="fragment"><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                          {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// This is not implemented yet, we&#39;ll do so if it&#39;s needed.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;CuArray&lt;T&gt;::Set not implemented yet for this type.&quot;</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00160">kaldi-error.h:160</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab64bfbe38b2cf091d391b11184f24d87"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Set </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> &amp;&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="cu-array-inl_8h_source.html#l00189">189</a> of file <a class="el" href="cu-array-inl_8h_source.html">cu-array-inl.h</a>.</p>

<p>References <a class="el" href="cu-matrixdim_8h_source.html#l00067">CU2DBLOCK</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00064">rnnlm::d</a>, <a class="el" href="base_2timer_8h_source.html#l00065">Timer::Elapsed()</a>, and <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                                  {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> (CuDevice::Instantiate().Enabled()) { </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    Timer tim;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    dim3 dimBlock(<a class="code" href="cu-matrixdim_8h.html#a84acd86e193bca04fb719c476fbcbe5b">CU2DBLOCK</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    dim3 dimGrid(n_blocks(<a class="code" href="classkaldi_1_1CuArray.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>(), <a class="code" href="cu-matrixdim_8h.html#a84acd86e193bca04fb719c476fbcbe5b">CU2DBLOCK</a>));</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="structMatrixDim__.html">::MatrixDim</a> <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> = { 1, <a class="code" href="classkaldi_1_1CuArray.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>(), <a class="code" href="classkaldi_1_1CuArray.html#ac22929ffa93fd50a886e150013ed81fe">Dim</a>() };</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    cudaI32_set_const(dimGrid, dimBlock, <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>, value, d);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    CU_SAFE_CALL(cudaGetLastError());</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    CuDevice::Instantiate().AccuProfile(__func__, tim.Elapsed());</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor"></span>  {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a>; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = value;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="ttc" id="structMatrixDim___html"><div class="ttname"><a href="structMatrixDim__.html">MatrixDim_</a></div><div class="ttdoc">Structure containing size of the matrix plus stride. </div><div class="ttdef"><b>Definition:</b> <a href="cu-matrixdim_8h_source.html#l00052">cu-matrixdim.h:52</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="cu-matrixdim_8h_html_a84acd86e193bca04fb719c476fbcbe5b"><div class="ttname"><a href="cu-matrixdim_8h.html#a84acd86e193bca04fb719c476fbcbe5b">CU2DBLOCK</a></div><div class="ttdeci">#define CU2DBLOCK</div><div class="ttdef"><b>Definition:</b> <a href="cu-matrixdim_8h_source.html#l00067">cu-matrixdim.h:67</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_ac22929ffa93fd50a886e150013ed81fe"><div class="ttname"><a href="classkaldi_1_1CuArray.html#ac22929ffa93fd50a886e150013ed81fe">kaldi::CuArray::Dim</a></div><div class="ttdeci">MatrixIndexT Dim() const </div><div class="ttdoc">Return the vector dimension. </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00062">cu-array.h:62</a></div></div>
<div class="ttc" id="namespacernnlm_html_a873684cefeb665f3d5e6b495de57fc0d"><div class="ttname"><a href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">rnnlm::d</a></div><div class="ttdeci">double d</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00064">mikolov-rnnlm-lib.cc:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae57e5aca5db002545e4b9335c8d9dbfa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetZero </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the memory for the object to zero, via memset. </p>
<p>You should verify that this makes sense for type T. </p>

<p>Definition at line <a class="el" href="cu-array-inl_8h_source.html#l00150">150</a> of file <a class="el" href="cu-array-inl_8h_source.html">cu-array-inl.h</a>.</p>

<p>References <a class="el" href="base_2timer_8h_source.html#l00065">Timer::Elapsed()</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                         {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> (CuDevice::Instantiate().Enabled()) { </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    Timer tim;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    CU_SAFE_CALL(cudaMemset(<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>, 0, <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> * <span class="keyword">sizeof</span>(T)));</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    CuDevice::Instantiate().AccuProfile(<span class="stringliteral">&quot;CuArray::SetZero&quot;</span>, tim.Elapsed());</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor"></span>  {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    memset(static_cast&lt;void*&gt;(<a class="code" href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">data_</a>), 0, <a class="code" href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">dim_</a> * <span class="keyword">sizeof</span>(T));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
<div class="ttc" id="classkaldi_1_1CuArray_html_aa5a936fbbc363fa1913fdaadc70d872a"><div class="ttname"><a href="classkaldi_1_1CuArray.html#aa5a936fbbc363fa1913fdaadc70d872a">kaldi::CuArray::data_</a></div><div class="ttdeci">T * data_</div><div class="ttdoc">GPU data pointer (if GPU not available, will point to CPU memory). </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00115">cu-array.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1CuArray_html_a1862fa1831225b08919e2c3a619cb9d1"><div class="ttname"><a href="classkaldi_1_1CuArray.html#a1862fa1831225b08919e2c3a619cb9d1">kaldi::CuArray::dim_</a></div><div class="ttdeci">MatrixIndexT dim_</div><div class="ttdoc">dimension of the vector </div><div class="ttdef"><b>Definition:</b> <a href="cu-array_8h_source.html#l00114">cu-array.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aa5a936fbbc363fa1913fdaadc70d872a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">T* data_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>GPU data pointer (if GPU not available, will point to CPU memory). </p>

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00115">115</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>

<p>Referenced by <a class="el" href="cu-array-inl_8h_source.html#l00212">CuArray&lt; T &gt;::CopyFromArray()</a>, and <a class="el" href="cu-array_8h_source.html#l00065">CuArray&lt; MatrixElement&lt; Real &gt; &gt;::Data()</a>.</p>

</div>
</div>
<a class="anchor" id="a1862fa1831225b08919e2c3a619cb9d1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> dim_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>dimension of the vector </p>

<p>Definition at line <a class="el" href="cu-array_8h_source.html#l00114">114</a> of file <a class="el" href="cu-array_8h_source.html">cu-array.h</a>.</p>

<p>Referenced by <a class="el" href="cu-array_8h_source.html#l00062">CuArray&lt; MatrixElement&lt; Real &gt; &gt;::Dim()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>cudamatrix/<a class="el" href="cu-array_8h_source.html">cu-array.h</a></li>
<li>cudamatrix/<a class="el" href="cu-array-inl_8h_source.html">cu-array-inl.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="classkaldi_1_1CuArray.html">CuArray</a></li>
    <li class="footer">Generated on Thu Apr 28 2016 15:42:45 for Kaldi by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
