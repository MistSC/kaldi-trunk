<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: nnet3/nnet-optimize-utils.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nnet-optimize-utils_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">nnet-optimize-utils.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="nnet-optimize-utils_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// nnet3/nnet-optimize-utils.h</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Copyright 2015    Johns Hopkins University (author: Daniel Povey)</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// See ../../COPYING for clarification regarding multiple authors</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//  http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// THIS CODE IS PROVIDED *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// MERCHANTABLITY OR NON-INFRINGEMENT.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// See the Apache 2 License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// limitations under the License.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifndef KALDI_NNET3_NNET_OPTIMIZE_UTILS_H_</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define KALDI_NNET3_NNET_OPTIMIZE_UTILS_H_</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nnet-compile_8h.html">nnet3/nnet-compile.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nnet-analyze_8h.html">nnet3/nnet-analyze.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">namespace </span>kaldi {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">namespace </span>nnet3 {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">struct </span>NnetOptimizeOptions;  <span class="comment">// Forward declaration.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html">  133</a></span>&#160;<span class="keyword">class </span><a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html">VariableMergingOptimizer</a> {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#ae52c106fb3f904728cb5c55c6c4184e0">VariableMergingOptimizer</a>(<span class="keyword">const</span> <a class="code" href="structkaldi_1_1nnet3_1_1NnetOptimizeOptions.html">NnetOptimizeOptions</a> &amp;config,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;nnet,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                           <span class="keyword">const</span> <a class="code" href="structkaldi_1_1nnet3_1_1ComputationRequest.html">ComputationRequest</a> &amp;request,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                           <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *computation);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">// Note: you can call this only once.  If it returns true, it means it has</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// merged variables.  In this case, you have the option to instantiate another</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">// copy of the class and try again with that other copy.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a08a57d03b1828eeb8548ee5e8a942264">MergeVariables</a>();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  std::pair&lt;bool,bool&gt; <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a18aa0d59c61851a3e1138a100488ea5b">MayBeMerged</a>(<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> command, <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> s1, <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> s2) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// performs the left merge.  Search for left-merge in the comment</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="comment">// above the class declaration for details.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#af3b2fad1be81ad4faf61e71f07486ef0">DoLeftMerge</a>(<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> command_index, <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> s1, <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> s2);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// performs the right merge.  Search for right-merge in the comment</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// above the class declaration for details.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#ab9dc158a3fd3e688df0e1df6912cd7b1">DoRightMerge</a>(<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> command_index, <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> s1, <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> s2);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// Performs the actions common to both left and right merges, regarding</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// removing the assignment command, and allocation and deallocation (called</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// from DoLeftMerge and DoRightMerge).  The m_to_keep and m_to_discard</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// are the matrix-indexes we will keep and discard respectively.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a333f8ed19d13a9725fc630b765490020">DoMergeCommon</a>(<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> command_index, <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> m_to_keep,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                     <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> m_to_discard);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a60ce57f518b5fa77d140cb414354cd95">MarkAsDirty</a>(<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> s);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a98b1050f09da390896f964fb7a892391">Initialize</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a4dcce2ef4364ac3b222debac11646a39">  182</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structkaldi_1_1nnet3_1_1NnetOptimizeOptions.html">NnetOptimizeOptions</a> &amp;<a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a4dcce2ef4364ac3b222debac11646a39">config_</a>;</div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#adbabf05a7702103113a02a113015205f">  183</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;<a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#adbabf05a7702103113a02a113015205f">nnet_</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a12563ff580f9e7179c096ed44f1e2ca7">  184</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structkaldi_1_1nnet3_1_1ComputationRequest.html">ComputationRequest</a> &amp;<a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a12563ff580f9e7179c096ed44f1e2ca7">request_</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a36d13565d1302a2bf74127b141ba3537">  185</a></span>&#160;  <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *<a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a36d13565d1302a2bf74127b141ba3537">computation_</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#ac8ca96df1ecdb635738c59a88cff8835">  187</a></span>&#160;  <a class="code" href="structkaldi_1_1nnet3_1_1Analyzer.html">Analyzer</a> <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#ac8ca96df1ecdb635738c59a88cff8835">analyzer_</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// lists of submatrices that correspond to each matrix.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a0655730456d3a04cafe943687894a84d">  190</a></span>&#160;  std::vector&lt;std::vector&lt;int32&gt; &gt; <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a0655730456d3a04cafe943687894a84d">matrix_to_submatrix_</a>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// for each variable (as defined by analyzer_.variables), true if</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">// we have already performed a merge on it.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a63de82c33f6a7330727c0f2fc670ae0d">  194</a></span>&#160;  std::vector&lt;bool&gt; <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a63de82c33f6a7330727c0f2fc670ae0d">variable_dirty_</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a400e33db7a90834eec20a7eee34f162d">  196</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a400e33db7a90834eec20a7eee34f162d">already_called_merge_variables_</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;};</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html">  205</a></span>&#160;<span class="keyword">class </span><a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html">ModelUpdateConsolidator</a> {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a49ab0eb74e9ab7b96b459d319f443d02">ModelUpdateConsolidator</a>(<span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;nnet,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                          <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *computation);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a1d8913b401bfd339536bdd60f97d6101">ConsolidateModelUpdate</a>();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#ad691fe3a6e61eb46c08d591d4af2ea4b">ConsolidateUpdateForComponent</a>(</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> component,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keyword">const</span> std::vector&lt;int32&gt; &amp;backprop_commands);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a9ff791337c174a7dd4d789a414c452e3">AddCommandsToComputation</a>();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#ad6767e6a06ceef8ceedb067c8c86d463">ConsolidateSubmatrices</a>(</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keyword">const</span> std::vector&lt;int32&gt; &amp;commands,</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keyword">const</span> std::vector&lt;int32&gt; &amp;submatrices);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#ab6f35b73f49e1242e20e85ce650b5741">AppendDebugInfoForSubmatrix</a>(</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> submatrix_index,</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1MatrixDebugInfo.html">NnetComputation::MatrixDebugInfo</a> *debug_info) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#adbabf05a7702103113a02a113015205f">  251</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;<a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#adbabf05a7702103113a02a113015205f">nnet_</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a36d13565d1302a2bf74127b141ba3537">  252</a></span>&#160;  <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *<a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a36d13565d1302a2bf74127b141ba3537">computation_</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// Indexed by the original command index in *computation_ (and sized to the</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// original number of commands in *computation_ before we added anything),</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// extra_commands_[c] contains a list of commands that need to be inserted</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">// just before command c in the previously existing computation.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#aff6dbc6bf1ea33e5ea29bebebae8617a">  258</a></span>&#160;  std::vector&lt;std::vector&lt;NnetComputation::Command&gt; &gt; <a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#aff6dbc6bf1ea33e5ea29bebebae8617a">extra_commands_</a>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// This is as list of kBackprop commands that will be placed after the</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// commands in &#39;computation_-&gt;commands&#39; and &#39;extra_commands_&#39;, but before</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// the &#39;final_deallocate_commands_&#39;.</span></div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#af13a24e7f0ed6969f7659518478ffdc2">  263</a></span>&#160;  std::vector&lt;NnetComputation::Command&gt; <a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#af13a24e7f0ed6969f7659518478ffdc2">final_commands_</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// This is a list of commands to deallocate our &#39;consolidated&#39; matrices; the</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// commands will be placed after the commands in &#39;final_commands_&#39;.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a1637cd5c5a1274835dfb87d75fde2037">  266</a></span>&#160;  std::vector&lt;NnetComputation::Command&gt; <a class="code" href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a1637cd5c5a1274835dfb87d75fde2037">final_deallocate_commands_</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;};</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">// We declare this class in the .cc file, we don&#39;t need to export it.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">// It&#39;s used inside RenumberComputation.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html">  272</a></span>&#160;<span class="keyword">class </span><a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html">ComputationRenumberer</a> {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a8f1ed03be326c0cbf0728194d4ac30d0">  274</a></span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a8f1ed03be326c0cbf0728194d4ac30d0">ComputationRenumberer</a>(<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *computation):</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a36d13565d1302a2bf74127b141ba3537">computation_</a>(computation) { }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a1920fdb81424ab47c050e27102ddcfd6">Renumber</a>();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// this function removes unused vectors within the indexes_multi_ array, i.e.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// ones that are not referenced in the computation.</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a4ba6b7dba4c539ad7a149e05b59f80aa">RemoveUnusedIndexesMulti</a>();</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="comment">// this function computes the submatrix_is_used_ vector, saying whether each</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">// of the original submatrices is referenced somewhere.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a356665946a32706f0cc3c880154ff3ca">ComputeSubmatrixIsUsed</a>();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">// this function computes the matrix_is_used_ vector (from the</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="comment">// submatrix_is_used_ vector, from computation_-&gt;input_output_info, and from</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">// computation_-&gt;commands, saying whether each of the original matrices is</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">// referenced somewhere, directly or indirectly.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a6f8e8995300ee82f98f923a053d66573">ComputeMatrixIsUsed</a>();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// This function sets up mappings from old to new matrix and submatrix indexes,</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// writing to num_{,sub}matrices_new_ and old_to_new_{,sub}matrix_.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a777e19363ed62a4364eeb8743e848889">SetUpMappings</a>();</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// This function renumbers submatrix indexes appearing within commands and</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">// indexes_multi_, and then removes unused submatrices from the list of</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// submatrices while leaving the matrix-indexes at their old values (they will</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">// be mapped by RenumberMatrices()).</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#aaa18736d4d5abceba0340d264da8ecd2">RenumberSubmatrices</a>();</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// renumber matrix indexes appearing within &#39;commmands&#39;, within &#39;submatrices&#39;</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// and &#39;input_output_info&#39;; renumber &#39;matrices&#39; and if applicable</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// &#39;debug_info&#39;.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#ac671ddd1b3a2e51149bc86d7a0965b64">RenumberMatrices</a>();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// removes duplicates within the indexes_multi array itself.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a138955c2d9469f28aa78853564c298ce">RemoveIndexesMultiDuplicates</a>();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">// removes unused elements and duplicates within &#39;computation-&gt;indexes&#39;</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a228a7ce7320c66bc72058b3805fec957">RenumberIndexes</a>();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// removes unused elements and duplicates within &#39;computation-&gt;indexes_ranges&#39;</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a2d58446b9b01c450142c48ec4732b0b6">RenumberIndexesRanges</a>();</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher.html">  309</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher.html">SubMatrixHasher</a> {</div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher.html#afdeb79758745dbc19fd1fab85623feba">  310</a></span>&#160;    <a class="code" href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher.html#afdeb79758745dbc19fd1fab85623feba">SubMatrixHasher</a>() { }</div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher.html#a011b35b9e0527f84893af75e92b3d7d6">  311</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher.html#a011b35b9e0527f84893af75e92b3d7d6">operator () </a>(<span class="keyword">const</span> <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html">NnetComputation::SubMatrixInfo</a> &amp;submat)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="comment">// these numbers are arbitrarily chosen primes.</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span> submat.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html#a515c4dd14ce4dc58f42c9a60b6bfbaba">matrix_index</a> +</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;          19553 * submat.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html#acfb04e9339880d3594894f5201b70eac">row_offset</a> +</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;          29297 * submat.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html#a71978616b0acd678d1f284943acd6586">num_rows</a> +</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;          42209 * submat.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html#a7524bea2834a3dc08b90e5b3406ee0e8">col_offset</a> +</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;          56527 * submat.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html#aea941d74a486998b6fa921bc19fed05c">num_cols</a>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  };</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// Here, T will be int32 or std::pair&lt;int32,int32&gt;</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1PointerCompare.html">  324</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1PointerCompare.html">PointerCompare</a> {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">// This provides an operator &lt; on two vectors of ints or pairs of ints.  It</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">// is designed to provide a total order on the vectors while accessing as</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// small a portion of the vectors&#39; data as possible.  It&#39;s used in removing</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// duplicates from computation_-&gt;indexes_multi and computation_-&gt;indexes.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// First it compares the length, then it does lexicographical compare.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1PointerCompare.html#a2aa2926783abad87f91bd008421645b4">  330</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1PointerCompare.html#a2aa2926783abad87f91bd008421645b4">operator ()</a>(<span class="keyword">const</span> std::vector&lt;T&gt; *ptr1,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                     <span class="keyword">const</span> std::vector&lt;T&gt; *ptr2)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordtype">size_t</span> size1 = ptr1-&gt;size(), size2 = ptr2-&gt;size();</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">if</span> (size1 &lt; size2) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (size1 &gt; size2) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">return</span> (*ptr1 &lt; *ptr2);  <span class="comment">// use the std::vector operator &lt;, which is</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                    <span class="comment">// lexicographical comparison.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  };</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a04c50ce17b400e39661d1f8a38c05f1e">CreateRenumbering</a>(<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> old_num_elements,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                <span class="keyword">const</span> std::vector&lt;int32&gt; &amp;to_remove,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                std::vector&lt;int32&gt; *renumbering);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keyword">static</span> <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a04c50ce17b400e39661d1f8a38c05f1e">CreateRenumbering</a>(<span class="keyword">const</span> std::vector&lt;bool&gt; &amp;used,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                 std::vector&lt;int32&gt; *renumbering);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// vector of bool indexed by original submatrix-index, that is true if a</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// submatrix-index is used somewhere in the computation (always true for</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// the zeroth element).</span></div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#ab9f2139eeea0f81f453a7d514d7fb3d2">  357</a></span>&#160;  std::vector&lt;bool&gt; <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#ab9f2139eeea0f81f453a7d514d7fb3d2">submatrix_is_used_</a>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// vector of bool indexed by original submatrix-index, that is true if a</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// submatrix-index will be kept; this is like submatrix_is_used_; but for</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// duplicate submatrices, all but the first duplicate will be marked false).</span></div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a741e7e5a1297b3649eddf521ccede5a4">  361</a></span>&#160;  std::vector&lt;bool&gt; <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a741e7e5a1297b3649eddf521ccede5a4">submatrix_is_kept_</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="comment">// vector of bool indexed by original-matrix-index &gt; 0, that is true if a</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="comment">// matrix-index is used somewhere in the computation, directly or indirectly.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// always true for the zeroth element.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a5ce3b0b9947d694dce936488d805cbc9">  365</a></span>&#160;  std::vector&lt;bool&gt; <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a5ce3b0b9947d694dce936488d805cbc9">matrix_is_used_</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a36d13565d1302a2bf74127b141ba3537">  366</a></span>&#160;  <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *<a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a36d13565d1302a2bf74127b141ba3537">computation_</a>;</div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#af21b8b1c9ede3dc6087eb7f89f7f1b43">  367</a></span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#af21b8b1c9ede3dc6087eb7f89f7f1b43">num_matrices_new_</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#ab22ae6f823fa687017ff28e30c668156">  368</a></span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#ab22ae6f823fa687017ff28e30c668156">num_submatrices_new_</a>;</div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a2e550555b94eb7980bb3f5c0474ef816">  369</a></span>&#160;  std::vector&lt;int32&gt; <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a2e550555b94eb7980bb3f5c0474ef816">old_to_new_matrix_</a>; <span class="comment">// numbered by orig-matrix-index, gives</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                                         <span class="comment">// new-matrix-index.  -1 for removed</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                         <span class="comment">// ones.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#ac9050b561913ee338e9a5b75d1671ac9">  372</a></span>&#160;  std::vector&lt;int32&gt; <a class="code" href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#ac9050b561913ee338e9a5b75d1671ac9">old_to_new_submatrix_</a>; <span class="comment">// numbered by orig-submatrix-index,</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                            <span class="comment">// gives new-submatrix-index.  -1</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                                            <span class="comment">// for removed ones.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;};</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">// We require that the computation have debug info set up</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">// (!matrix_debug_info.empty()) and that this be the first</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">// optimization you perform.  This means that the debug_info will</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">// be accurate and that all matrices will be initialized with</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">// zero contents.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html">  383</a></span>&#160;<span class="keyword">class </span><a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html">DerivativeTimeLimiter</a> {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a8217a8f0d8406fe0e5fdbdb371feebbd">DerivativeTimeLimiter</a>(<span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;nnet,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                        <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> min_deriv_time,</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                        <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> max_deriv_time,</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                        <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *computation);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a594bab8b25225a0b1c64109336934916">LimitDerivTimes</a>();</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// This command ensures that for each matrix m there is a corresponding</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// submatrix that spans the entire matrix, and stores its index in</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// entire_submatrix_[m].</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a12401b16194c13383272f4de02deb6e3">EnsureMatricesHaveEntireSubmatrices</a>();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">// sets up matrix_prune_info_.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#ab5c1a034b55e741c8e3019aaab55db03">ComputeMatrixPruneInfo</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// sets up subatrix_map_ and submatrix_map_if_deriv_.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a8bca4ab6bca2d1728dc0b03cf863be52">ComputeSubmatrixMaps</a>();</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// modifies all the commands as appropriate to reflect that some derivative</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">// values are zero (i.e. save any computation we can, based on this</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// assumption).</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#ae00720e16e58e1065f81793469767a84">ModifyCommands</a>();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">// this function, called after we&#39;ve modified the commands to operate on</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// submatrices of the original matrices, works out for which of the matrices</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// we can actually limit their extent in time, and changes the way the</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="comment">// matrices are allocated (it may remove some matrices entirely).</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#ad70a13d2a5ffc3f7e7370f7b4e774a73">PruneMatrices</a>();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// called from PruneMatrices only for matrices that are derivatives,</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// not inputs or outputs of the computation, and which are partly</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// inside the time range, this function returns true if we can</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// limit the size of the matrix (because variables outside the</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// desired range are never accessed), and false otherwise.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#aab606a6e5101ae95e9a41301cdeaa32b">CanLimitMatrix</a>(<span class="keyword">const</span> <a class="code" href="structkaldi_1_1nnet3_1_1Analyzer.html">Analyzer</a> &amp;analyzer,</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                             <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> matrix_index) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// called from PruneMatrices after it has figured out which matrices we need</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="comment">// to limit to a row-range, this function changes computation-&gt;submatrices and</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">// computation-&gt;matrices in the way required to do that.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a421b918da6c7e4b2706ae55f7be3611c">LimitMatrices</a>(<span class="keyword">const</span> std::vector&lt;bool&gt; &amp;will_limit);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// does the processing for a command of type kMatrixCopy or kMatrixAdd.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#ac790fa54a2c9e95706a7384c687651ad">MapSimpleMatrixCommand</a>(<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1Command.html">NnetComputation::Command</a> *c);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">// does the processing for a command of type kCopyRows or kAddRows, where</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// 1st and 2nd args are submatrix indexes and the 3rd arg is a vector of</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">// row-indexes.</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a92539dc86963420ae51faa16150cf0be">MapIndexesCommand</a>(<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1Command.html">NnetComputation::Command</a> *c);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="comment">// does the processing for a command of type kAddRowsMulti, kAddToRowsMulti,</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// kCopyRowsMulti or kCopyToRowsMulti, 1st arg is submatrix index that the</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="comment">// command is called with, and 2nd arg is &#39;indexes_multi&#39; index (which</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="comment">// contains pairs (source-submatrix, source-row).</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a5907a076729be892104754ad91aa38d5">MapIndexesMultiCommand</a>(<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1Command.html">NnetComputation::Command</a> *c);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// does the processing for a command of type kAddRowRanges.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a071bff9d8909e7d80b7d85a3d3b69aff">MapAddRowRangesCommand</a>(<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1Command.html">NnetComputation::Command</a> *c);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="comment">// Modifies this command to take into account prune_info_.  At this point we</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// don&#39;t actually reduce the size of the matrices, we simply make the commands</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// operate on submatrices of the original matrices where possible- or</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// delete them completely if their output is all zeros or for other reasons</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// we detect that they would be no-ops.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="comment">// Note: this calls computation_-&gt;NewSubMatrix, and will generate duplicates</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// of the same submatrix which we&#39;ll later remove in RemoveOrphanMatrices.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a104e34b2a7fa8395d34e9e6e0d24ee42">ModifyCommand</a>(<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1Command.html">NnetComputation::Command</a> *command);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">// this will detect which matrices we can reduce the allocated size of,</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">// and reduce their size.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#abef08be8cbb804941e5d09efd1bfc3b5">ResizeMatrices</a>();</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">// Requires that we have mapped &#39;initial_submatrix&#39; to &#39;new_submatrix&#39; in</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// an operation that may have removed some data on the left and/or the</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">// right (but still they point to the same underlying matrix).  Outputs</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">// to &#39;left_prune&#39; and &#39;right_prune&#39; the number of rows we have</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">// removed on the left and on the right respectively.</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a44446f1c3927765e166b3e59295070d4">GetPruneValues</a>(<a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> initial_submatrix,</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                             <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> new_submatrix,</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                             <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> *left_prune,</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                             <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> *right_prune) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html">  469</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html">MatrixPruneInfo</a> {</div>
<div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a9da2804c57d358d12d491f0c3d51d0ef">  470</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a9da2804c57d358d12d491f0c3d51d0ef">is_deriv</a>;  <span class="comment">// true if the matrix represents a derivative (copied from</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                    <span class="comment">// the debug-info; repeated here for convenience).</span></div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a3080a09e5ea2e63c0b61d0ab3d0958bc">  472</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a3080a09e5ea2e63c0b61d0ab3d0958bc">fully_inside_range</a>;  <span class="comment">// True if the matrix is completely inside the time range</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                             <span class="comment">// specified.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a64221ce8a4754677e990d336b6154936">  474</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a64221ce8a4754677e990d336b6154936">partly_inside_range</a>;  <span class="comment">// true if the matrix is partly (but not fully)</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                               <span class="comment">// inside the time range specified.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a1854b20fac9e366b01781d5d7c3a87e9">  476</a></span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a1854b20fac9e366b01781d5d7c3a87e9">row_begin</a>;  <span class="comment">// if partly_inside_range, the first row that&#39;s within the time range (i.e. for which</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                      <span class="comment">// min_deriv_time_ &lt;= t &lt; max_deriv_time_.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a5b5e72d60df6479503b80e9ed4861fc6">  478</a></span>&#160;    <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a5b5e72d60df6479503b80e9ed4861fc6">row_end</a>;    <span class="comment">// if partly_inside_range, one plus the last row that&#39;s within</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                      <span class="comment">// the time range.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  };</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#adbabf05a7702103113a02a113015205f">  483</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;<a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#adbabf05a7702103113a02a113015205f">nnet_</a>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a7d43f793d8585fd0de88e7a428d60a6b">  485</a></span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a7d43f793d8585fd0de88e7a428d60a6b">min_deriv_time_</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a7b34d0f8ba1be1c25827f404fd1de33c">  486</a></span>&#160;  <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a7b34d0f8ba1be1c25827f404fd1de33c">max_deriv_time_</a>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="comment">// the computation; we require it to have debug info set up</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// (otherwise you shouldn&#39;t be instantiating this class).</span></div>
<div class="line"><a name="l00490"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a36d13565d1302a2bf74127b141ba3537">  490</a></span>&#160;  <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *<a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a36d13565d1302a2bf74127b141ba3537">computation_</a>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// for each matrix index &gt; 0, the index of a submatrix that consists of</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="comment">// the entirety of that matrix.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#ae61dfd0b06856c208c45a3ac6af96882">  494</a></span>&#160;  std::vector&lt;int32&gt; <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#ae61dfd0b06856c208c45a3ac6af96882">entire_submatrix_</a>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a1e3dad6a0a1c8cc5e5806070896de8c1">  496</a></span>&#160;  std::vector&lt;MatrixPruneInfo&gt; <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a1e3dad6a0a1c8cc5e5806070896de8c1">matrix_prune_info_</a>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">// for each submatrix in the original range of computation_-&gt;submatrices,</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="comment">// submatrix_map_ maps it to itself if the submatrix is completely inside the</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">// time-range, or to zero if it&#39;s completely outside the time-range, or to a</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// newly created submatrix-index if it&#39;s partly inside the time-range.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a066039f8c4f9f320876c465226f17f59">  502</a></span>&#160;  std::vector&lt;int32&gt; <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a066039f8c4f9f320876c465226f17f59">submatrix_map_</a>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="comment">// submatrix_map_if_deriv_ contains the quantity:</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="comment">// IsDerivative(s) ? submatrix_map_[s] : s,</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="comment">// where IsDerivative(s) is true if s is part of a matrix that (according to its</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="comment">// debug info) represents a derivative.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="comment">// this comes up so frequently that storing it separately seemed like a good idea.</span></div>
<div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a14a83a4f58ad0342612cbb5ff943c580">  509</a></span>&#160;  std::vector&lt;int32&gt; <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a14a83a4f58ad0342612cbb5ff943c580">submatrix_map_if_deriv_</a>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a15bb7ca12ed6762b58036e84ba948bd8">  511</a></span>&#160;  std::vector&lt;MatrixPruneInfo&gt; <a class="code" href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a15bb7ca12ed6762b58036e84ba948bd8">prune_info_</a>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;};</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">// This is the top-level interface to limit the times on which derivatives are</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">// computed (e.g. for truncated BPTT); internally it uses class</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">// DerivativeLimiter.  Will do nothing if min_deriv_time and max_deriv_time are</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">// their default -inf,+inf values.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a6ed9b871bd28649b80165dc1af5d1a98">LimitDerivativeTimes</a>(<span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;nnet,</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                          <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> min_deriv_time,</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                          <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> max_deriv_time,</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                          <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *computation);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a6828e427bd8883455705e0c9b99b5f2f">RenumberComputation</a>(<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *computation);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a1146f4efa141a56210f9dbf1090b20f0">RemoveNoOps</a>(<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *computation);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a94e3ce52963d290fbf0595dea3b126c6">ReplaceInInput</a>(</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;nnet, <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> orig_matrix_index, <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> new_matrix_index,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *computation);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a2efea0af361ac9b6981f605d7e616028">ReplaceInOutput</a>(</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;nnet, <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> orig_matrix_index, <a class="code" href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">int32</a> new_matrix_index,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *computation);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a2ec833031232462f45b425a8a5503489">IdentifySubmatrixArgs</a>(<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1Command.html">NnetComputation::Command</a> *command,</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                           std::vector&lt;int32*&gt; *submatrix_args);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a2ec833031232462f45b425a8a5503489">IdentifySubmatrixArgs</a>(std::vector&lt;NnetComputation::Command&gt; *commands,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                           std::vector&lt;int32*&gt; *submatrix_args);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#af87da4e8a0e1880438bf77e8a34b4143">IdentifySubmatrixArgsInComputation</a>(<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *computation,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                                        std::vector&lt;int32*&gt; *submatrix_args);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#ada08c40c80a54a8a851448af83ada561">IdentifyMatrixArgs</a>(<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation_1_1Command.html">NnetComputation::Command</a> *command,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                        std::vector&lt;int32*&gt; *matrix_args);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#ada08c40c80a54a8a851448af83ada561">IdentifyMatrixArgs</a>(std::vector&lt;NnetComputation::Command&gt; *command,</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                        std::vector&lt;int32*&gt; *matrix_args);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a77e9698625c65ed53a8fb2eadc416110">IdentifyMatrixArgsInComputation</a>(<span class="keywordtype">bool</span> include_from_submatrices,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                                     <a class="code" href="structkaldi_1_1nnet3_1_1NnetComputation.html">NnetComputation</a> *computation,</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                                     std::vector&lt;int32*&gt; *matrix_args);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#af96b480d0b6d2b5890e1490f8c2e6ac0">IdentifyIndexesMultiArgs</a>(std::vector&lt;NnetComputation::Command&gt; *commands,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                              std::vector&lt;int32*&gt; *indexes_multi_args);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a6950699c83d835e55f003f89bb92bc80">IdentifyIndexesArgs</a>(std::vector&lt;NnetComputation::Command&gt; *commands,</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                         std::vector&lt;int32*&gt; *indexes_args);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a6950699c83d835e55f003f89bb92bc80">IdentifyIndexesArgs</a>(std::vector&lt;NnetComputation::Command&gt; *commands,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                         std::vector&lt;int32*&gt; *indexes_args);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a17acd598bf1ced7e83e0c8a8569d224f">IdentifyIndexesRangesArgs</a>(std::vector&lt;NnetComputation::Command&gt; *commands,</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                               std::vector&lt;int32*&gt; *indexes_ranges_args);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">   Possible TODO:</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">      optimizations to replace row-by-row copy and add commands with whole-matrix</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">      commands on smaller sub-matrices (if the row-by-row copy commands have certain</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">      regularities).  this is a minor issue, we can handle it later.  We have to be</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">      careful if this causes sub-matrices to overlap.</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;} <span class="comment">// namespace nnet3</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;} <span class="comment">// namespace kaldi</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="preprocessor"></span></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo_html_a5b5e72d60df6479503b80e9ed4861fc6"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a5b5e72d60df6479503b80e9ed4861fc6">kaldi::nnet3::DerivativeTimeLimiter::MatrixPruneInfo::row_end</a></div><div class="ttdeci">int32 row_end</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00478">nnet-optimize-utils.h:478</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a04c50ce17b400e39661d1f8a38c05f1e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a04c50ce17b400e39661d1f8a38c05f1e">kaldi::nnet3::ComputationRenumberer::CreateRenumbering</a></div><div class="ttdeci">static void CreateRenumbering(int32 old_num_elements, const std::vector&lt; int32 &gt; &amp;to_remove, std::vector&lt; int32 &gt; *renumbering)</div><div class="ttdoc">creates a renumbering that removes the elements in &quot;to_remove&quot;, e.g. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00205">nnet-optimize-utils.cc:205</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_ae52c106fb3f904728cb5c55c6c4184e0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#ae52c106fb3f904728cb5c55c6c4184e0">kaldi::nnet3::VariableMergingOptimizer::VariableMergingOptimizer</a></div><div class="ttdeci">VariableMergingOptimizer(const NnetOptimizeOptions &amp;config, const Nnet &amp;nnet, const ComputationRequest &amp;request, NnetComputation *computation)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00693">nnet-optimize-utils.cc:693</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_a333f8ed19d13a9725fc630b765490020"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a333f8ed19d13a9725fc630b765490020">kaldi::nnet3::VariableMergingOptimizer::DoMergeCommon</a></div><div class="ttdeci">void DoMergeCommon(int32 command_index, int32 m_to_keep, int32 m_to_discard)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00839">nnet-optimize-utils.cc:839</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html">kaldi::nnet3::VariableMergingOptimizer</a></div><div class="ttdoc">This class is responsible for merging matrices, although you probably want to access it via the the f...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00133">nnet-optimize-utils.h:133</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a15bb7ca12ed6762b58036e84ba948bd8"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a15bb7ca12ed6762b58036e84ba948bd8">kaldi::nnet3::DerivativeTimeLimiter::prune_info_</a></div><div class="ttdeci">std::vector&lt; MatrixPruneInfo &gt; prune_info_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00511">nnet-optimize-utils.h:511</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a5ce3b0b9947d694dce936488d805cbc9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a5ce3b0b9947d694dce936488d805cbc9">kaldi::nnet3::ComputationRenumberer::matrix_is_used_</a></div><div class="ttdeci">std::vector&lt; bool &gt; matrix_is_used_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00365">nnet-optimize-utils.h:365</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_a12563ff580f9e7179c096ed44f1e2ca7"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a12563ff580f9e7179c096ed44f1e2ca7">kaldi::nnet3::VariableMergingOptimizer::request_</a></div><div class="ttdeci">const ComputationRequest &amp; request_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00184">nnet-optimize-utils.h:184</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_ad70a13d2a5ffc3f7e7370f7b4e774a73"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#ad70a13d2a5ffc3f7e7370f7b4e774a73">kaldi::nnet3::DerivativeTimeLimiter::PruneMatrices</a></div><div class="ttdeci">void PruneMatrices()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01758">nnet-optimize-utils.cc:1758</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html_af13a24e7f0ed6969f7659518478ffdc2"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#af13a24e7f0ed6969f7659518478ffdc2">kaldi::nnet3::ModelUpdateConsolidator::final_commands_</a></div><div class="ttdeci">std::vector&lt; NnetComputation::Command &gt; final_commands_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00263">nnet-optimize-utils.h:263</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a741e7e5a1297b3649eddf521ccede5a4"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a741e7e5a1297b3649eddf521ccede5a4">kaldi::nnet3::ComputationRenumberer::submatrix_is_kept_</a></div><div class="ttdeci">std::vector&lt; bool &gt; submatrix_is_kept_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00361">nnet-optimize-utils.h:361</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_aaa18736d4d5abceba0340d264da8ecd2"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#aaa18736d4d5abceba0340d264da8ecd2">kaldi::nnet3::ComputationRenumberer::RenumberSubmatrices</a></div><div class="ttdeci">void RenumberSubmatrices()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00330">nnet-optimize-utils.cc:330</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html_aff6dbc6bf1ea33e5ea29bebebae8617a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#aff6dbc6bf1ea33e5ea29bebebae8617a">kaldi::nnet3::ModelUpdateConsolidator::extra_commands_</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; NnetComputation::Command &gt; &gt; extra_commands_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00258">nnet-optimize-utils.h:258</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_a63de82c33f6a7330727c0f2fc670ae0d"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a63de82c33f6a7330727c0f2fc670ae0d">kaldi::nnet3::VariableMergingOptimizer::variable_dirty_</a></div><div class="ttdeci">std::vector&lt; bool &gt; variable_dirty_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00194">nnet-optimize-utils.h:194</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a2ec833031232462f45b425a8a5503489"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a2ec833031232462f45b425a8a5503489">kaldi::nnet3::IdentifySubmatrixArgs</a></div><div class="ttdeci">void IdentifySubmatrixArgs(NnetComputation::Command *c, std::vector&lt; int32 * &gt; *submatrix_args)</div><div class="ttdoc">This function outputs to &quot;submatrix_args&quot; the addresses of a subset of arguments arg1 through arg6 in...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00029">nnet-optimize-utils.cc:29</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a6828e427bd8883455705e0c9b99b5f2f"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a6828e427bd8883455705e0c9b99b5f2f">kaldi::nnet3::RenumberComputation</a></div><div class="ttdeci">void RenumberComputation(NnetComputation *computation)</div><div class="ttdoc">This function detects submatrices, matrices, and members of indexes_multi and indexes that are never ...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00599">nnet-optimize-utils.cc:599</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a1920fdb81424ab47c050e27102ddcfd6"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a1920fdb81424ab47c050e27102ddcfd6">kaldi::nnet3::ComputationRenumberer::Renumber</a></div><div class="ttdeci">void Renumber()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00396">nnet-optimize-utils.cc:396</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a14a83a4f58ad0342612cbb5ff943c580"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a14a83a4f58ad0342612cbb5ff943c580">kaldi::nnet3::DerivativeTimeLimiter::submatrix_map_if_deriv_</a></div><div class="ttdeci">std::vector&lt; int32 &gt; submatrix_map_if_deriv_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00509">nnet-optimize-utils.h:509</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a8bca4ab6bca2d1728dc0b03cf863be52"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a8bca4ab6bca2d1728dc0b03cf863be52">kaldi::nnet3::DerivativeTimeLimiter::ComputeSubmatrixMaps</a></div><div class="ttdeci">void ComputeSubmatrixMaps()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01605">nnet-optimize-utils.cc:1605</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a356665946a32706f0cc3c880154ff3ca"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a356665946a32706f0cc3c880154ff3ca">kaldi::nnet3::ComputationRenumberer::ComputeSubmatrixIsUsed</a></div><div class="ttdeci">void ComputeSubmatrixIsUsed()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00251">nnet-optimize-utils.cc:251</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_af3b2fad1be81ad4faf61e71f07486ef0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#af3b2fad1be81ad4faf61e71f07486ef0">kaldi::nnet3::VariableMergingOptimizer::DoLeftMerge</a></div><div class="ttdeci">void DoLeftMerge(int32 command_index, int32 s1, int32 s2)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00900">nnet-optimize-utils.cc:900</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_af87da4e8a0e1880438bf77e8a34b4143"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#af87da4e8a0e1880438bf77e8a34b4143">kaldi::nnet3::IdentifySubmatrixArgsInComputation</a></div><div class="ttdeci">void IdentifySubmatrixArgsInComputation(NnetComputation *computation, std::vector&lt; int32 * &gt; *submatrix_args)</div><div class="ttdoc">This function outputs to &quot;submatrix_args&quot; the addresses of integers in &#39;computation&#39; that correspon...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00230">nnet-optimize-utils.cc:230</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo_html"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html">kaldi::nnet3::NnetComputation::SubMatrixInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation_8h_source.html#l00227">nnet-computation.h:227</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a2d58446b9b01c450142c48ec4732b0b6"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a2d58446b9b01c450142c48ec4732b0b6">kaldi::nnet3::ComputationRenumberer::RenumberIndexesRanges</a></div><div class="ttdeci">void RenumberIndexesRanges()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00541">nnet-optimize-utils.cc:541</a></div></div>
<div class="ttc" id="nnet-analyze_8h_html"><div class="ttname"><a href="nnet-analyze_8h.html">nnet-analyze.h</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html">kaldi::nnet3::ModelUpdateConsolidator</a></div><div class="ttdoc">This class is responsible for consolidating the model-update part of backprop commands, for components in (e.g.) recurrent networks that need to have many separate backprop commands, into more efficient single commands operating on consolidated data in larger matrices. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00205">nnet-optimize-utils.h:205</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo_html_a1854b20fac9e366b01781d5d7c3a87e9"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a1854b20fac9e366b01781d5d7c3a87e9">kaldi::nnet3::DerivativeTimeLimiter::MatrixPruneInfo::row_begin</a></div><div class="ttdeci">int32 row_begin</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00476">nnet-optimize-utils.h:476</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a8f1ed03be326c0cbf0728194d4ac30d0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a8f1ed03be326c0cbf0728194d4ac30d0">kaldi::nnet3::ComputationRenumberer::ComputationRenumberer</a></div><div class="ttdeci">ComputationRenumberer(NnetComputation *computation)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00274">nnet-optimize-utils.h:274</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo_html_a71978616b0acd678d1f284943acd6586"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html#a71978616b0acd678d1f284943acd6586">kaldi::nnet3::NnetComputation::SubMatrixInfo::num_rows</a></div><div class="ttdeci">int32 num_rows</div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation_8h_source.html#l00230">nnet-computation.h:230</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a8217a8f0d8406fe0e5fdbdb371feebbd"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a8217a8f0d8406fe0e5fdbdb371feebbd">kaldi::nnet3::DerivativeTimeLimiter::DerivativeTimeLimiter</a></div><div class="ttdeci">DerivativeTimeLimiter(const Nnet &amp;nnet, int32 min_deriv_time, int32 max_deriv_time, NnetComputation *computation)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01526">nnet-optimize-utils.cc:1526</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a36d13565d1302a2bf74127b141ba3537"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a36d13565d1302a2bf74127b141ba3537">kaldi::nnet3::DerivativeTimeLimiter::computation_</a></div><div class="ttdeci">NnetComputation * computation_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00490">nnet-optimize-utils.h:490</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a071bff9d8909e7d80b7d85a3d3b69aff"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a071bff9d8909e7d80b7d85a3d3b69aff">kaldi::nnet3::DerivativeTimeLimiter::MapAddRowRangesCommand</a></div><div class="ttdeci">void MapAddRowRangesCommand(NnetComputation::Command *c)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01475">nnet-optimize-utils.cc:1475</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a44446f1c3927765e166b3e59295070d4"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a44446f1c3927765e166b3e59295070d4">kaldi::nnet3::DerivativeTimeLimiter::GetPruneValues</a></div><div class="ttdeci">void GetPruneValues(int32 initial_submatrix, int32 new_submatrix, int32 *left_prune, int32 *right_prune) const </div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01189">nnet-optimize-utils.cc:1189</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a421b918da6c7e4b2706ae55f7be3611c"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a421b918da6c7e4b2706ae55f7be3611c">kaldi::nnet3::DerivativeTimeLimiter::LimitMatrices</a></div><div class="ttdeci">void LimitMatrices(const std::vector&lt; bool &gt; &amp;will_limit)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01704">nnet-optimize-utils.cc:1704</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a6ed9b871bd28649b80165dc1af5d1a98"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a6ed9b871bd28649b80165dc1af5d1a98">kaldi::nnet3::LimitDerivativeTimes</a></div><div class="ttdeci">void LimitDerivativeTimes(const Nnet &amp;nnet, int32 min_deriv_time, int32 max_deriv_time, NnetComputation *computation)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01805">nnet-optimize-utils.cc:1805</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_af21b8b1c9ede3dc6087eb7f89f7f1b43"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#af21b8b1c9ede3dc6087eb7f89f7f1b43">kaldi::nnet3::ComputationRenumberer::num_matrices_new_</a></div><div class="ttdeci">int32 num_matrices_new_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00367">nnet-optimize-utils.h:367</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_ab9dc158a3fd3e688df0e1df6912cd7b1"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#ab9dc158a3fd3e688df0e1df6912cd7b1">kaldi::nnet3::VariableMergingOptimizer::DoRightMerge</a></div><div class="ttdeci">void DoRightMerge(int32 command_index, int32 s1, int32 s2)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00803">nnet-optimize-utils.cc:803</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher_html_a011b35b9e0527f84893af75e92b3d7d6"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher.html#a011b35b9e0527f84893af75e92b3d7d6">kaldi::nnet3::ComputationRenumberer::SubMatrixHasher::operator()</a></div><div class="ttdeci">size_t operator()(const NnetComputation::SubMatrixInfo &amp;submat) const </div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00311">nnet-optimize-utils.h:311</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a7b34d0f8ba1be1c25827f404fd1de33c"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a7b34d0f8ba1be1c25827f404fd1de33c">kaldi::nnet3::DerivativeTimeLimiter::max_deriv_time_</a></div><div class="ttdeci">int32 max_deriv_time_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00486">nnet-optimize-utils.h:486</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a228a7ce7320c66bc72058b3805fec957"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a228a7ce7320c66bc72058b3805fec957">kaldi::nnet3::ComputationRenumberer::RenumberIndexes</a></div><div class="ttdeci">void RenumberIndexes()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00487">nnet-optimize-utils.cc:487</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html_a9ff791337c174a7dd4d789a414c452e3"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a9ff791337c174a7dd4d789a414c452e3">kaldi::nnet3::ModelUpdateConsolidator::AddCommandsToComputation</a></div><div class="ttdeci">void AddCommandsToComputation()</div><div class="ttdoc">This function, called at the end of ConsolidateModelUpdate(), takes the commands that we have put in ...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01077">nnet-optimize-utils.cc:1077</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a138955c2d9469f28aa78853564c298ce"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a138955c2d9469f28aa78853564c298ce">kaldi::nnet3::ComputationRenumberer::RemoveIndexesMultiDuplicates</a></div><div class="ttdeci">void RemoveIndexesMultiDuplicates()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00444">nnet-optimize-utils.cc:444</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo_html_aea941d74a486998b6fa921bc19fed05c"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html#aea941d74a486998b6fa921bc19fed05c">kaldi::nnet3::NnetComputation::SubMatrixInfo::num_cols</a></div><div class="ttdeci">int32 num_cols</div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation_8h_source.html#l00232">nnet-computation.h:232</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationRequest_html"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationRequest.html">kaldi::nnet3::ComputationRequest</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation_8h_source.html#l00103">nnet-computation.h:103</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_ab9f2139eeea0f81f453a7d514d7fb3d2"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#ab9f2139eeea0f81f453a7d514d7fb3d2">kaldi::nnet3::ComputationRenumberer::submatrix_is_used_</a></div><div class="ttdeci">std::vector&lt; bool &gt; submatrix_is_used_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00357">nnet-optimize-utils.h:357</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html_a49ab0eb74e9ab7b96b459d319f443d02"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a49ab0eb74e9ab7b96b459d319f443d02">kaldi::nnet3::ModelUpdateConsolidator::ModelUpdateConsolidator</a></div><div class="ttdeci">ModelUpdateConsolidator(const Nnet &amp;nnet, NnetComputation *computation)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01151">nnet-optimize-utils.cc:1151</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html_ab6f35b73f49e1242e20e85ce650b5741"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#ab6f35b73f49e1242e20e85ce650b5741">kaldi::nnet3::ModelUpdateConsolidator::AppendDebugInfoForSubmatrix</a></div><div class="ttdeci">void AppendDebugInfoForSubmatrix(int32 submatrix_index, NnetComputation::MatrixDebugInfo *debug_info) const </div><div class="ttdoc">This function, called from ConsolidateSubmatrices, will update &#39;debug_info&#39; by appending the correspo...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00998">nnet-optimize-utils.cc:998</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a94e3ce52963d290fbf0595dea3b126c6"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a94e3ce52963d290fbf0595dea3b126c6">kaldi::nnet3::ReplaceInInput</a></div><div class="ttdeci">bool ReplaceInInput(const Nnet &amp;nnet, int32 orig_matrix_index, int32 new_matrix_index, NnetComputation *computation)</div><div class="ttdoc">Wherever matrix orig_matrix_index appears in the input of the network (i.e. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00621">nnet-optimize-utils.cc:621</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a1e3dad6a0a1c8cc5e5806070896de8c1"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a1e3dad6a0a1c8cc5e5806070896de8c1">kaldi::nnet3::DerivativeTimeLimiter::matrix_prune_info_</a></div><div class="ttdeci">std::vector&lt; MatrixPruneInfo &gt; matrix_prune_info_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00496">nnet-optimize-utils.h:496</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_a4dcce2ef4364ac3b222debac11646a39"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a4dcce2ef4364ac3b222debac11646a39">kaldi::nnet3::VariableMergingOptimizer::config_</a></div><div class="ttdeci">const NnetOptimizeOptions &amp; config_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00182">nnet-optimize-utils.h:182</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo_html_a7524bea2834a3dc08b90e5b3406ee0e8"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html#a7524bea2834a3dc08b90e5b3406ee0e8">kaldi::nnet3::NnetComputation::SubMatrixInfo::col_offset</a></div><div class="ttdeci">int32 col_offset</div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation_8h_source.html#l00231">nnet-computation.h:231</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_a0655730456d3a04cafe943687894a84d"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a0655730456d3a04cafe943687894a84d">kaldi::nnet3::VariableMergingOptimizer::matrix_to_submatrix_</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int32 &gt; &gt; matrix_to_submatrix_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00190">nnet-optimize-utils.h:190</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a777e19363ed62a4364eeb8743e848889"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a777e19363ed62a4364eeb8743e848889">kaldi::nnet3::ComputationRenumberer::SetUpMappings</a></div><div class="ttdeci">void SetUpMappings()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00303">nnet-optimize-utils.cc:303</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_af96b480d0b6d2b5890e1490f8c2e6ac0"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#af96b480d0b6d2b5890e1490f8c2e6ac0">kaldi::nnet3::IdentifyIndexesMultiArgs</a></div><div class="ttdeci">void IdentifyIndexesMultiArgs(std::vector&lt; NnetComputation::Command &gt; *commands, std::vector&lt; int32 * &gt; *indexes_multi_args)</div><div class="ttdoc">Identifies in the vector of commands, arguments that correspond to indexes into the computation&#39;s ind...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00127">nnet-optimize-utils.cc:127</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a5907a076729be892104754ad91aa38d5"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a5907a076729be892104754ad91aa38d5">kaldi::nnet3::DerivativeTimeLimiter::MapIndexesMultiCommand</a></div><div class="ttdeci">void MapIndexesMultiCommand(NnetComputation::Command *c)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01411">nnet-optimize-utils.cc:1411</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1PointerCompare_html"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1PointerCompare.html">kaldi::nnet3::ComputationRenumberer::PointerCompare</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00324">nnet-optimize-utils.h:324</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputation_1_1Command_html"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputation_1_1Command.html">kaldi::nnet3::NnetComputation::Command</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation_8h_source.html#l00240">nnet-computation.h:240</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html">kaldi::nnet3::DerivativeTimeLimiter</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00383">nnet-optimize-utils.h:383</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetOptimizeOptions_html"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetOptimizeOptions.html">kaldi::nnet3::NnetOptimizeOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize_8h_source.html#l00034">nnet-optimize.h:34</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo_html_acfb04e9339880d3594894f5201b70eac"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html#acfb04e9339880d3594894f5201b70eac">kaldi::nnet3::NnetComputation::SubMatrixInfo::row_offset</a></div><div class="ttdeci">int32 row_offset</div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation_8h_source.html#l00229">nnet-computation.h:229</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html_ad691fe3a6e61eb46c08d591d4af2ea4b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#ad691fe3a6e61eb46c08d591d4af2ea4b">kaldi::nnet3::ModelUpdateConsolidator::ConsolidateUpdateForComponent</a></div><div class="ttdeci">void ConsolidateUpdateForComponent(int32 component, const std::vector&lt; int32 &gt; &amp;backprop_commands)</div><div class="ttdoc">This function, called from ConsolidateModelUpdate, is passed a list of commands that are all backprop...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01103">nnet-optimize-utils.cc:1103</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Nnet_html"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Nnet.html">kaldi::nnet3::Nnet</a></div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-nnet_8h_source.html#l00115">nnet-nnet.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_a36d13565d1302a2bf74127b141ba3537"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a36d13565d1302a2bf74127b141ba3537">kaldi::nnet3::VariableMergingOptimizer::computation_</a></div><div class="ttdeci">NnetComputation * computation_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00185">nnet-optimize-utils.h:185</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_ac8ca96df1ecdb635738c59a88cff8835"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#ac8ca96df1ecdb635738c59a88cff8835">kaldi::nnet3::VariableMergingOptimizer::analyzer_</a></div><div class="ttdeci">Analyzer analyzer_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00187">nnet-optimize-utils.h:187</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_adbabf05a7702103113a02a113015205f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#adbabf05a7702103113a02a113015205f">kaldi::nnet3::VariableMergingOptimizer::nnet_</a></div><div class="ttdeci">const Nnet &amp; nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00183">nnet-optimize-utils.h:183</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html_ad6767e6a06ceef8ceedb067c8c86d463"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#ad6767e6a06ceef8ceedb067c8c86d463">kaldi::nnet3::ModelUpdateConsolidator::ConsolidateSubmatrices</a></div><div class="ttdeci">int32 ConsolidateSubmatrices(const std::vector&lt; int32 &gt; &amp;commands, const std::vector&lt; int32 &gt; &amp;submatrices)</div><div class="ttdoc">You call this function when you want to consolidate the values of a list of submatrices taken just pr...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01023">nnet-optimize-utils.cc:1023</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a7d43f793d8585fd0de88e7a428d60a6b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a7d43f793d8585fd0de88e7a428d60a6b">kaldi::nnet3::DerivativeTimeLimiter::min_deriv_time_</a></div><div class="ttdeci">int32 min_deriv_time_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00485">nnet-optimize-utils.h:485</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html">kaldi::nnet3::ComputationRenumberer</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00272">nnet-optimize-utils.h:272</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html_a36d13565d1302a2bf74127b141ba3537"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a36d13565d1302a2bf74127b141ba3537">kaldi::nnet3::ModelUpdateConsolidator::computation_</a></div><div class="ttdeci">NnetComputation * computation_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00252">nnet-optimize-utils.h:252</a></div></div>
<div class="ttc" id="nnet-compile_8h_html"><div class="ttname"><a href="nnet-compile_8h.html">nnet-compile.h</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_a98b1050f09da390896f964fb7a892391"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a98b1050f09da390896f964fb7a892391">kaldi::nnet3::VariableMergingOptimizer::Initialize</a></div><div class="ttdeci">void Initialize()</div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a12401b16194c13383272f4de02deb6e3"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a12401b16194c13383272f4de02deb6e3">kaldi::nnet3::DerivativeTimeLimiter::EnsureMatricesHaveEntireSubmatrices</a></div><div class="ttdeci">void EnsureMatricesHaveEntireSubmatrices()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01550">nnet-optimize-utils.cc:1550</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1PointerCompare_html_a2aa2926783abad87f91bd008421645b4"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1PointerCompare.html#a2aa2926783abad87f91bd008421645b4">kaldi::nnet3::ComputationRenumberer::PointerCompare::operator()</a></div><div class="ttdeci">bool operator()(const std::vector&lt; T &gt; *ptr1, const std::vector&lt; T &gt; *ptr2) const </div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00330">nnet-optimize-utils.h:330</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_ae61dfd0b06856c208c45a3ac6af96882"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#ae61dfd0b06856c208c45a3ac6af96882">kaldi::nnet3::DerivativeTimeLimiter::entire_submatrix_</a></div><div class="ttdeci">std::vector&lt; int32 &gt; entire_submatrix_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00494">nnet-optimize-utils.h:494</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_ae00720e16e58e1065f81793469767a84"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#ae00720e16e58e1065f81793469767a84">kaldi::nnet3::DerivativeTimeLimiter::ModifyCommands</a></div><div class="ttdeci">void ModifyCommands()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01649">nnet-optimize-utils.cc:1649</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a6f8e8995300ee82f98f923a053d66573"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a6f8e8995300ee82f98f923a053d66573">kaldi::nnet3::ComputationRenumberer::ComputeMatrixIsUsed</a></div><div class="ttdeci">void ComputeMatrixIsUsed()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00275">nnet-optimize-utils.cc:275</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a2e550555b94eb7980bb3f5c0474ef816"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a2e550555b94eb7980bb3f5c0474ef816">kaldi::nnet3::ComputationRenumberer::old_to_new_matrix_</a></div><div class="ttdeci">std::vector&lt; int32 &gt; old_to_new_matrix_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00369">nnet-optimize-utils.h:369</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="namespacekaldi.html#ab7903878916593daecbeb95b98115ab0">kaldi::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00047">kaldi-types.h:47</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_ab5c1a034b55e741c8e3019aaab55db03"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#ab5c1a034b55e741c8e3019aaab55db03">kaldi::nnet3::DerivativeTimeLimiter::ComputeMatrixPruneInfo</a></div><div class="ttdeci">void ComputeMatrixPruneInfo()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01564">nnet-optimize-utils.cc:1564</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_adbabf05a7702103113a02a113015205f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#adbabf05a7702103113a02a113015205f">kaldi::nnet3::DerivativeTimeLimiter::nnet_</a></div><div class="ttdeci">const Nnet &amp; nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00483">nnet-optimize-utils.h:483</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a92539dc86963420ae51faa16150cf0be"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a92539dc86963420ae51faa16150cf0be">kaldi::nnet3::DerivativeTimeLimiter::MapIndexesCommand</a></div><div class="ttdeci">void MapIndexesCommand(NnetComputation::Command *c)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01343">nnet-optimize-utils.cc:1343</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_ac671ddd1b3a2e51149bc86d7a0965b64"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#ac671ddd1b3a2e51149bc86d7a0965b64">kaldi::nnet3::ComputationRenumberer::RenumberMatrices</a></div><div class="ttdeci">void RenumberMatrices()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00356">nnet-optimize-utils.cc:356</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_ab22ae6f823fa687017ff28e30c668156"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#ab22ae6f823fa687017ff28e30c668156">kaldi::nnet3::ComputationRenumberer::num_submatrices_new_</a></div><div class="ttdeci">int32 num_submatrices_new_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00368">nnet-optimize-utils.h:368</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a104e34b2a7fa8395d34e9e6e0d24ee42"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a104e34b2a7fa8395d34e9e6e0d24ee42">kaldi::nnet3::DerivativeTimeLimiter::ModifyCommand</a></div><div class="ttdeci">void ModifyCommand(NnetComputation::Command *command)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01208">nnet-optimize-utils.cc:1208</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_a60ce57f518b5fa77d140cb414354cd95"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a60ce57f518b5fa77d140cb414354cd95">kaldi::nnet3::VariableMergingOptimizer::MarkAsDirty</a></div><div class="ttdeci">void MarkAsDirty(int32 s)</div><div class="ttdoc">Marks the variables underlying submatrix &#39;s&#39; as dirty. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00791">nnet-optimize-utils.cc:791</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html_adbabf05a7702103113a02a113015205f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#adbabf05a7702103113a02a113015205f">kaldi::nnet3::ModelUpdateConsolidator::nnet_</a></div><div class="ttdeci">const Nnet &amp; nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00251">nnet-optimize-utils.h:251</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher_html_afdeb79758745dbc19fd1fab85623feba"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher.html#afdeb79758745dbc19fd1fab85623feba">kaldi::nnet3::ComputationRenumberer::SubMatrixHasher::SubMatrixHasher</a></div><div class="ttdeci">SubMatrixHasher()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00310">nnet-optimize-utils.h:310</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputation_html"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputation.html">kaldi::nnet3::NnetComputation</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation_8h_source.html#l00213">nnet-computation.h:213</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_abef08be8cbb804941e5d09efd1bfc3b5"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#abef08be8cbb804941e5d09efd1bfc3b5">kaldi::nnet3::DerivativeTimeLimiter::ResizeMatrices</a></div><div class="ttdeci">void ResizeMatrices()</div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo_html_a9da2804c57d358d12d491f0c3d51d0ef"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a9da2804c57d358d12d491f0c3d51d0ef">kaldi::nnet3::DerivativeTimeLimiter::MatrixPruneInfo::is_deriv</a></div><div class="ttdeci">bool is_deriv</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00470">nnet-optimize-utils.h:470</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a1146f4efa141a56210f9dbf1090b20f0"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a1146f4efa141a56210f9dbf1090b20f0">kaldi::nnet3::RemoveNoOps</a></div><div class="ttdeci">void RemoveNoOps(NnetComputation *computation)</div><div class="ttdoc">Removes commands of type kNoOperation in the computation. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00604">nnet-optimize-utils.cc:604</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a4ba6b7dba4c539ad7a149e05b59f80aa"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a4ba6b7dba4c539ad7a149e05b59f80aa">kaldi::nnet3::ComputationRenumberer::RemoveUnusedIndexesMulti</a></div><div class="ttdeci">void RemoveUnusedIndexesMulti()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00408">nnet-optimize-utils.cc:408</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_a08a57d03b1828eeb8548ee5e8a942264"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a08a57d03b1828eeb8548ee5e8a942264">kaldi::nnet3::VariableMergingOptimizer::MergeVariables</a></div><div class="ttdeci">bool MergeVariables()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00706">nnet-optimize-utils.cc:706</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html_a1d8913b401bfd339536bdd60f97d6101"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a1d8913b401bfd339536bdd60f97d6101">kaldi::nnet3::ModelUpdateConsolidator::ConsolidateModelUpdate</a></div><div class="ttdeci">void ConsolidateModelUpdate()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01157">nnet-optimize-utils.cc:1157</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo_html_a64221ce8a4754677e990d336b6154936"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a64221ce8a4754677e990d336b6154936">kaldi::nnet3::DerivativeTimeLimiter::MatrixPruneInfo::partly_inside_range</a></div><div class="ttdeci">bool partly_inside_range</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00474">nnet-optimize-utils.h:474</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_a36d13565d1302a2bf74127b141ba3537"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#a36d13565d1302a2bf74127b141ba3537">kaldi::nnet3::ComputationRenumberer::computation_</a></div><div class="ttdeci">NnetComputation * computation_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00366">nnet-optimize-utils.h:366</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a17acd598bf1ced7e83e0c8a8569d224f"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a17acd598bf1ced7e83e0c8a8569d224f">kaldi::nnet3::IdentifyIndexesRangesArgs</a></div><div class="ttdeci">void IdentifyIndexesRangesArgs(std::vector&lt; NnetComputation::Command &gt; *commands, std::vector&lt; int32 * &gt; *indexes_ranges_args)</div><div class="ttdoc">Identifies in the vector of commands, arguments that correspond to indexes into the computation&#39;s &#39;in...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00143">nnet-optimize-utils.cc:143</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputation_1_1MatrixDebugInfo_html"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputation_1_1MatrixDebugInfo.html">kaldi::nnet3::NnetComputation::MatrixDebugInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation_8h_source.html#l00221">nnet-computation.h:221</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a594bab8b25225a0b1c64109336934916"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a594bab8b25225a0b1c64109336934916">kaldi::nnet3::DerivativeTimeLimiter::LimitDerivTimes</a></div><div class="ttdeci">void LimitDerivTimes()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01535">nnet-optimize-utils.cc:1535</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_ac790fa54a2c9e95706a7384c687651ad"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#ac790fa54a2c9e95706a7384c687651ad">kaldi::nnet3::DerivativeTimeLimiter::MapSimpleMatrixCommand</a></div><div class="ttdeci">void MapSimpleMatrixCommand(NnetComputation::Command *c)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01294">nnet-optimize-utils.cc:1294</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_a066039f8c4f9f320876c465226f17f59"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#a066039f8c4f9f320876c465226f17f59">kaldi::nnet3::DerivativeTimeLimiter::submatrix_map_</a></div><div class="ttdeci">std::vector&lt; int32 &gt; submatrix_map_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00502">nnet-optimize-utils.h:502</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo_html_a515c4dd14ce4dc58f42c9a60b6bfbaba"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputation_1_1SubMatrixInfo.html#a515c4dd14ce4dc58f42c9a60b6bfbaba">kaldi::nnet3::NnetComputation::SubMatrixInfo::matrix_index</a></div><div class="ttdeci">int32 matrix_index</div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation_8h_source.html#l00228">nnet-computation.h:228</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher_html"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationRenumberer_1_1SubMatrixHasher.html">kaldi::nnet3::ComputationRenumberer::SubMatrixHasher</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00309">nnet-optimize-utils.h:309</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_a400e33db7a90834eec20a7eee34f162d"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a400e33db7a90834eec20a7eee34f162d">kaldi::nnet3::VariableMergingOptimizer::already_called_merge_variables_</a></div><div class="ttdeci">bool already_called_merge_variables_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00196">nnet-optimize-utils.h:196</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a77e9698625c65ed53a8fb2eadc416110"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a77e9698625c65ed53a8fb2eadc416110">kaldi::nnet3::IdentifyMatrixArgsInComputation</a></div><div class="ttdeci">void IdentifyMatrixArgsInComputation(bool include_in_submatrices, NnetComputation *computation, std::vector&lt; int32 * &gt; *matrix_args)</div><div class="ttdoc">This function outputs to &quot;matrix_args&quot; the addresses of indexes inside &#39;computation&#39; that correspon...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00105">nnet-optimize-utils.cc:105</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo_html"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html">kaldi::nnet3::DerivativeTimeLimiter::MatrixPruneInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00469">nnet-optimize-utils.h:469</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1VariableMergingOptimizer_html_a18aa0d59c61851a3e1138a100488ea5b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1VariableMergingOptimizer.html#a18aa0d59c61851a3e1138a100488ea5b">kaldi::nnet3::VariableMergingOptimizer::MayBeMerged</a></div><div class="ttdeci">std::pair&lt; bool, bool &gt; MayBeMerged(int32 command, int32 s1, int32 s2) const </div><div class="ttdoc">This function returns a pair of bools saying whether we can do a (left and/or right) merge respective...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00939">nnet-optimize-utils.cc:939</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a2efea0af361ac9b6981f605d7e616028"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a2efea0af361ac9b6981f605d7e616028">kaldi::nnet3::ReplaceInOutput</a></div><div class="ttdeci">bool ReplaceInOutput(const Nnet &amp;nnet, int32 orig_matrix_index, int32 new_matrix_index, NnetComputation *computation)</div><div class="ttdoc">Wherever matrix orig_matrix_index appears in the output of the network (i.e. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00657">nnet-optimize-utils.cc:657</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a6950699c83d835e55f003f89bb92bc80"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a6950699c83d835e55f003f89bb92bc80">kaldi::nnet3::IdentifyIndexesArgs</a></div><div class="ttdeci">void IdentifyIndexesArgs(std::vector&lt; NnetComputation::Command &gt; *commands, std::vector&lt; int32 * &gt; *indexes_args)</div><div class="ttdoc">Identifies in the vector of commands, arguments that correspond to indexes into the computation&#39;s &#39;in...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00155">nnet-optimize-utils.cc:155</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator_html_a1637cd5c5a1274835dfb87d75fde2037"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ModelUpdateConsolidator.html#a1637cd5c5a1274835dfb87d75fde2037">kaldi::nnet3::ModelUpdateConsolidator::final_deallocate_commands_</a></div><div class="ttdeci">std::vector&lt; NnetComputation::Command &gt; final_deallocate_commands_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00266">nnet-optimize-utils.h:266</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1Analyzer_html"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1Analyzer.html">kaldi::nnet3::Analyzer</a></div><div class="ttdoc">This struct exists to set up various pieces of analysis; it helps avoid the repetition of code where ...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-analyze_8h_source.html#l00291">nnet-analyze.h:291</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_ada08c40c80a54a8a851448af83ada561"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#ada08c40c80a54a8a851448af83ada561">kaldi::nnet3::IdentifyMatrixArgs</a></div><div class="ttdeci">void IdentifyMatrixArgs(std::vector&lt; NnetComputation::Command &gt; *commands, std::vector&lt; int32 * &gt; *matrix_args)</div><div class="ttdoc">This function outputs to &quot;matrix_args&quot; the addresses of a subset of the arguments arg1 through arg6 i...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l00090">nnet-optimize-utils.cc:90</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter_html_aab606a6e5101ae95e9a41301cdeaa32b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DerivativeTimeLimiter.html#aab606a6e5101ae95e9a41301cdeaa32b">kaldi::nnet3::DerivativeTimeLimiter::CanLimitMatrix</a></div><div class="ttdeci">bool CanLimitMatrix(const Analyzer &amp;analyzer, int32 matrix_index) const </div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8cc_source.html#l01662">nnet-optimize-utils.cc:1662</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComputationRenumberer_html_ac9050b561913ee338e9a5b75d1671ac9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComputationRenumberer.html#ac9050b561913ee338e9a5b75d1671ac9">kaldi::nnet3::ComputationRenumberer::old_to_new_submatrix_</a></div><div class="ttdeci">std::vector&lt; int32 &gt; old_to_new_submatrix_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00372">nnet-optimize-utils.h:372</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo_html_a3080a09e5ea2e63c0b61d0ab3d0958bc"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1DerivativeTimeLimiter_1_1MatrixPruneInfo.html#a3080a09e5ea2e63c0b61d0ab3d0958bc">kaldi::nnet3::DerivativeTimeLimiter::MatrixPruneInfo::fully_inside_range</a></div><div class="ttdeci">bool fully_inside_range</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize-utils_8h_source.html#l00472">nnet-optimize-utils.h:472</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_67a0a17020b8eedc08ffa5626b1d53a1.html">nnet3</a></li><li class="navelem"><a class="el" href="nnet-optimize-utils_8h.html">nnet-optimize-utils.h</a></li>
    <li class="footer">Generated on Thu Apr 28 2016 15:42:32 for Kaldi by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
